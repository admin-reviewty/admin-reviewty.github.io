{"version":3,"file":"default-src_app_ingredient_ingredient_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAyE;AACA;AACzB;AAOxB;;;;;;;;ICIpB,0EAA6B;IAAC,uDAAe;IAAA,4DAAO;IACpD,0EACG;IAD+B,2UAAqB;IACpD,iEAAC;IAAA,4DACH;;;IAH6B,0DAAe;IAAf,uFAAe;;;IAM7C,uDACF;;;;IADE,gLACF;;ADOK,MAAM,sBAAsB;IASjC,YACU,4BAA0D;QAA1D,iCAA4B,GAA5B,4BAA4B,CAA8B;QARpE,aAAQ,GAAqB,IAAI,yCAAO,EAAE,CAAC;QAE3C,YAAO,GAAG,KAAK,CAAC;QAChB,UAAK,GAA4B,IAAI,iDAAe,CAAC,EAAE,CAAC,CAAC;QACzD,WAAM,GAA4C,EAAE,CAAC;QACrD,cAAS,GAAG,KAAK,CAAC;QAwClB,aAAQ,GAAqE,CAC3E,CAAsD,EACtD,EAAE,GAAE,CAAC,CAAC;QAER,cAAS,GAAe,GAAG,EAAE,GAAE,CAAC,CAAC;QAvC/B,IAAI,CAAC,KAAK;aACP,IAAI,CACH,yDAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EACxB,4DAAY,CAAC,GAAG,CAAC,EACjB,oEAAoB,EAAE,EACtB,sDAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,GAAG,MAAM,IAAG,CAAC,CAAC,EACzC,mDAAG,CAAC,GAAG,EAAE;YACP,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,CAAC,CAAC,CACH;aACA,SAAS,EAAE,CAAC;IACjB,CAAC;IAED,QAAQ,KAAU,CAAC;IAEnB,UAAU,CAAC,GAA6C;QACtD,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,EAAE;YAC7B,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;YACxB,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;IACH,CAAC;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACtB,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACnC,CAAC;IAQD,WAAW;QACT,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB;IACH,CAAC;IAED,2CAA2C;IAC3C,oEAAoE;IACpE,cAAc;IACd,MAAM;IAEN,0CAA0C;IAC1C,wBAAwB;IACxB,6BAA6B;IAC7B,MAAM;IACN,IAAI;IAEJ,SAAS;QACP,IAAI,CAAC,4BAA4B;aAC9B,KAAK,CAAC;YACL,KAAK,EAAE;gBACL,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;aACpC;YACD,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;SACzB,CAAC;aACD,SAAS,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE;YAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,mBAAmB,CAAC,MAAM,MAAK,CAAC,CAAC;YACxD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAC7D,CAAC,CAAC,CAAC;IACP,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;;4FAzFU,sBAAsB;oHAAtB,sBAAsB,mHARtB;YACT;gBACE,OAAO,EAAE,8DAAiB;gBAC1B,WAAW,EAAE,yDAAU,CAAC,GAAG,EAAE,CAAC,sBAAsB,CAAC;gBACrD,KAAK,EAAE,IAAI;aACZ;SACF;QCzBH,+EAWC;QAJC,oMAA0B,qGACX,iBAAa,IADF,yGAET,uBAAmB,IAFV;QAK1B,kIAKc;QACd,kIAEc;QAChB,4DAAY;;QApBV,6EAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDuD;AACA;AACzB;AAOxB;;;;;;;;ICIpB,0EAA6B;IAC3B,oEAKE;IACF,uDAAe;IAAA,4DAChB;IACD,0EACG;IAD+B,4UAAqB;IACpD,iEAAC;IAAA,4DACH;;;IARG,0DAA+B;IAA/B,wJAA+B;IAIjC,0DAAe;IAAf,uFAAe;;;IAOjB,oEAKE;IACF,uDACF;;;;IALI,wJAA+B;IAIjC,0DACF;IADE,gLACF;;ADNK,MAAM,uBAAuB;IASlC,YACU,6BAA4D;QAA5D,kCAA6B,GAA7B,6BAA6B,CAA+B;QARtE,aAAQ,GAAqB,IAAI,yCAAO,EAAE,CAAC;QAE3C,YAAO,GAAG,KAAK,CAAC;QAChB,UAAK,GAA4B,IAAI,iDAAe,CAAC,EAAE,CAAC,CAAC;QACzD,WAAM,GAA6C,EAAE,CAAC;QACtD,cAAS,GAAG,KAAK,CAAC;QAwClB,aAAQ,GAEI,CAAC,CAAuD,EAAE,EAAE,GAAE,CAAC,CAAC;QAE5E,cAAS,GAAe,GAAG,EAAE,GAAE,CAAC,CAAC;QAvC/B,IAAI,CAAC,KAAK;aACP,IAAI,CACH,yDAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EACxB,4DAAY,CAAC,GAAG,CAAC,EACjB,oEAAoB,EAAE,EACtB,sDAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,GAAG,MAAM,IAAG,CAAC,CAAC,EACzC,mDAAG,CAAC,GAAG,EAAE;YACP,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,CAAC,SAAS,EAAE,CAAC;QACnB,CAAC,CAAC,CACH;aACA,SAAS,EAAE,CAAC;IACjB,CAAC;IAED,QAAQ,KAAU,CAAC;IAEnB,UAAU,CAAC,GAA8C;QACvD,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,EAAE;YAC7B,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;YACxB,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC1B;IACH,CAAC;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACtB,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IACnC,CAAC;IAQD,WAAW;QACT,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB;IACH,CAAC;IAED,2CAA2C;IAC3C,oEAAoE;IACpE,cAAc;IACd,MAAM;IAEN,0CAA0C;IAC1C,wBAAwB;IACxB,6BAA6B;IAC7B,MAAM;IACN,IAAI;IAEJ,SAAS;QACP,IAAI,CAAC,6BAA6B;aAC/B,KAAK,CAAC;YACL,KAAK,EAAE;gBACL,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;aACpC;YACD,KAAK,EAAE,EAAE;YACT,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;SACzB,CAAC;aACD,SAAS,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE;YAC/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,SAAS,GAAG,KAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,oBAAoB,CAAC,MAAM,MAAK,CAAC,CAAC;YACzD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;IACP,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;;8FAzFU,uBAAuB;qHAAvB,uBAAuB,oHARvB;YACT;gBACE,OAAO,EAAE,8DAAiB;gBAC1B,WAAW,EAAE,yDAAU,CAAC,GAAG,EAAE,CAAC,uBAAuB,CAAC;gBACtD,KAAK,EAAE,IAAI;aACZ;SACF;QC1BH,+EAWC;QAJC,qMAA0B,sGACX,iBAAa,IADF,0GAET,uBAAmB,IAFV;QAK1B,mIAac;QACd,mIAQc;QAChB,4DAAY;;QAlCV,6EAAgB;;;;;;;;;;;;;;;;;;;;ACKmB;;;;;;ICS/B,oEAME;;;IAHA,8JAA8B;IAC9B,+SAAkD;IAClD,iTAAoD;;;IAKxD,oEAIE;;;ADfC,MAAM,0BAA0B;IAKrC,YAAmB,eAAgC;QAAhC,oBAAe,GAAf,eAAe,CAAiB;QAJnD,gBAAW,GAAG,yDAAW,CAAC;QAKxB,IAAI,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,6DAAe,EAAE,CAAC,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,6DAAe,EAAE,CAAC,CAAC,CAAC;IACzC,CAAC;IAED,QAAQ,KAAU,CAAC;IAEnB,IAAI,CAAC,UAA2C;;QAC9C,OAAO,UAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,CAAC,YAAY,CAAC,0CACrE,IAAI,CAAC;IACX,CAAC;;oGAhBU,0BAA0B;wHAA1B,0BAA0B;QCdvC,yEAA6B;QAC3B,yEAQC;QACC,uDACF;QAAA,4DAAM;QACN,yEAAyB;QACvB,uDACA;QAAA,yEAAkC;QAChC,sHAME;QACJ,4DAAM;QACR,4DAAM;QACN,yEAAqE;QACnE,sHAIE;QACJ,4DAAM;QACR,4DAAM;;QA5BF,0DAKE;QALF,+UAKE;QAEF,0DACF;QADE,8FACF;QAEE,0DACA;QADA,oGACA;QAEyB,0DAA8B;QAA9B,oGAA8B;QAUpD,0DAAiC;QAAjC,yIAAiC;;;;;;;;;;;;;;;;;;;;;ACzBe;AAC8C;AAET;AACvB;;;AAErE,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,KAAK;QACX,OAAO,EAAE;YACP,UAAU,EAAE,8EAAkB;SAC/B;QACD,SAAS,EAAE,8GAA0B;KACtC;IACD;QACE,IAAI,EAAE,KAAK;QACX,OAAO,EAAE;YACP,UAAU,EAAE,8EAAkB;SAC/B;QACD,SAAS,EAAE,8GAA0B;KACtC;IACD;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,MAAM;QACjB,SAAS,EAAE,qGAAuB;KACnC;CACF,CAAC;AAMK,MAAM,uBAAuB;;8FAAvB,uBAAuB;oHAAvB,uBAAuB;wHAHzB,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC,EAC9B,yDAAY;mIAEX,uBAAuB,oFAFxB,yDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BuB;AACG;AACa;AACD;AACR;AACF;AACI;AACU;AACd;AACa;AACX;AACJ;AACQ;AACJ;AACC;AACL;AACA;AACA;AACI;AAEgB;AACsB;AACc;AACL;AACP;AACG;AAC5B;AACmB;;;AAoCjF,MAAM,gBAAgB;;gFAAhB,gBAAgB;6GAAhB,gBAAgB;kHAFhB,CAAC,8EAAkB,EAAE,iGAAoB,CAAC,YAxB5C;YACP,0DAAY;YACZ,+EAAuB;YACvB,wDAAW;YACX,gEAAmB;YACnB,+DAAY;YACZ,0EAAwB,EAAE;YAC1B,6DAAY;YACZ,0EAAkB;YAClB,yEAAkB;YAClB,+DAAa;YACb,mEAAe;YACf,+DAAa;YACb,4EAAmB;YACnB,iEAAc;YACd,6DAAY;YACZ,6DAAY;YACZ,6DAAY;YACZ,+DAAa;YACb,6DAAY;YACZ,qEAAgB;YAChB,iEAAc;YACd,iEAAc;SACf;mIAGU,gBAAgB,mBAhCzB,qGAAuB;QACvB,mHAA0B;QAC1B,8GAA0B;QAC1B,uGAAsB;QACtB,0GAAuB,aAGvB,0DAAY;QACZ,+EAAuB;QACvB,wDAAW;QACX,gEAAmB;QACnB,+DAAY,qEAEZ,6DAAY;QACZ,0EAAkB;QAClB,yEAAkB;QAClB,+DAAa;QACb,mEAAe;QACf,+DAAa;QACb,4EAAmB;QACnB,iEAAc;QACd,6DAAY;QACZ,6DAAY;QACZ,6DAAY;QACZ,+DAAa;QACb,6DAAY;QACZ,qEAAgB;QAChB,iEAAc;QACd,iEAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1D6D;AAI7B;AACQ;AACnC;AAUc;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICwCzB,2EAIa;;;IAFX,4EAAgB;;;IAHpB,gFAA+D;IAC7D,kJAIa;IACf,4DAAY;;;IAJS,0DAAQ;IAAR,iFAAQ;;;IAsB5B,uDAGC;;;;;;IAHD,4VAGC;;;;;IAXN,6EAMC;IACC,6NAKC;IACD,+EAAc;IACZ,gFAAe;IAAA,uDAAmC;;IAAA,4DAAgB;IAClE,sFAGC;;IACC,gFAAsC;IACpC,4EAGa;;IACb,4EAGa;;IACb,4EAGa;;IACf,4DAAY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAAmC;;IAAA,4DAAgB;IAClE,uFAGC;;IACC,wEACA;IAAA,4DAAkB;IACtB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAAqC;;IAAA,4DAAgB;IACpE,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,+EAAa;IACX,yFAEC;;IACC,gFAAc;IACZ,iFAAe;IAAA,wDAAmC;;IAAA,4DAAgB;IAClE,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACf,gFAAc;IACZ,iFAAe;IAAA,wDAEb;;IAAA,4DAAgB;IAClB,uFAA+B;IAC7B,2EAIY;IACd,4DAAkB;IACpB,4DAAe;IACjB,4DAAoB;IACtB,4DAAc;IAChB,4DAAS;;;;;IAxJP,+EAAmB;IAYF,0DAAmC;IAAnC,oJAAmC;IAGhD,0DAA4D;IAA5D,kLAA4D;IAIxD,0DAA2B;IAA3B,2FAA2B;IAI3B,0DAA2B;IAA3B,2FAA2B;IAI3B,0DAA2B;IAA3B,2FAA2B;IAOlB,0DAAmC;IAAnC,qJAAmC;IAGhD,0DAA4D;IAA5D,mLAA4D;IAM/C,0DAEb;IAFa,4JAEb;IAKE,0DAA0C;IAA1C,8IAA0C;IAK/B,0DAAqC;IAArC,uJAAqC;IAKhD,0DAA0C;IAA1C,8IAA0C;IAM5C,0DAAqD;IAArD,qKAAqD;IAGpC,0DAAmC;IAAnC,qJAAmC;IAK9C,0DAAyC;IAAzC,8IAAyC;IAK9B,0DAEb;IAFa,4JAEb;IAKE,0DAAyC;IAAzC,8IAAyC;IAK9B,0DAEb;IAFa,yJAEb;IAKE,0DAAyC;IAAzC,8IAAyC;IAK9B,0DAEb;IAFa,4JAEb;IAKE,0DAAyC;IAAzC,8IAAyC;IAK9B,0DAEb;IAFa,gKAEb;IAKE,0DAAyC;IAAzC,8IAAyC;IAK9B,0DAEb;IAFa,6JAEb;IAKE,0DAAyC;IAAzC,8IAAyC;IAK9B,0DAEb;IAFa,0JAEb;IAKE,0DAAyC;IAAzC,8IAAyC;;;ADvM3D,MAAM,EAAE,GAAG,IAAI,CAAC;AAOT,MAAM,0BAA0B;IAQrC,YACU,EAAe,EACf,KAAqB,EACrB,QAAkB,EAClB,mBAAwC,EACxC,mBAAwC,EACxC,UAA4B,EAC5B,gBAAkC,EAClC,eAAgC,EAChC,aAAmC;QARnC,OAAE,GAAF,EAAE,CAAa;QACf,UAAK,GAAL,KAAK,CAAgB;QACrB,aAAQ,GAAR,QAAQ,CAAU;QAClB,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,eAAU,GAAV,UAAU,CAAkB;QAC5B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,oBAAe,GAAf,eAAe,CAAiB;QAChC,kBAAa,GAAb,aAAa,CAAsB;QAhB7C,iBAAY,GAAG,0DAAY,CAAC;QAC5B,UAAK,GAA4B,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,kDAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QAC9D,aAAQ,GAAqB,IAAI,yCAAO,EAAE,CAAC;QAG3C,YAAO,GAAG,KAAK,CAAC;QAad,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAChC,GAAG,EAAE,CAAC,IAAI,CAAC;YACX,YAAY,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,+DAAmB,CAAC;YACpD,oBAAoB,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;YACzC,mBAAmB,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;YACxC,GAAG,EAAE,CAAC,IAAI,CAAC;YACX,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,oDAAa,CAAC;YACZ,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAClB,oDAAG,CAAkC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,CAClE;YACD,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE;SACjC,CAAC;aACC,IAAI,CAAC,0DAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC9B,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE;;YAC1B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CACxC;gBACE,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,EAAE;gBACtB,MAAM,EAAE,iBAAI,CAAC,UAAU,0CAAE,UAAU,0CAAE,GAAG,KAAI,SAAS;gBACrD,UAAU,EAAE,iBAAI,CAAC,UAAU,0CAAE,UAAU,0CAAE,OAAO,KAAI,SAAS;aAC9D,EACD,QAAQ,CACT,CAAC;YACF,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;gBAC3B,GAAG,EAAE,UAAI,CAAC,UAAU,0CAAE,GAAG;gBACzB,GAAG,EAAE,OAAO,CAAC,MAAM;gBACnB,OAAO,EAAE,OAAO,CAAC,UAAU;aAC5B,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,UAAU,CAC1B,cAAc,EACd,IAAI,CAAC,EAAE,CAAC,KAAK,CACX,IAAI,CAAC,eAAe;iBACjB,IAAI,CAAC,CAAC,GAAG,CAAC,WAAI,CAAC,UAAU,0CAAE,YAAY,KAAI,EAAE,CAAC,CAAC,CAAC;iBAChD,GAAG,CAAC,CAAC,WAAW,EAAE,EAAE;gBACnB,OAAO,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;oBACnB,EAAE,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC;oBACpB,IAAI,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,+DAAmB,CAAC;oBAC7C,QAAQ,EAAE,CAAC,WAAW,CAAC,QAAQ,EAAE,+DAAmB,CAAC;oBACrD,WAAW,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC;oBACtC,MAAM,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC;oBAC5B,IAAI,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC;oBACxB,UAAU,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC;oBACpC,QAAQ,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC;oBAChC,WAAW,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC;oBACtC,cAAc,EAAE,CAAC,WAAW,CAAC,cAAc,CAAC;oBAC5C,WAAW,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC;oBACtC,SAAS,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC;iBACnC,CAAC,CAAC;YACL,CAAC,CAAC,IAAI,EAAE,EACV,+DAAmB,CACpB,CACF,CAAC;YACF,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;gBAC3B,oBAAoB,EAClB,iBAAU,CAAC,gBAAgB,0CAAE,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;;oBAAC,wCACnC,OAAC,CAAC,YAAY,0CAAG,CAAC,CAAC,KACtB,QAAQ,oBACH,CAAC,KAEN;iBAAA,CAAC,KAAI,EAAE;gBACX,mBAAmB,EACjB,iBAAU,CAAC,QAAQ,0CAAE,GAAG,CAAC,CAAC,OAAO,EAAE,EAAE;;oBAAC,wCACjC,aAAO,CAAC,YAAY,0CAAG,CAAC,CAAC,KAC5B,OAAO,IACP;iBAAA,CAAC,KAAI,EAAE;aACZ,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,CAAc,CAAC;IAC5D,CAAC;IAED,MAAM;QACJ,MAAM,SAAS,GAAG,IAAI,GAAG,CAAC;YACxB,6DAAe;YACf,6DAAe;YACf,6DAAe;SAChB,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAC7C,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CACzC,CAAC;QACF,MAAM,QAAQ,GACZ,SAAS,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,6DAAe,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;QAE3E,IAAI,CAAC,YAAY,CAAC,IAAI,CACpB,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YACZ,EAAE,EAAE,EAAE;YACN,IAAI,EAAE,CAAC,IAAI,EAAE,+DAAmB,CAAC;YACjC,QAAQ,EAAE,CAAC,QAAQ,EAAE,+DAAmB,CAAC;YACzC,WAAW,EAAE,EAAE;YACf,MAAM,EAAE,EAAE;YACV,IAAI,EAAE,EAAE;YACR,UAAU,EAAE,EAAE;YACd,QAAQ,EAAE,EAAE;YACZ,WAAW,EAAE,EAAE;YACf,cAAc,EAAE,EAAE;YAClB,WAAW,EAAE,EAAE;YACf,SAAS,EAAE,EAAE;SACd,CAAC,CACH,CAAC;IACJ,CAAC;IAED,SAAS,CAAC,KAAa;QACrB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACpC,CAAC;IAED,MAAM;;QACJ,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5D,OAAO,CAAC,WAAW,EAAE,CAAC;YACtB,OAAO,CAAC,sBAAsB,EAAE,CAAC;QACnC,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC7B,OAAO;SACR;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,yCAAE,CAAC,UAAI,CAAC,UAAU,0CAAE,EAAE,CAAC;aACpB,IAAI,CACH,yDAAQ,CAAC,CAAC,KAAK,EAAE,EAAE;;YACjB,IAAI,KAAK,EAAE;gBACT,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CACxC;oBACE,EAAE,EAAE,KAAK;oBACT,MAAM,EAAE,WAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK,KAAI,SAAS;oBACxD,UAAU,EACR,WAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,0CAAE,KAAK,KAAI,SAAS;iBACvD,EACD,QAAQ,CACT,CAAC;gBACF,MAAM,IAAI,GAA0B;oBAClC,GAAG,EAAE,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK;oBACxC,SAAS,EAAE,WAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK,KAAI;wBAChD,MAAM,EAAE;4BACN,GAAG,EAAE,OAAO,CAAC,MAAM;4BACnB,OAAO,EAAE,OAAO,CAAC,UAAU;yBAC5B;qBACF;oBACD,YAAY,EAAE;wBACZ,MAAM,EAAE,UAAI,CAAC,YAAY,CAAC,KAAK,0CAC3B,MAAM,CAAC,CAAC,WAAgB,EAAE,EAAE,CAAC,CAAC,WAAW,CAAC,EAAE,EAC7C,GAAG,CAAC,CAAC,WAAgB,EAAE,EAAE,CAAC,kDAAM,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;wBACzD,GAAG,EAAE,UAAI,CAAC,YAAY,CAAC,KAAK,0CAAE,MAAM,CAClC,CAAC,WAAgB,EAAE,EAAE,CAAC,WAAW,CAAC,EAAE,CACrC;qBACF;oBACD,QAAQ,EAAE;wBACR,GAAG,EACD,iBAAI,CAAC,YAAY;6BACd,GAAG,CAAC,qBAAqB,CAAC,0CACzB,KAAK,0CAAE,GAAG,CAAC,CAAC,WAAqC,EAAE,EAAE,CAAC,CAAC;4BACvD,EAAE,EAAE,WAAW,CAAC,OAAO,CAAC,EAAE;yBAC3B,CAAC,CAAC,KAAI,EAAE;qBACd;oBACD,SAAS,EAAE;wBACT,GAAG,EACD,iBAAI,CAAC,YAAY;6BACd,GAAG,CAAC,sBAAsB,CAAC,0CAC1B,KAAK,0CAAE,GAAG,CAAC,CAAC,WAAsC,EAAE,EAAE,CAAC,CAAC;4BACxD,EAAE,EAAE,WAAW,CAAC,QAAQ,CAAC,EAAE;yBAC5B,CAAC,CAAC,KAAI,EAAE;qBACd;iBACF,CAAC;gBACF,OAAO,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;oBACrC,KAAK,EAAE;wBACL,EAAE,EAAE,KAAK;qBACV;oBACD,IAAI;iBACL,CAAC,CAAC;aACJ;iBAAM;gBACL,MAAM,IAAI,GAA0B;oBAClC,GAAG,EAAE,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK;oBACxC,SAAS,EAAE,WAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK,KAAI;wBAChD,MAAM,EAAE;4BACN,GAAG,EAAE,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,0CAAE,KAAK;4BACxC,OAAO,EAAE,UAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,0CAAE,KAAK;yBACjD;qBACF;oBACD,YAAY,EAAE;wBACZ,MAAM,EAAE,UAAI,CAAC,YAAY,CAAC,KAAK,0CAAE,GAAG,CAAC,CAAC,WAAgB,EAAE,EAAE,CACxD,kDAAM,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,CAAC,CAC5B;qBACF;oBACD,QAAQ,EAAE;wBACR,OAAO,EACL,iBAAI,CAAC,YAAY;6BACd,GAAG,CAAC,qBAAqB,CAAC,0CACzB,KAAK,0CAAE,GAAG,CAAC,CAAC,WAAqC,EAAE,EAAE,CAAC,CAAC;4BACvD,EAAE,EAAE,WAAW,CAAC,OAAO,CAAC,EAAE;yBAC3B,CAAC,CAAC,KAAI,EAAE;qBACd;oBACD,SAAS,EAAE;wBACT,OAAO,EACL,iBAAI,CAAC,YAAY;6BACd,GAAG,CAAC,sBAAsB,CAAC,0CAC1B,KAAK,0CAAE,GAAG,CAAC,CAAC,WAAsC,EAAE,EAAE,CAAC,CAAC;4BACxD,EAAE,EAAE,WAAW,CAAC,QAAQ,CAAC,EAAE;yBAC5B,CAAC,CAAC,KAAI,EAAE;qBACd;iBACF,CAAC;gBACF,OAAO,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;oBACrC,IAAI;iBACL,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CACH;aACA,SAAS,CACR,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE;;YACnB,IAAI,MAAM,EAAE;gBACV,IAAI,CAAC,UAAU,CAAC,KAAK,CACnB,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC3B,cAAc,WAAI,CAAC,UAAU,0CAAE,EAAE,EAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,QAAQ,CAChE,CACF,CAAC;aACH;YAED,IAAI,IAAI,EAAE;gBACR,IAAI,CAAC,UAAU,CAAC,OAAO,CACrB,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC3B,cACE,WAAI,CAAC,UAAU,0CAAE,EAAE,EAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QACnC,UAAU,CACX,CACF,CAAC;gBACF,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;aACtB;YAED,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC,EACD,GAAG,EAAE;;YACH,IAAI,CAAC,UAAU,CAAC,KAAK,CACnB,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC3B,cAAc,WAAI,CAAC,UAAU,0CAAE,EAAE,EAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,QAAQ,CAChE,CACF,CAAC;YACF,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC,CACF,CAAC;IACN,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;;oGAhRU,0BAA0B;wHAA1B,0BAA0B;QC7BvC,oFAAyC;QACvC,mFAAyC;QACvC,qFAAoB;QAClB,kEAA6B;QAC/B,4DAAqB;QACrB,qFAAoB;QAClB,uEAA6B;QAAA,uDAAqC;;QAAA,4DAAI;QACxE,4DAAqB;QACrB,qFAAoB;QAClB,oEAAG;QAAA,wDAA+C;QAAA,4DAAI;QACxD,4DAAqB;QACvB,4DAAgB;QAClB,4DAAiB;QACjB,2EAKC;QADC,uJAAY,YAAQ,IAAC;QAErB,8EAAsB;QACpB,gFAAc;QACZ,iFAAe;QAAA,2EAAkB;QAAA,+DAAG;QAAA,4DAAO;QAAA,4DAAgB;QAC3D,mFAAiB;QACf,uEAAwC;QAC1C,4DAAkB;QACpB,4DAAe;QACf,gFAAc;QACZ,iFAAe;QAAA,wDAEb;;QAAA,4DAAgB;QAClB,mFAAiB;QACf,qFAEuB;QACzB,4DAAkB;QACpB,4DAAe;QACf,gFAAc;QACZ,iFAAe;QACb,wDACF;;QAAA,4DAAgB;QAChB,mFAAiB;QACf,oFAEsB;QACxB,4DAAkB;QACpB,4DAAe;QACf,gFAAc;QACZ,iFAAe;QAAA,wDAA+B;;QAAA,4DAAgB;QAC9D,mFAAiB;QACf,sFAAsC;QACpC,kFAImB;QACrB,4DAAiB;QACjB,qNAQc;QAChB,4DAAkB;QACpB,4DAAe;QACf,iFAKC;QAHC,sJAAS,YAAQ,IAAC,wGACP,2BAAuB,IADhB;QAIlB,iIA0JS;QACX,4DAAY;QACd,4DAAU;QACV,oFAAgC;QAC9B,mFAAiB;QACf,kFAAgB;QACd,8EAAyD;QACvD,wDACF;;QAAA,4DAAS;QACT,8EAMC;QADC,mJAAS,YAAQ,IAAC;QAElB,wDACF;;QAAA,4DAAS;QACX,4DAAiB;QACnB,4DAAkB;QACpB,4DAAe;QACjB,4DAAO;;;QAlP4B,0DAAqC;QAArC,sJAAqC;QAG/D,0DAA+C;QAA/C,gXAA+C;QAMtD,0DAAuB;QAAvB,gFAAuB;QAYJ,2DAEb;QAFa,iKAEb;QASA,0DACF;QADE,mKACF;QAQe,0DAA+B;QAA/B,iJAA+B;QAE5B,0DAAqB;QAArB,6EAAqB;QAyBb,0DAA0B;QAA1B,8FAA0B;QA+Jf,0DAAqB;QAArB,kFAAqB;QACtD,0DACF;QADE,mOACF;QAGE,0DAAiB;QAAjB,0EAAiB;QAKjB,0DACF;QADE,8JACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7OqC;AACF;AAQN;;;;;;;;;;;;;;;;;;;;ICgB3B,6EAA0D;IACxD,mEAAiD;IACjD,uDACF;;IAAA,4DAAS;;IADP,0DACF;IADE,4JACF;;;;IAyBJ,qEAA2C;IACzC,qEAAI;IAAA,uDAAmB;IAAA,4DAAK;IAC5B,qEAAI;IACF,wFAE0B;IAC5B,4DAAK;IACL,qEAAI;IACF,wEAAkD;IAAA,uDAEhD;;IAAA,4DAAI;IACR,4DAAK;IACP,4DAAK;;;IAXC,0DAAmB;IAAnB,iFAAmB;IAGnB,0DAAyB;IAAzB,qFAAyB;IAIxB,0DAA8C;IAA9C,+JAA8C;IAAC,0DAEhD;IAFgD,+IAEhD;;AD/CL,MAAM,uBAAuB;IAelC,YACU,KAAqB,EACrB,MAAc,EACd,oBAA0C,EAC1C,UAA4B,EAC5B,gBAAkC,EAClC,EAAe;QALf,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,eAAU,GAAV,UAAU,CAAkB;QAC5B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,OAAE,GAAF,EAAE,CAAa;QApBzB,aAAQ,GAAqB,IAAI,yCAAO,EAAE,CAAC;QAC3C,gBAAW,GAA2C,EAAE,CAAC;QACzD,qBAAgB,GAAG,CAAC,CAAC;QACrB,cAAS,GAAG,CAAC,CAAC;QACd,aAAQ,GAAG,EAAE,CAAC;QACd,YAAO,GAAG,KAAK,CAAC;QAiBd,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAC9B,IAAI,EAAE,CAAC,IAAI,CAAC;SACb,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,KAAK,CAAC,aAAa;aACrB,IAAI,CAAC,yDAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC9B,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;;YACtB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,EAAE,EAAE,CAAC,CAAC;YAC3D,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,IAAI,EAAE,EAAE,CAAC,CAAC;YAC3D,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAEvC,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBACzB,UAAI,CAAC,YAAY,0CAAE,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;aACjD;iBAAM;gBACL,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CACjD,IAAI,CAAC,YAAY,EAAE,EACnB;oBACE,2BAA2B,EAAE,IAAI;oBACjC,WAAW,EAAE,cAAc;iBAC5B,CACF,CAAC;gBACF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY;qBACnD,IAAI,CAAC,yDAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;qBAC9B,SAAS,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE;oBAC9C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;oBACvB,IAAI,OAAO,EAAE;wBACX,OAAO;qBACR;oBAED,IAAI,KAAK,IAAI,MAAM,EAAE;wBACnB,IAAI,CAAC,UAAU,CAAC,KAAK,CACnB,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,8BAA8B,CAAC,CAC9D,CAAC;wBACF,OAAO;qBACR;oBAED,IAAI,IAAI,EAAE;wBACR,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;wBACpC,IAAI,CAAC,gBAAgB;4BACnB,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,KAAK,CAAC;qBAC9C;gBACH,CAAC,CAAC,CAAC;aACN;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,YAAY;;QAClB,OAAO;YACL,KAAK,EAAE,IAAI,CAAC,QAAQ;YACpB,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ;YAC1C,KAAK,EAAE;gBACL,gBAAgB,EAAE;oBAChB,YAAY,EAAE,WAAI,CAAC,IAAI,0CAAE,IAAI,EAAE,KAAI,SAAS;iBAC7C;aACF;YACD,OAAO,EAAE;gBACP,EAAE,EAAE,0DAAY;aACjB;SACF,CAAC;IACJ,CAAC;IAEO,cAAc;QACpB,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE;YACxD,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;gBACzB,IAAI,EAAE,IAAI,CAAC,IAAI;aAChB,CAAC,CAAC;SACJ;IACH,CAAC;IAED,uBAAuB,CAAC,MAA0B;QAChD,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE;YACvB,WAAW,EAAE;gBACX,IAAI,EAAE,MAAM,CAAC,SAAS;gBACtB,IAAI,EAAE,MAAM,CAAC,QAAQ;aACtB;YACD,UAAU,EAAE,IAAI,CAAC,KAAK;YACtB,mBAAmB,EAAE,OAAO;SAC7B,CAAC,CAAC;IACL,CAAC;IAED,YAAY;QACV,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;QACzC,MAAM,IAAI,GAAG,UAAU,CAAC,IAAI,IAAI,SAAS,CAAC;QAE1C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE;YACvB,WAAW,EAAE;gBACX,IAAI;gBACJ,IAAI,EAAE,CAAC;aACR;YACD,UAAU,EAAE,IAAI,CAAC,KAAK;YACtB,mBAAmB,EAAE,OAAO;SAC7B,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;QACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IAC9B,CAAC;;8FA5HU,uBAAuB;qHAAvB,uBAAuB;QCvBpC,oFAGC;;QACC,mFAAyC;QACvC,qFAAoB;QAClB,kEAA6B;QAC/B,4DAAqB;QACrB,qFAAoB;QAClB,oEAAG;QAAA,uDAAqC;;QAAA,4DAAI;QAC9C,4DAAqB;QACvB,4DAAgB;QAChB,uFAAsB;QACpB,6EAAiE;QAC/D,mEAA+C;QAC/C,wDACF;;QAAA,4DAAS;QACX,4DAAuB;QACzB,4DAAiB;QACjB,8EAAsB;QACpB,2EAAmE;QAA5B,oJAAY,kBAAc,IAAC;QAChE,0EAA2C;QACzC,0EAA6B;QAC3B,qFAA2D;QACzD,wEAKE;;QACJ,4DAAiB;QACjB,kNAKc;QAChB,4DAAM;QACR,4DAAM;QACR,4DAAO;QACT,4DAAU;QACV,+EAAsB;QACpB,gFASC;QADC,wKAAiB,mCAA+B,IAAC;QAEjD,yEAAO;QACL,sEAAI;QACF,sEAAI;QAAA,8DAAE;QAAA,4DAAK;QACX,sEAAI;QAAA,wDAAmC;;QAAA,4DAAK;QAC5C,iEAAS;QACX,4DAAK;QACP,4DAAQ;QACR,yEAAO;QACL,oHAYK;QACP,4DAAQ;QACV,4DAAW;QACb,4DAAU;;;QAzER,qKAA+C;QAOxC,0DAAqC;QAArC,sJAAqC;QAMxC,0DACF;QADE,kKACF;QAIY,0DAAwB;QAAxB,qFAAwB;QAGP,0DAAiC;QAAjC,6EAAiC;QAKtD,0DAAiD;QAAjD,wKAAiD;QAgBzD,0DAAsB;QAAtB,mFAAsB;QAWd,0DAAmC;QAAnC,qJAAmC;QAKd,0DAAc;QAAd,oFAAc;;;;;;;;;;;;;;;;;;;;ACpDV;AAOH;;;;AAG3B,MAAM,kBAAkB;IAE7B,YACU,MAAc,EACd,uBAAgD;QADhD,WAAM,GAAN,MAAM,CAAQ;QACd,4BAAuB,GAAvB,uBAAuB,CAAyB;IACvD,CAAC;IAEJ,OAAO,CACL,KAA6B,EAC7B,KAA0B;QAO1B,MAAM,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;QACxD,IAAI,EAAE,EAAE;YACN,OAAO,IAAI,CAAC,uBAAuB;iBAChC,KAAK,CACJ;gBACE,EAAE;aACH,EACD;gBACE,WAAW,EAAE,cAAc;aAC5B,CACF;iBACA,IAAI,CACH,mDAAG,CAAC,CAAC,MAAM,EAAE,EAAE;;gBACb,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,MAAM,EAAE;oBACjC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;oBAC5C,OAAO,SAAS,CAAC;iBAClB;gBAED,IAAI,YAAM,CAAC,IAAI,0CAAE,UAAU,EAAE;oBAC3B,uCACK,MAAM,CAAC,IAAI,CAAC,UAAU,KACzB,YAAY,EACV,aAAM,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,0CAAE,MAAM,MAAK,CAAC;4BAC/C,CAAC,CAAC;gCACE;oCACE,QAAQ,EAAE,6DAAe;iCACD;6BAC3B;4BACH,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,IACzC;iBACH;qBAAM;oBACL,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;oBAC5C,OAAO,SAAS,CAAC;iBAClB;YACH,CAAC,CAAC,CACH,CAAC;SACL;aAAM;YACL,OAAO;gBACL,YAAY,EAAE;oBACZ;wBACE,QAAQ,EAAE,6DAAe;qBAC1B;iBACF;aAC2B,CAAC;SAChC;IACH,CAAC;;oFA7DU,kBAAkB;mHAAlB,kBAAkB,WAAlB,kBAAkB;;;;;;;;;;;;;;;;;;ACfM;;;AAIrC,MAAM,EAAE,GAAG,IAAI,CAAC;AAWT,MAAM,oBAAoB;IAG/B,YAAoB,YAAqC;QAArC,iBAAY,GAAZ,YAAY,CAAyB;QACvD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE;YAC3D,IAAI,CAAC,QAAQ,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAClD,mDAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YACZ,IAAI,CAAC,QAAQ,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC3C,OAAO,IAAI,CAAC,QAAQ,CAAC;QACvB,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;IAED,OAAO,CAEL,aAAgB,EAAE,gBAAqC;;QACvD,IAAI,CAAC,aAAa,CAAC,MAAM,IAAI,aAAa,CAAC,UAAU,KAAK,EAAE,EAAE;YAC5D,uCACK,aAAa,KAChB,UAAU,EAAE,IAAI,IAChB;SACH;QAED,MAAM,MAAM,GAAG,UAAI,CAAC,QAAQ,0CAAG,GAAG,aAAa,CAAC,EAAE,EAAE,CAAC,CAAC;QACtD,IACE,CAAC,aAAa,CAAC,UAAU;YACzB,CAAC,aAAa,CAAC,MAAM;YACrB,CAAC,MAAM;YACP,CAAC,gBAAgB,KAAK,QAAQ;gBAC5B,aAAa,CAAC,UAAU,KAAK,MAAM,CAAC,UAAU,CAAC;YACjD,CAAC,gBAAgB,KAAK,QAAQ;gBAC5B,aAAa,CAAC,UAAU,KAAK,MAAM,CAAC,UAAU,CAAC,EACjD;YACA,OAAO,aAAa,CAAC;SACtB;QACD,aAAa,CAAC,UAAU;YACtB,gBAAgB,KAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC;QACxE,aAAa,CAAC,MAAM;YAClB,gBAAgB,KAAK,QAAQ;gBAC3B,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,MAAM,CAAC,WAAW;gBAClE,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC;QACvE,OAAO,aAAa,CAAC;IACvB,CAAC;;wFA/CU,oBAAoB;qHAApB,oBAAoB,WAApB,oBAAoB","sources":["./src/app/ingredient/components/caution-select/caution-select.component.ts","./src/app/ingredient/components/caution-select/caution-select.component.html","./src/app/ingredient/components/function-select/function-select.component.ts","./src/app/ingredient/components/function-select/function-select.component.html","./src/app/ingredient/components/ingredient-compact/ingredient-compact.component.ts","./src/app/ingredient/components/ingredient-compact/ingredient-compact.component.html","./src/app/ingredient/ingredient-routing.module.ts","./src/app/ingredient/ingredient.module.ts","./src/app/ingredient/pages/ingredient-details/ingredient-details.component.ts","./src/app/ingredient/pages/ingredient-details/ingredient-details.component.html","./src/app/ingredient/pages/ingredient-list/ingredient-list.component.ts","./src/app/ingredient/pages/ingredient-list/ingredient-list.component.html","./src/app/ingredient/resolvers/ingredient.resolver.ts","./src/app/ingredient/services/unit-converter/unit-converter.service.ts"],"sourcesContent":["import { Component, forwardRef, OnDestroy, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  takeUntil,\n  tap,\n} from 'rxjs/operators';\nimport {\n  SearchCautionTranslationFragment,\n  SearchCautionTranslationsGQL,\n} from '../../../../graphql/graphql';\n\n@Component({\n  selector: 'app-caution-select',\n  templateUrl: './caution-select.component.html',\n  styleUrls: ['./caution-select.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => CautionSelectComponent),\n      multi: true,\n    },\n  ],\n})\nexport class CautionSelectComponent\n  implements OnInit, OnDestroy, ControlValueAccessor {\n  destroy$: Subject<boolean> = new Subject();\n  translations?: Array<SearchCautionTranslationFragment>;\n  loading = false;\n  text$: BehaviorSubject<string> = new BehaviorSubject('');\n  buffer: Array<SearchCautionTranslationFragment> = [];\n  completed = false;\n\n  constructor(\n    private searchCautionTranslationsGQL: SearchCautionTranslationsGQL,\n  ) {\n    this.text$\n      .pipe(\n        takeUntil(this.destroy$),\n        debounceTime(250),\n        distinctUntilChanged(),\n        filter((term) => term?.trim().length > 0),\n        tap(() => {\n          this.buffer = [];\n          this.fetchMore();\n        }),\n      )\n      .subscribe();\n  }\n\n  ngOnInit(): void {}\n\n  writeValue(obj?: Array<SearchCautionTranslationFragment>): void {\n    if (this.translations !== obj) {\n      this.translations = obj;\n      this.handleModelChange();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  handleModelChange(): void {\n    this.onChange(this.translations);\n  }\n\n  onChange: (_: Array<SearchCautionTranslationFragment> | undefined) => void = (\n    _: Array<SearchCautionTranslationFragment> | undefined,\n  ) => {};\n\n  onTouched: () => void = () => {};\n\n  scrollToEnd(): void {\n    if (!this.completed) {\n      this.fetchMore();\n    }\n  }\n\n  // scroll({ end }: { end: number }): void {\n  //   if (this.loading || this.completed || !this.text$.getValue()) {\n  //     return;\n  //   }\n\n  //   if (end + 10 >= this.buffer.length) {\n  //     this.fetchMore();\n  //     console.log('scroll');\n  //   }\n  // }\n\n  fetchMore(): void {\n    this.searchCautionTranslationsGQL\n      .fetch({\n        where: {\n          nameContains: this.text$.getValue(),\n        },\n        first: 30,\n        skip: this.buffer.length,\n      })\n      .subscribe(({ loading, data }) => {\n        this.loading = loading;\n        this.completed = data?.cautionTranslations.length === 0;\n        this.buffer = this.buffer.concat(data.cautionTranslations);\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.unsubscribe();\n  }\n}\n","<ng-select\n  [items]=\"buffer\"\n  [virtualScroll]=\"true\"\n  [loading]=\"loading\"\n  bindLabel=\"name\"\n  [hideSelected]=\"true\"\n  [typeahead]=\"text$\"\n  [(ngModel)]=\"translations\"\n  (scrollToEnd)=\"scrollToEnd()\"\n  (ngModelChange)=\"handleModelChange()\"\n  [multiple]=\"true\"\n>\n  <ng-template ng-label-tmp let-item=\"item\" let-clear=\"clear\">\n    <span class=\"ng-value-label\"> {{ item.name }}</span>\n    <span class=\"ng-value-icon right\" (click)=\"clear(item)\" aria-hidden=\"true\"\n      >×</span\n    >\n  </ng-template>\n  <ng-template ng-option-tmp let-item=\"item\">\n    {{ item.name }} {{ item.language | emojiFlagFromLanguageCode }}\n  </ng-template>\n</ng-select>\n","import { Component, forwardRef, OnDestroy, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  takeUntil,\n  tap,\n} from 'rxjs/operators';\n\nimport {\n  SearchFunctionTranslationFragment,\n  SearchFunctionTranslationsGQL,\n} from '../../../../graphql/graphql';\n\n@Component({\n  selector: 'app-function-select',\n  templateUrl: './function-select.component.html',\n  styleUrls: ['./function-select.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => FunctionSelectComponent),\n      multi: true,\n    },\n  ],\n})\nexport class FunctionSelectComponent\n  implements OnInit, OnDestroy, ControlValueAccessor {\n  destroy$: Subject<boolean> = new Subject();\n  translations?: Array<SearchFunctionTranslationFragment>;\n  loading = false;\n  text$: BehaviorSubject<string> = new BehaviorSubject('');\n  buffer: Array<SearchFunctionTranslationFragment> = [];\n  completed = false;\n\n  constructor(\n    private searchFunctionTranslationsGQL: SearchFunctionTranslationsGQL,\n  ) {\n    this.text$\n      .pipe(\n        takeUntil(this.destroy$),\n        debounceTime(250),\n        distinctUntilChanged(),\n        filter((term) => term?.trim().length > 0),\n        tap(() => {\n          this.buffer = [];\n          this.fetchMore();\n        }),\n      )\n      .subscribe();\n  }\n\n  ngOnInit(): void {}\n\n  writeValue(obj?: Array<SearchFunctionTranslationFragment>): void {\n    if (this.translations !== obj) {\n      this.translations = obj;\n      this.handleModelChange();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  handleModelChange(): void {\n    this.onChange(this.translations);\n  }\n\n  onChange: (\n    _: Array<SearchFunctionTranslationFragment> | undefined,\n  ) => void = (_: Array<SearchFunctionTranslationFragment> | undefined) => {};\n\n  onTouched: () => void = () => {};\n\n  scrollToEnd(): void {\n    if (!this.completed) {\n      this.fetchMore();\n    }\n  }\n\n  // scroll({ end }: { end: number }): void {\n  //   if (this.loading || this.completed || !this.text$.getValue()) {\n  //     return;\n  //   }\n\n  //   if (end + 10 >= this.buffer.length) {\n  //     this.fetchMore();\n  //     console.log('scroll');\n  //   }\n  // }\n\n  fetchMore(): void {\n    this.searchFunctionTranslationsGQL\n      .fetch({\n        where: {\n          nameContains: this.text$.getValue(),\n        },\n        first: 30,\n        skip: this.buffer.length,\n      })\n      .subscribe(({ loading, data }) => {\n        this.loading = loading;\n        this.completed = data?.functionTranslations.length === 0;\n        this.buffer = this.buffer.concat(data.functionTranslations);\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.unsubscribe();\n  }\n}\n","<ng-select\n  [items]=\"buffer\"\n  [virtualScroll]=\"true\"\n  [loading]=\"loading\"\n  bindLabel=\"name\"\n  [hideSelected]=\"true\"\n  [typeahead]=\"text$\"\n  [(ngModel)]=\"translations\"\n  (scrollToEnd)=\"scrollToEnd()\"\n  (ngModelChange)=\"handleModelChange()\"\n  [multiple]=\"true\"\n>\n  <ng-template ng-label-tmp let-item=\"item\" let-clear=\"clear\">\n    <span class=\"ng-value-label\">\n      <img\n        class=\"function__icon\"\n        [src]=\"item.function.symbolUrl\"\n        [alt]=\"item.name\"\n        [title]=\"item.name\"\n      />\n      {{ item.name }}</span\n    >\n    <span class=\"ng-value-icon right\" (click)=\"clear(item)\" aria-hidden=\"true\"\n      >×</span\n    >\n  </ng-template>\n  <ng-template ng-option-tmp let-item=\"item\">\n    <img\n      class=\"function__icon\"\n      [src]=\"item.function.symbolUrl\"\n      [alt]=\"item.name\"\n      [title]=\"item.name\"\n    />\n    {{ item.name }} {{ item.language | emojiFlagFromLanguageCode }}\n  </ng-template>\n</ng-select>\n","import { Component, Input, OnInit } from '@angular/core';\n\nimport {\n  EwgRiskType,\n  IngredientCompactFieldsFragment,\n  LanguageCode,\n} from '../../../../graphql/graphql';\nimport { LanguageService } from '../../../shared/services/language/language.service';\n\n@Component({\n  selector: 'app-ingredient-compact',\n  templateUrl: './ingredient-compact.component.html',\n  styleUrls: ['./ingredient-compact.component.scss'],\n})\nexport class IngredientCompactComponent implements OnInit {\n  EwgRiskType = EwgRiskType;\n  @Input() ingredient!: IngredientCompactFieldsFragment;\n  languages: Map<LanguageCode, number>;\n\n  constructor(public languageService: LanguageService) {\n    this.languages = new Map();\n    this.languages.set(LanguageCode.Vi, 1);\n    this.languages.set(LanguageCode.En, 2);\n  }\n\n  ngOnInit(): void {}\n\n  pick(ingredient: IngredientCompactFieldsFragment): string | undefined {\n    return this.languageService.pick(this.languages, ingredient.translations)\n      ?.name;\n  }\n}\n","<div class=\"ingredient-card\">\n  <div\n    class=\"text-white\"\n    [ngClass]=\"{\n      'ewg-score--low': ingredient.ewgRiskType === EwgRiskType.Low,\n      'ewg-score--medium': ingredient.ewgRiskType === EwgRiskType.Medium,\n      'ewg-score--high': ingredient.ewgRiskType === EwgRiskType.High,\n      'ewg-score--unknown': ingredient.ewgRiskType === null\n    }\"\n  >\n    {{ ingredient.ewg }}\n  </div>\n  <div class=\"flex-grow-1\">\n    {{ pick(ingredient) }}\n    <div class=\"ingredient-functions\">\n      <img\n        *ngFor=\"let function of ingredient.specialFunctions\"\n        class=\"function__icon\"\n        src=\"{{ function.symbolUrl }}\"\n        alt=\"{{ (function.translations || [])[0]?.name }}\"\n        title=\"{{ (function.translations || [])[0]?.name }}\"\n      />\n    </div>\n  </div>\n  <div className=\"{styles.cautionIndicator}\" class=\"caution-indicator\">\n    <img\n      *ngIf=\"ingredient.cautions?.length\"\n      src=\"assets/icons/caution.svg\"\n      class=\"w-100 h-100\"\n    />\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IngredientDetailsComponent } from './pages/ingredient-details/ingredient-details.component';\n\nimport { IngredientListComponent } from './pages/ingredient-list/ingredient-list.component';\nimport { IngredientResolver } from './resolvers/ingredient.resolver';\n\nconst routes: Routes = [\n  {\n    path: 'new',\n    resolve: {\n      ingredient: IngredientResolver,\n    },\n    component: IngredientDetailsComponent,\n  },\n  {\n    path: ':id',\n    resolve: {\n      ingredient: IngredientResolver,\n    },\n    component: IngredientDetailsComponent,\n  },\n  {\n    path: '',\n    pathMatch: 'full',\n    component: IngredientListComponent,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IngredientRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NzCardModule } from 'ng-zorro-antd/card';\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\nimport { NzBreadCrumbModule } from 'ng-zorro-antd/breadcrumb';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { NzMessageModule } from 'ng-zorro-antd/message';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzCollapseModule } from 'ng-zorro-antd/collapse';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { SharedModule } from '../shared/shared.module';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzGridModule } from 'ng-zorro-antd/grid';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NgSelectModule } from '@ng-select/ng-select';\n\nimport { IngredientRoutingModule } from './ingredient-routing.module';\nimport { IngredientListComponent } from './pages/ingredient-list/ingredient-list.component';\nimport { IngredientCompactComponent } from './components/ingredient-compact/ingredient-compact.component';\nimport { IngredientDetailsComponent } from './pages/ingredient-details/ingredient-details.component';\nimport { CautionSelectComponent } from './components/caution-select/caution-select.component';\nimport { FunctionSelectComponent } from './components/function-select/function-select.component';\nimport { IngredientResolver } from './resolvers/ingredient.resolver';\nimport { UnitConverterService } from './services/unit-converter/unit-converter.service';\n\n@NgModule({\n  declarations: [\n    IngredientListComponent,\n    IngredientCompactComponent,\n    IngredientDetailsComponent,\n    CautionSelectComponent,\n    FunctionSelectComponent,\n  ],\n  imports: [\n    CommonModule,\n    IngredientRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SharedModule,\n    TranslateModule.forChild(),\n    NzCardModule,\n    NzPageHeaderModule,\n    NzBreadCrumbModule,\n    NzTableModule,\n    NzMessageModule,\n    NzInputModule,\n    NzInputNumberModule,\n    NzButtonModule,\n    NzIconModule,\n    NzGridModule,\n    NzFormModule,\n    NzTableModule,\n    NzTabsModule,\n    NzCollapseModule,\n    NzSelectModule,\n    NgSelectModule,\n  ],\n  providers: [IngredientResolver, UnitConverterService],\n})\nexport class IngredientModule {}\n","import { Location } from '@angular/common';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Data } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { Subject, of, combineLatest } from 'rxjs';\nimport { map, mergeMap, takeUntil } from 'rxjs/operators';\nimport _ from 'lodash';\n\nimport {\n  CreateIngredientGQL,\n  IngredientCreateInput,\n  IngredientDetailsFragment,\n  IngredientUpdateInput,\n  LanguageCode,\n  Unit,\n  UpdateIngredientGQL,\n} from '../../../../graphql/graphql';\nimport { LanguageService } from '../../../shared/services/language/language.service';\nimport { UnitConverterService } from '../../services/unit-converter/unit-converter.service';\n\nconst IU = 'IU';\n\n@Component({\n  selector: 'app-ingredient-details',\n  templateUrl: './ingredient-details.component.html',\n  styleUrls: ['./ingredient-details.component.scss'],\n})\nexport class IngredientDetailsComponent implements OnInit, OnDestroy {\n  LanguageCode = LanguageCode;\n  units: Array<Unit | typeof IU> = [...Object.values(Unit), IU];\n  destroy$: Subject<boolean> = new Subject();\n  validateForm: FormGroup;\n  ingredient?: IngredientDetailsFragment;\n  loading = false;\n\n  constructor(\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private location: Location,\n    private createIngredientGQL: CreateIngredientGQL,\n    private updateIngredientGQL: UpdateIngredientGQL,\n    private msgService: NzMessageService,\n    private translateService: TranslateService,\n    private languageService: LanguageService,\n    private unitConverter: UnitConverterService,\n  ) {\n    this.validateForm = this.fb.group({\n      ewg: [null],\n      translations: this.fb.array([], Validators.required),\n      functionTranslations: this.fb.control([]),\n      cautionTranslations: this.fb.control([]),\n      rdi: [null],\n      rdiUnit: [null],\n    });\n  }\n\n  ngOnInit(): void {\n    combineLatest([\n      this.route.data.pipe(\n        map<Data, IngredientDetailsFragment>((value) => value.ingredient),\n      ),\n      this.unitConverter.fetchConfig(),\n    ])\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(([ingredient]) => {\n        this.ingredient = ingredient;\n        const rdiData = this.unitConverter.convert(\n          {\n            id: this.ingredient.id,\n            amount: this.ingredient?.attributes?.rdi || undefined,\n            amountUnit: this.ingredient?.attributes?.rdiUnit || undefined,\n          },\n          'source',\n        );\n        this.validateForm.patchValue({\n          ewg: this.ingredient?.ewg,\n          rdi: rdiData.amount,\n          rdiUnit: rdiData.amountUnit,\n        });\n        this.validateForm.setControl(\n          'translations',\n          this.fb.array(\n            this.languageService\n              .sort([...(this.ingredient?.translations || [])])\n              .map((translation) => {\n                return this.fb.group({\n                  id: [translation.id],\n                  name: [translation.name, Validators.required],\n                  language: [translation.language, Validators.required],\n                  description: [translation.description],\n                  effect: [translation.effect],\n                  dose: [translation.dose],\n                  exceedDose: [translation.exceedDose],\n                  pregnant: [translation.pregnant],\n                  combination: [translation.combination],\n                  notCombination: [translation.notCombination],\n                  notableCase: [translation.notableCase],\n                  attention: [translation.attention],\n                });\n              }) || [],\n            Validators.required,\n          ),\n        );\n        this.validateForm.patchValue({\n          functionTranslations:\n            ingredient.specialFunctions?.map((f) => ({\n              ...f.translations?.[0],\n              function: {\n                ...f,\n              },\n            })) || [],\n          cautionTranslations:\n            ingredient.cautions?.map((caution) => ({\n              ...caution.translations?.[0],\n              caution,\n            })) || [],\n        });\n      });\n  }\n\n  get translations(): FormArray {\n    return this.validateForm.get('translations') as FormArray;\n  }\n\n  addTab(): void {\n    const languages = new Set([\n      LanguageCode.Vi,\n      LanguageCode.En,\n      LanguageCode.Ko,\n    ]);\n    this.translations.controls.forEach((control) =>\n      languages.delete(control.value.language),\n    );\n    const language =\n      languages.size === 0 ? LanguageCode.Vi : languages.values().next().value;\n\n    this.translations.push(\n      this.fb.group({\n        id: [],\n        name: [null, Validators.required],\n        language: [language, Validators.required],\n        description: [],\n        effect: [],\n        dose: [],\n        exceedDose: [],\n        pregnant: [],\n        combination: [],\n        notCombination: [],\n        notableCase: [],\n        attention: [],\n      }),\n    );\n  }\n\n  removeTab(index: number): void {\n    this.translations.removeAt(index);\n  }\n\n  submit(): void {\n    Object.values(this.validateForm.controls).forEach((control) => {\n      control.markAsDirty();\n      control.updateValueAndValidity();\n    });\n    if (this.validateForm.invalid) {\n      return;\n    }\n\n    this.loading = true;\n\n    of(this.ingredient?.id)\n      .pipe(\n        mergeMap((value) => {\n          if (value) {\n            const rdiData = this.unitConverter.convert(\n              {\n                id: value,\n                amount: this.validateForm.get('rdi')?.value || undefined,\n                amountUnit:\n                  this.validateForm.get('rdiUnit')?.value || undefined,\n              },\n              'target',\n            );\n            const data: IngredientUpdateInput = {\n              ewg: this.validateForm.get('ewg')?.value,\n              attribute: this.validateForm.get('rdi')?.value && {\n                create: {\n                  rdi: rdiData.amount,\n                  rdiUnit: rdiData.amountUnit,\n                },\n              },\n              translations: {\n                create: this.translations.value\n                  ?.filter((translation: any) => !translation.id)\n                  .map((translation: any) => _.omit(translation, ['id'])),\n                set: this.translations.value?.filter(\n                  (translation: any) => translation.id,\n                ),\n              },\n              cautions: {\n                set:\n                  this.validateForm\n                    .get('cautionTranslations')\n                    ?.value?.map((translation: { caution: { id: any } }) => ({\n                      id: translation.caution.id,\n                    })) || [],\n              },\n              functions: {\n                set:\n                  this.validateForm\n                    .get('functionTranslations')\n                    ?.value?.map((translation: { function: { id: any } }) => ({\n                      id: translation.function.id,\n                    })) || [],\n              },\n            };\n            return this.updateIngredientGQL.mutate({\n              where: {\n                id: value,\n              },\n              data,\n            });\n          } else {\n            const data: IngredientCreateInput = {\n              ewg: this.validateForm.get('ewg')?.value,\n              attribute: this.validateForm.get('rdi')?.value && {\n                create: {\n                  rdi: this.validateForm.get('rdi')?.value,\n                  rdiUnit: this.validateForm.get('rdiUnit')?.value,\n                },\n              },\n              translations: {\n                create: this.translations.value?.map((translation: any) =>\n                  _.omit(translation, ['id']),\n                ),\n              },\n              cautions: {\n                connect:\n                  this.validateForm\n                    .get('cautionTranslations')\n                    ?.value?.map((translation: { caution: { id: any } }) => ({\n                      id: translation.caution.id,\n                    })) || {},\n              },\n              functions: {\n                connect:\n                  this.validateForm\n                    .get('functionTranslations')\n                    ?.value?.map((translation: { function: { id: any } }) => ({\n                      id: translation.function.id,\n                    })) || {},\n              },\n            };\n            return this.createIngredientGQL.mutate({\n              data,\n            });\n          }\n        }),\n      )\n      .subscribe(\n        ({ errors, data }) => {\n          if (errors) {\n            this.msgService.error(\n              this.translateService.instant(\n                `ingredient.${this.ingredient?.id ? 'update' : 'create'}_error`,\n              ),\n            );\n          }\n\n          if (data) {\n            this.msgService.success(\n              this.translateService.instant(\n                `ingredient.${\n                  this.ingredient?.id ? 'update' : 'create'\n                }_success`,\n              ),\n            );\n            this.location.back();\n          }\n\n          this.loading = false;\n        },\n        () => {\n          this.msgService.error(\n            this.translateService.instant(\n              `ingredient.${this.ingredient?.id ? 'update' : 'create'}_error`,\n            ),\n          );\n          this.loading = false;\n        },\n      );\n  }\n\n  cancel(): void {\n    this.location.back();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.unsubscribe();\n  }\n}\n","<nz-page-header class=\"site-page-header\">\n  <nz-breadcrumb nz-page-header-breadcrumb>\n    <nz-breadcrumb-item>\n      <i nz-icon nzType=\"home\"></i>\n    </nz-breadcrumb-item>\n    <nz-breadcrumb-item>\n      <a routerLink=\"/ingredients\">{{ 'common.ingredient' | translate }}</a>\n    </nz-breadcrumb-item>\n    <nz-breadcrumb-item>\n      <a>{{ (ingredient?.translations || [])[0]?.name }}</a>\n    </nz-breadcrumb-item>\n  </nz-breadcrumb>\n</nz-page-header>\n<form\n  nz-form\n  [nzLayout]=\"'vertical'\"\n  [formGroup]=\"validateForm\"\n  (ngSubmit)=\"submit()\"\n>\n  <nz-card class=\"mb-3\">\n    <nz-form-item>\n      <nz-form-label><span class=\"ewg\">ewg</span></nz-form-label>\n      <nz-form-control>\n        <input nz-input formControlName=\"ewg\" />\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label>{{\n        'ingredient.special_function' | translate\n      }}</nz-form-label>\n      <nz-form-control>\n        <app-function-select\n          formControlName=\"functionTranslations\"\n        ></app-function-select>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label>\n        {{ 'ingredient.caution' | translate }}\n      </nz-form-label>\n      <nz-form-control>\n        <app-caution-select\n          formControlName=\"cautionTranslations\"\n        ></app-caution-select>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-form-item>\n      <nz-form-label>{{ 'product.rdi' | translate }}</nz-form-label>\n      <nz-form-control>\n        <nz-input-group [nzAddOnAfter]=\"unit\">\n          <nz-input-number\n            formControlName=\"rdi\"\n            type=\"number\"\n            class=\"w-100\"\n          ></nz-input-number>\n        </nz-input-group>\n        <ng-template #unit>\n          <nz-select formControlName=\"rdiUnit\" nzAllowClear class=\"unit\">\n            <nz-option\n              *ngFor=\"let unit of units\"\n              [nzValue]=\"unit\"\n              [nzLabel]=\"unit\"\n            ></nz-option>\n          </nz-select>\n        </ng-template>\n      </nz-form-control>\n    </nz-form-item>\n    <nz-tabset\n      nzType=\"editable-card\"\n      (nzAdd)=\"addTab()\"\n      (nzClose)=\"removeTab($event.index)\"\n      formArrayName=\"translations\"\n    >\n      <nz-tab\n        *ngFor=\"let translation of translations.controls; let i = index\"\n        [formGroupName]=\"i\"\n        nzClosable\n        [nzTitle]=\"title\"\n        [nzClosable]=\"translations.controls.length > 1\"\n      >\n        <ng-template #title\n          >{{ translation.value.language | emojiFlagFromLanguageCode }}\n          {{\n            'language.' + (translation.value.language | lowercase) | translate\n          }}</ng-template\n        >\n        <nz-form-item>\n          <nz-form-label>{{ 'common.language' | translate }}</nz-form-label>\n          <nz-form-control\n            nzHasFeedback\n            nzErrorTip=\"{{ 'ui.form.should_not_be_empty' | translate }}\"\n          >\n            <nz-select formControlName=\"language\">\n              <nz-option\n                [nzValue]=\"LanguageCode.Vi\"\n                [nzLabel]=\"'🇻🇳 ' + ('language.vi' | translate)\"\n              ></nz-option>\n              <nz-option\n                [nzValue]=\"LanguageCode.En\"\n                [nzLabel]=\"'🇺🇸 ' + ('language.en' | translate)\"\n              ></nz-option>\n              <nz-option\n                [nzValue]=\"LanguageCode.Ko\"\n                [nzLabel]=\"'🇰🇷 ' + ('language.ko' | translate)\"\n              ></nz-option>\n            </nz-select>\n          </nz-form-control>\n        </nz-form-item>\n        <nz-form-item>\n          <nz-form-label>{{ 'ingredient.name' | translate }}</nz-form-label>\n          <nz-form-control\n            nzHasFeedback\n            nzErrorTip=\"{{ 'ui.form.should_not_be_empty' | translate }}\"\n          >\n            <input nz-input formControlName=\"name\"\n          /></nz-form-control>\n        </nz-form-item>\n        <nz-form-item>\n          <nz-form-label>{{\n            'ingredient.description' | translate\n          }}</nz-form-label>\n          <nz-form-control nzHasFeedback>\n            <textarea\n              nz-input\n              formControlName=\"description\"\n              [nzAutosize]=\"{ minRows: 5, maxRows: 10 }\"\n            ></textarea>\n          </nz-form-control>\n        </nz-form-item>\n        <nz-form-item>\n          <nz-form-label>{{ 'ingredient.effect' | translate }}</nz-form-label>\n          <nz-form-control nzHasFeedback>\n            <textarea\n              nz-input\n              formControlName=\"effect\"\n              [nzAutosize]=\"{ minRows: 5, maxRows: 10 }\"\n            ></textarea>\n          </nz-form-control>\n        </nz-form-item>\n        <nz-collapse>\n          <nz-collapse-panel\n            [nzHeader]=\"'ingredient.functional_food' | translate\"\n          >\n            <nz-form-item>\n              <nz-form-label>{{ 'ingredient.dose' | translate }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"dose\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n            <nz-form-item>\n              <nz-form-label>{{\n                'ingredient.exceed_dose' | translate\n              }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"exceedDose\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n            <nz-form-item>\n              <nz-form-label>{{\n                'ingredient.pregnant' | translate\n              }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"pregnant\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n            <nz-form-item>\n              <nz-form-label>{{\n                'ingredient.combination' | translate\n              }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"combination\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n            <nz-form-item>\n              <nz-form-label>{{\n                'ingredient.not_combination' | translate\n              }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"notCombination\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n            <nz-form-item>\n              <nz-form-label>{{\n                'ingredient.notable_case' | translate\n              }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"notableCase\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n            <nz-form-item>\n              <nz-form-label>{{\n                'ingredient.attention' | translate\n              }}</nz-form-label>\n              <nz-form-control nzHasFeedback>\n                <textarea\n                  nz-input\n                  formControlName=\"attention\"\n                  [nzAutosize]=\"{ minRows: 2, maxRows: 5 }\"\n                ></textarea>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-collapse-panel>\n        </nz-collapse>\n      </nz-tab>\n    </nz-tabset>\n  </nz-card>\n  <nz-form-item class=\"mt-2 pb-4\">\n    <nz-form-control>\n      <nz-input-group>\n        <button nz-button nzType=\"primary\" [nzLoading]=\"loading\">\n          {{ (ingredient?.id ? 'common.update' : 'common.add') | translate }}\n        </button>\n        <button\n          nz-button\n          [nzDanger]=\"true\"\n          class=\"ml-2\"\n          type=\"button\"\n          (click)=\"cancel()\"\n        >\n          {{ 'common.cancel' | translate }}\n        </button>\n      </nz-input-group>\n    </nz-form-control>\n  </nz-form-item>\n</form>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { QueryRef } from 'apollo-angular';\nimport { NzMessageService } from 'ng-zorro-antd/message';\nimport { NzTableQueryParams } from 'ng-zorro-antd/table';\nimport { Subject, Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport {\n  GetIngredientListGQL,\n  GetIngredientListQuery,\n  GetIngredientListQueryVariables,\n  IngredientCompactFieldsFragment,\n  OrderBy,\n} from '../../../../graphql/graphql';\n\n@Component({\n  selector: 'app-ingredient-list',\n  templateUrl: './ingredient-list.component.html',\n  styleUrls: ['./ingredient-list.component.scss'],\n})\nexport class IngredientListComponent implements OnInit, OnDestroy {\n  destroy$: Subject<boolean> = new Subject();\n  ingredients: Array<IngredientCompactFieldsFragment> = [];\n  ingredientsCount = 0;\n  pageIndex = 1;\n  pageSize = 10;\n  loading = false;\n  dataQueryRef:\n    | QueryRef<GetIngredientListQuery, GetIngredientListQueryVariables>\n    | undefined;\n  dataSubscription: Subscription | undefined;\n\n  searchForm: FormGroup;\n  text?: string;\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private getIngredientListGQL: GetIngredientListGQL,\n    private msgService: NzMessageService,\n    private translateService: TranslateService,\n    private fb: FormBuilder,\n  ) {\n    this.searchForm = this.fb.group({\n      name: [null],\n    });\n  }\n\n  ngOnInit(): void {\n    this.route.queryParamMap\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((paramMap) => {\n        this.pageIndex = parseInt(paramMap.get('page') || '1', 10);\n        this.pageSize = parseInt(paramMap.get('size') || '10', 10);\n        this.text = paramMap.get('text') || '';\n\n        this.patchFormValue();\n\n        if (this.dataSubscription) {\n          this.dataQueryRef?.refetch(this.getVariables());\n        } else {\n          this.dataQueryRef = this.getIngredientListGQL.watch(\n            this.getVariables(),\n            {\n              notifyOnNetworkStatusChange: true,\n              fetchPolicy: 'network-only',\n            },\n          );\n          this.dataSubscription = this.dataQueryRef.valueChanges\n            .pipe(takeUntil(this.destroy$))\n            .subscribe(({ data, loading, error, errors }) => {\n              this.loading = loading;\n              if (loading) {\n                return;\n              }\n\n              if (error || errors) {\n                this.msgService.error(\n                  this.translateService.instant('ui.message.can_not_load_data'),\n                );\n                return;\n              }\n\n              if (data) {\n                this.ingredients = data.ingredients;\n                this.ingredientsCount =\n                  data.ingredientsConnection.aggregate.count;\n              }\n            });\n        }\n      });\n  }\n\n  private getVariables(): GetIngredientListQueryVariables {\n    return {\n      first: this.pageSize,\n      skip: (this.pageIndex - 1) * this.pageSize,\n      where: {\n        translationsSome: {\n          nameContains: this.text?.trim() || undefined,\n        },\n      },\n      orderBy: {\n        id: OrderBy.Desc,\n      },\n    };\n  }\n\n  private patchFormValue(): void {\n    if (this.text && this.searchForm.controls.name.untouched) {\n      this.searchForm.patchValue({\n        name: this.text,\n      });\n    }\n  }\n\n  handleQueryParamsChange(params: NzTableQueryParams): void {\n    this.router.navigate([], {\n      queryParams: {\n        page: params.pageIndex,\n        size: params.pageSize,\n      },\n      relativeTo: this.route,\n      queryParamsHandling: 'merge',\n    });\n  }\n\n  handleSearch(): void {\n    const searchData = this.searchForm.value;\n    const text = searchData.name || undefined;\n\n    this.router.navigate([], {\n      queryParams: {\n        text,\n        page: 1,\n      },\n      relativeTo: this.route,\n      queryParamsHandling: 'merge',\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.unsubscribe();\n  }\n}\n","<nz-page-header\n  class=\"site-page-header\"\n  nzTitle=\"{{ 'common.ingredient' | translate }}\"\n>\n  <nz-breadcrumb nz-page-header-breadcrumb>\n    <nz-breadcrumb-item>\n      <i nz-icon nzType=\"home\"></i>\n    </nz-breadcrumb-item>\n    <nz-breadcrumb-item>\n      <a>{{ 'common.ingredient' | translate }}</a>\n    </nz-breadcrumb-item>\n  </nz-breadcrumb>\n  <nz-page-header-extra>\n    <button nz-button nzType=\"primary\" routerLink=\"/ingredients/new\">\n      <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\n      {{ 'ingredient.create' | translate }}\n    </button>\n  </nz-page-header-extra>\n</nz-page-header>\n<nz-card class=\"mb-3\">\n  <form nz-form [formGroup]=\"searchForm\" (ngSubmit)=\"handleSearch()\">\n    <div class=\"row justify-content-lg-center\">\n      <div class=\"col-12 col-lg-6\">\n        <nz-input-group nzSearch [nzAddOnAfter]=\"suffixIconButton\">\n          <input\n            formControlName=\"name\"\n            type=\"text\"\n            nz-input\n            placeholder=\"{{ 'ingredient.name' | translate }}\"\n          />\n        </nz-input-group>\n        <ng-template #suffixIconButton>\n          <button nz-button nzType=\"primary\" type=\"submit\" nzSearch>\n            <i nz-icon nzType=\"search\" nzTheme=\"outline\"></i>\n            {{ 'common.search' | translate }}\n          </button>\n        </ng-template>\n      </div>\n    </div>\n  </form>\n</nz-card>\n<nz-card class=\"mb-4\">\n  <nz-table\n    nzBordered\n    [nzData]=\"ingredients\"\n    [nzFrontPagination]=\"false\"\n    [nzTotal]=\"ingredientsCount\"\n    [nzPageIndex]=\"pageIndex\"\n    [nzPageSize]=\"pageSize\"\n    [nzLoading]=\"loading\"\n    (nzQueryParams)=\"handleQueryParamsChange($event)\"\n  >\n    <thead>\n      <tr>\n        <th>ID</th>\n        <th>{{ 'ingredient.name' | translate }}</th>\n        <th></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let ingredient of ingredients\">\n        <td>{{ ingredient.id }}</td>\n        <td>\n          <app-ingredient-compact\n            [ingredient]=\"ingredient\"\n          ></app-ingredient-compact>\n        </td>\n        <td>\n          <a [routerLink]=\"['/ingredients', ingredient.id]\">{{\n            'common.edit' | translate\n          }}</a>\n        </td>\n      </tr>\n    </tbody>\n  </nz-table>\n</nz-card>\n","import { Injectable } from '@angular/core';\nimport {\n  Router,\n  Resolve,\n  RouterStateSnapshot,\n  ActivatedRouteSnapshot,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport {\n  GetIngredientDetailsGQL,\n  IngredientDetailsFragment,\n  IngredientTranslation,\n  LanguageCode,\n} from '../../../graphql/graphql';\n\n@Injectable()\nexport class IngredientResolver\n  implements Resolve<IngredientDetailsFragment | undefined | null> {\n  constructor(\n    private router: Router,\n    private getIngredientDetailsGQL: GetIngredientDetailsGQL,\n  ) {}\n\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot,\n  ):\n    | IngredientDetailsFragment\n    | Observable<IngredientDetailsFragment | undefined>\n    | Promise<IngredientDetailsFragment | undefined>\n    | null\n    | undefined {\n    const id = parseInt(route.paramMap.get('id') || '', 10);\n    if (id) {\n      return this.getIngredientDetailsGQL\n        .fetch(\n          {\n            id,\n          },\n          {\n            fetchPolicy: 'network-only',\n          },\n        )\n        .pipe(\n          map((result) => {\n            if (result.error || result.errors) {\n              this.router.navigateByUrl('/exception/500');\n              return undefined;\n            }\n\n            if (result.data?.ingredient) {\n              return {\n                ...result.data.ingredient,\n                translations:\n                  result.data.ingredient.translations?.length === 0\n                    ? [\n                        {\n                          language: LanguageCode.Vi,\n                        } as IngredientTranslation,\n                      ]\n                    : result.data.ingredient.translations,\n              };\n            } else {\n              this.router.navigateByUrl('/exception/404');\n              return undefined;\n            }\n          }),\n        );\n    } else {\n      return {\n        translations: [\n          {\n            language: LanguageCode.Vi,\n          },\n        ],\n      } as IngredientDetailsFragment;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFireRemoteConfig } from '@angular/fire/compat/remote-config';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { Unit } from '../../../../graphql/graphql';\n\nconst IU = 'IU';\n\ninterface IUIngredient {\n  id: number;\n  sourceUnit: Unit;\n  sourceValue: number;\n  targetUnit: Unit;\n  targetValue: number;\n}\n\n@Injectable()\nexport class UnitConverterService {\n  private IUConfig?: { [key: string]: IUIngredient };\n\n  constructor(private remoteConfig: AngularFireRemoteConfig) {\n    this.remoteConfig.strings.IU_INGREDIENTS.subscribe((value) => {\n      this.IUConfig = value && JSON.parse(value);\n    });\n  }\n\n  fetchConfig(): Observable<{ [key: string]: IUIngredient } | undefined> {\n    return this.remoteConfig.strings.IU_INGREDIENTS.pipe(\n      map((value) => {\n        this.IUConfig = value && JSON.parse(value);\n        return this.IUConfig;\n      }),\n    );\n  }\n\n  convert<\n    T extends { id: number; amount?: number; amountUnit?: Unit | typeof IU },\n  >(ingredientRow: T, toSourceOrTarget: 'source' | 'target'): T {\n    if (!ingredientRow.amount && ingredientRow.amountUnit === IU) {\n      return {\n        ...ingredientRow,\n        amountUnit: null,\n      };\n    }\n\n    const config = this.IUConfig?.[`${ingredientRow.id}`];\n    if (\n      !ingredientRow.amountUnit ||\n      !ingredientRow.amount ||\n      !config ||\n      (toSourceOrTarget === 'source' &&\n        ingredientRow.amountUnit !== config.targetUnit) ||\n      (toSourceOrTarget === 'target' &&\n        ingredientRow.amountUnit !== config.sourceUnit)\n    ) {\n      return ingredientRow;\n    }\n    ingredientRow.amountUnit =\n      toSourceOrTarget === 'source' ? config.sourceUnit : config.targetUnit;\n    ingredientRow.amount =\n      toSourceOrTarget === 'source'\n        ? (ingredientRow.amount / config.targetValue) * config.sourceValue\n        : (ingredientRow.amount / config.sourceValue) * config.targetValue;\n    return ingredientRow;\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}