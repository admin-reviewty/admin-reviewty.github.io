"use strict";(self.webpackChunkadmin_angular=self.webpackChunkadmin_angular||[]).push([[955],{1398:(ot,I,p)=>{p.d(I,{Bq:()=>x,Of:()=>Q,Dg:()=>N,aF:()=>U});var r=p(7716),g=p(4762),Z=p(946),T=p(3679),z=p(8229),S=p(9765),v=p(6782),O=p(6182),q=p(8583),_=p(9238);const P=["*"],E=["inputElement"],Y=["nz-radio",""];let x=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=r.lG2({type:d,selectors:[["","nz-radio-button",""]]}),d})(),A=(()=>{class d{constructor(){this.selected$=new z.t(1),this.touched$=new S.xQ,this.disabled$=new z.t(1),this.name$=new z.t(1)}touch(){this.touched$.next()}select(a){this.selected$.next(a)}setDisabled(a){this.disabled$.next(a)}setName(a){this.name$.next(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=r.Yz7({token:d,factory:d.\u0275fac}),d})(),N=(()=>{class d{constructor(a,c,y,w){this.cdr=a,this.nzRadioService=c,this.elementRef=y,this.directionality=w,this.value=null,this.destroy$=new S.xQ,this.onChange=()=>{},this.onTouched=()=>{},this.nzDisabled=!1,this.nzButtonStyle="outline",this.nzSize="default",this.nzName=null,this.dir="ltr",this.elementRef.nativeElement.classList.add("ant-radio-group")}ngOnInit(){var a;this.nzRadioService.selected$.pipe((0,v.R)(this.destroy$)).subscribe(c=>{this.value!==c&&(this.value=c,this.onChange(this.value))}),this.nzRadioService.touched$.pipe((0,v.R)(this.destroy$)).subscribe(()=>{Promise.resolve().then(()=>this.onTouched())}),null===(a=this.directionality.change)||void 0===a||a.pipe((0,v.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(a){const{nzDisabled:c,nzName:y}=a;c&&this.nzRadioService.setDisabled(this.nzDisabled),y&&this.nzRadioService.setName(this.nzName)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(a){this.value=a,this.nzRadioService.select(a),this.cdr.markForCheck()}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.nzDisabled=a,this.nzRadioService.setDisabled(a),this.cdr.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(r.Y36(r.sBO),r.Y36(A),r.Y36(r.SBq),r.Y36(Z.Is,8))},d.\u0275cmp=r.Xpm({type:d,selectors:[["nz-radio-group"]],hostVars:8,hostBindings:function(a,c){2&a&&r.ekj("ant-radio-group-large","large"===c.nzSize)("ant-radio-group-small","small"===c.nzSize)("ant-radio-group-solid","solid"===c.nzButtonStyle)("ant-radio-group-rtl","rtl"===c.dir)},inputs:{nzDisabled:"nzDisabled",nzButtonStyle:"nzButtonStyle",nzSize:"nzSize",nzName:"nzName"},exportAs:["nzRadioGroup"],features:[r._Bn([A,{provide:T.JU,useExisting:(0,r.Gpc)(()=>d),multi:!0}]),r.TTD],ngContentSelectors:P,decls:1,vars:0,template:function(a,c){1&a&&(r.F$t(),r.Hsn(0))},encapsulation:2,changeDetection:0}),(0,g.gn)([(0,O.yF)()],d.prototype,"nzDisabled",void 0),d})(),Q=(()=>{class d{constructor(a,c,y,w,t,F){this.elementRef=a,this.cdr=c,this.focusMonitor=y,this.directionality=w,this.nzRadioService=t,this.nzRadioButtonDirective=F,this.isNgModel=!1,this.destroy$=new S.xQ,this.isChecked=!1,this.name=null,this.isRadioButton=!!this.nzRadioButtonDirective,this.onChange=()=>{},this.onTouched=()=>{},this.nzValue=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.dir="ltr"}onHostClick(a){a.stopPropagation(),a.preventDefault(),!this.nzDisabled&&!this.isChecked&&(this.nzRadioService&&this.nzRadioService.select(this.nzValue),this.isNgModel&&(this.isChecked=!0,this.onChange(!0)))}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}setDisabledState(a){this.nzDisabled=a,this.cdr.markForCheck()}writeValue(a){this.isChecked=a,this.cdr.markForCheck()}registerOnChange(a){this.isNgModel=!0,this.onChange=a}registerOnTouched(a){this.onTouched=a}ngOnInit(){var a;this.nzRadioService&&(this.nzRadioService.name$.pipe((0,v.R)(this.destroy$)).subscribe(c=>{this.name=c,this.cdr.markForCheck()}),this.nzRadioService.disabled$.pipe((0,v.R)(this.destroy$)).subscribe(c=>{this.nzDisabled=c,this.cdr.markForCheck()}),this.nzRadioService.selected$.pipe((0,v.R)(this.destroy$)).subscribe(c=>{this.isChecked=this.nzValue===c,this.cdr.markForCheck()})),this.focusMonitor.monitor(this.elementRef,!0).pipe((0,v.R)(this.destroy$)).subscribe(c=>{c||(Promise.resolve().then(()=>this.onTouched()),this.nzRadioService&&this.nzRadioService.touch())}),null===(a=this.directionality.change)||void 0===a||a.pipe((0,v.R)(this.destroy$)).subscribe(c=>{this.dir=c,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}}return d.\u0275fac=function(a){return new(a||d)(r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(_.tE),r.Y36(Z.Is,8),r.Y36(A,8),r.Y36(x,8))},d.\u0275cmp=r.Xpm({type:d,selectors:[["","nz-radio",""],["","nz-radio-button",""]],viewQuery:function(a,c){if(1&a&&r.Gf(E,5),2&a){let y;r.iGM(y=r.CRH())&&(c.inputElement=y.first)}},hostVars:16,hostBindings:function(a,c){1&a&&r.NdJ("click",function(w){return c.onHostClick(w)}),2&a&&r.ekj("ant-radio-wrapper",!c.isRadioButton)("ant-radio-button-wrapper",c.isRadioButton)("ant-radio-wrapper-checked",c.isChecked&&!c.isRadioButton)("ant-radio-button-wrapper-checked",c.isChecked&&c.isRadioButton)("ant-radio-wrapper-disabled",c.nzDisabled&&!c.isRadioButton)("ant-radio-button-wrapper-disabled",c.nzDisabled&&c.isRadioButton)("ant-radio-wrapper-rtl",!c.isRadioButton&&"rtl"===c.dir)("ant-radio-button-wrapper-rtl",c.isRadioButton&&"rtl"===c.dir)},inputs:{nzValue:"nzValue",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus"},exportAs:["nzRadio"],features:[r._Bn([{provide:T.JU,useExisting:(0,r.Gpc)(()=>d),multi:!0}])],attrs:Y,ngContentSelectors:P,decls:6,vars:24,consts:[["type","radio",3,"disabled","checked"],["inputElement",""]],template:function(a,c){1&a&&(r.F$t(),r.TgZ(0,"span"),r._UZ(1,"input",0,1),r._UZ(3,"span"),r.qZA(),r.TgZ(4,"span"),r.Hsn(5),r.qZA()),2&a&&(r.ekj("ant-radio",!c.isRadioButton)("ant-radio-checked",c.isChecked&&!c.isRadioButton)("ant-radio-disabled",c.nzDisabled&&!c.isRadioButton)("ant-radio-button",c.isRadioButton)("ant-radio-button-checked",c.isChecked&&c.isRadioButton)("ant-radio-button-disabled",c.nzDisabled&&c.isRadioButton),r.xp6(1),r.ekj("ant-radio-input",!c.isRadioButton)("ant-radio-button-input",c.isRadioButton),r.Q6J("disabled",c.nzDisabled)("checked",c.isChecked),r.uIk("autofocus",c.nzAutoFocus?"autofocus":null)("name",c.name),r.xp6(2),r.ekj("ant-radio-inner",!c.isRadioButton)("ant-radio-button-inner",c.isRadioButton))},encapsulation:2,changeDetection:0}),(0,g.gn)([(0,O.yF)()],d.prototype,"nzDisabled",void 0),(0,g.gn)([(0,O.yF)()],d.prototype,"nzAutoFocus",void 0),d})(),U=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=r.oAB({type:d}),d.\u0275inj=r.cJS({imports:[[Z.vT,q.ez,T.u5]]}),d})()},8955:(ot,I,p)=>{p.r(I),p.d(I,{FeedModule:()=>Ce});var r=p(8583),g=p(3679),Z=p(6271),T=p(5392),z=p(9790),S=p(7018),v=p(7674),O=p(4453),q=p(269),_=p(3197),P=p(6704),E=p(3791),Y=p(6442),x=p(8058),A=p(464),N=p(3845),Q=p(2677),U=p(5428),d=p(7966),f=p(3385),a=p(1398),c=p(5329),y=p(6372),w=p(946),t=p(7716),F=p(8178),j=p(7636),L=p(9765),C=p(6782);function it(n,i){1&n&&t.Hsn(0)}const st=["*"];function rt(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.nzAuthor)}}function at(n,i){if(1&n&&(t.TgZ(0,"span",8),t.YNc(1,rt,2,1,"ng-container",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzAuthor)}}function ct(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.nzDatetime)}}function pt(n,i){if(1&n&&(t.TgZ(0,"span",10),t.YNc(1,ct,2,1,"ng-container",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzDatetime)}}function lt(n,i){}function dt(n,i){if(1&n&&(t.TgZ(0,"li"),t.TgZ(1,"span"),t.YNc(2,lt,0,0,"ng-template",13),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.Q6J("nzCommentActionHost",e.content)}}function ut(n,i){if(1&n&&(t.TgZ(0,"ul",11),t.YNc(1,dt,3,1,"li",12),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.actions)}}const gt=[[["nz-avatar","nz-comment-avatar",""]],[["nz-comment-content"]],"*"],mt=["nz-avatar[nz-comment-avatar]","nz-comment-content","*"];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["nz-avatar","nz-comment-avatar",""]],exportAs:["nzCommentAvatar"]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["nz-comment-content"],["","nz-comment-content",""]],hostAttrs:[1,"ant-comment-content-detail"],exportAs:["nzCommentContent"]}),n})(),H=(()=>{class n extends j.Pl{constructor(e,o){super(e,o)}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.attach(this.nzCommentActionHost)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t._Vd),t.Y36(t.s_b))},n.\u0275dir=t.lG2({type:n,selectors:[["","nzCommentActionHost",""]],inputs:{nzCommentActionHost:"nzCommentActionHost"},exportAs:["nzCommentActionHost"],features:[t.qOj]}),n})(),G=(()=>{class n{constructor(e){this.viewContainerRef=e,this.contentPortal=null}get content(){return this.contentPortal}ngOnInit(){this.contentPortal=new j.UE(this.implicitContent,this.viewContainerRef)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.s_b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-comment-action"]],viewQuery:function(e,o){if(1&e&&t.Gf(t.Rgc,7),2&e){let s;t.iGM(s=t.CRH())&&(o.implicitContent=s.first)}},exportAs:["nzCommentAction"],ngContentSelectors:st,decls:1,vars:0,template:function(e,o){1&e&&(t.F$t(),t.YNc(0,it,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),n})(),ht=(()=>{class n{constructor(e,o){this.cdr=e,this.directionality=o,this.dir="ltr",this.destroy$=new L.xQ}ngOnInit(){var e;null===(e=this.directionality.change)||void 0===e||e.pipe((0,C.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(w.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-comment"]],contentQueries:function(e,o,s){if(1&e&&t.Suo(s,G,4),2&e){let l;t.iGM(l=t.CRH())&&(o.actions=l)}},hostVars:4,hostBindings:function(e,o){2&e&&t.ekj("ant-comment",!0)("ant-comment-rtl","rtl"===o.dir)},inputs:{nzAuthor:"nzAuthor",nzDatetime:"nzDatetime"},exportAs:["nzComment"],ngContentSelectors:mt,decls:11,vars:3,consts:[[1,"ant-comment-inner"],[1,"ant-comment-avatar"],[1,"ant-comment-content"],[1,"ant-comment-content-author"],["class","ant-comment-content-author-name",4,"ngIf"],["class","ant-comment-content-author-time",4,"ngIf"],["class","ant-comment-actions",4,"ngIf"],[1,"ant-comment-nested"],[1,"ant-comment-content-author-name"],[4,"nzStringTemplateOutlet"],[1,"ant-comment-content-author-time"],[1,"ant-comment-actions"],[4,"ngFor","ngForOf"],[3,"nzCommentActionHost"]],template:function(e,o){1&e&&(t.F$t(gt),t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.YNc(5,at,2,1,"span",4),t.YNc(6,pt,2,1,"span",5),t.qZA(),t.Hsn(7,1),t.YNc(8,ut,2,1,"ul",6),t.qZA(),t.qZA(),t.TgZ(9,"div",7),t.Hsn(10,2),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngIf",o.nzAuthor),t.xp6(1),t.Q6J("ngIf",o.nzDatetime),t.xp6(2),t.Q6J("ngIf",null==o.actions?null:o.actions.length))},directives:[r.O5,F.f,r.sg,H],encapsulation:2,changeDetection:0}),n})(),_t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[w.vT,r.ez,F.T]]}),n})();var b=p(5987),u=p(7071),J=p(4514),zt=p(8003),X=p(9374),ft=p(8873),V=p.n(ft),K=p(5350);const Ct=function(n){return{width:n}};function vt(n,i){if(1&n&&(t.TgZ(0,"div",2),t._UZ(1,"img",3),t.TgZ(2,"div",4),t._UZ(3,"img",5),t.qZA(),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngStyle",t.VKq(1,Ct,o.rate-e>=1?"100%":100*(o.rate-e)+"%"))}}const Zt=function(){return[0,1,2,3,4]};let Tt=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-rate"]],inputs:{rate:"rate"},decls:2,vars:2,consts:[[1,"rate","d-flex","align-items-center"],["class","star",4,"ngFor","ngForOf"],[1,"star"],["src","assets/icons/star_empty.svg","alt","empty star","loading","lazy",1,"star__img"],[1,"star__full",3,"ngStyle"],["src","assets/icons/star_full.svg","alt","full star","loading","lazy",1,"star__img","star__img--full"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,vt,4,3,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Zt)))},directives:[r.sg,r.PC],styles:[".star[_ngcontent-%COMP%]{position:relative;width:14px;height:14px}.star[_ngcontent-%COMP%] + .star[_ngcontent-%COMP%]{margin-left:3px}.star__img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.star__img--full[_ngcontent-%COMP%]{width:14px;height:14px}.star__full[_ngcontent-%COMP%]{position:absolute;overflow:hidden;height:14px}"]}),n})();const At=function(){return[]};let W=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-card"]],inputs:{product:"product"},decls:20,vars:15,consts:[[1,"product__card","border","rounded","d-flex","align-items-center"],[1,"product__thumbnail","flex-shrink-0"],["loading","lazy",1,"w-100","h-100",3,"src","appImgFallback"],[1,"d-flex","flex-column","justify-content-start"],["nz-typography",""],[1,"d-flex","align-items-center"],[3,"rate"],["nz-typography","","nzType","secondary"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"span",4),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"app-rate",6),t._uU(9,"\xa0 "),t.TgZ(10,"span",4),t._uU(11),t.ALo(12,"number"),t.qZA(),t._uU(13,"\xa0 "),t.TgZ(14,"span",7),t._uU(15),t.qZA(),t._uU(16,"\xa0|\xa0 "),t.TgZ(17,"span",4),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("src",null==o.product.thumbnail||null==o.product.thumbnail.small?null:o.product.thumbnail.small.url,t.LSH)("appImgFallback",(null==o.product.thumbnail?null:o.product.thumbnail.url)||t.DdM(14,At)),t.xp6(4),t.Oqu(null==o.product.translations[0]?null:o.product.translations[0].name),t.xp6(2),t.Q6J("rate",o.product.reviewsConnection.aggregate.avg.rate),t.xp6(3),t.Oqu(t.xi3(12,8,o.product.reviewsConnection.aggregate.avg.rate,"1.0-2")),t.xp6(4),t.hij("(",o.product.reviewsConnection.aggregate.count,")"),t.xp6(3),t.AsE("",o.product.measure,", ",t.xi3(19,11,o.product.price,"VND"),""))},directives:[K.Z,Q.ZU,Tt],pipes:[r.JJ,r.H9],styles:[".product__card[_ngcontent-%COMP%]{padding:5px;grid-gap:5px;gap:5px}.product__thumbnail[_ngcontent-%COMP%]{position:relative;width:64px;height:64px;cursor:pointer}.product__thumbnail[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0}"]}),n})();var tt=p(5914);function yt(n,i){1&n&&t._UZ(0,"i",15)}function Pt(n,i){1&n&&t._UZ(0,"i",16)}function xt(n,i){1&n&&(t.TgZ(0,"nz-tag",17),t._UZ(1,"i",18),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"review.status.created")))}function bt(n,i){1&n&&(t.TgZ(0,"nz-tag",19),t._UZ(1,"i",20),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"review.status.approved")))}function St(n,i){1&n&&(t.TgZ(0,"nz-tag",21),t._UZ(1,"i",22),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"review.status.hidden")))}function Ot(n,i){if(1&n&&(t.TgZ(0,"p",23),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.Q6J("nzEllipsisRows",3),t.xp6(1),t.hij(" ",e.post.content,"\n")}}const Mt=function(n,i){return[n,i]};function Dt(n,i){if(1&n&&(t.TgZ(0,"a",26),t._UZ(1,"img",27),t.qZA()),2&n){const e=i.$implicit;t.Q6J("href",e.large.url,t.LSH),t.xp6(1),t.Q6J("src",e.small.url,t.LSH)("appImgFallback",t.WLB(3,Mt,e.large.url,e.url))}}function Rt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",24),t.YNc(2,Dt,2,6,"a",25),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.MGl("id","post_gallery_",e.post.id,""),t.xp6(1),t.Q6J("ngForOf",e.post.images)}}function wt(n,i){if(1&n&&(t.TgZ(0,"div",29),t._UZ(1,"app-product-card",30),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("product",e)}}function qt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,wt,2,1,"div",28),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.post.products)}}const Lt=function(n){return[n,"assets/images/avatar-empty.png"]},et=function(){return[]};let Nt=(()=>{class n{constructor(e,o,s,l){this.approvePostGQL=e,this.rejectPostGQL=o,this.msgService=s,this.translateService=l,this.PostStatus=u.$4T,this.Gender=u.Y0t,this.destroy$=new L.xQ,this.now=V()(),this.rejecting=!1,this.approving=!1}ngOnInit(){this.status=this.post.status}ngAfterViewInit(){var e;(null===(e=this.post.images)||void 0===e?void 0:e.length)&&$(`#post_gallery_${this.post.id}`).justifiedGallery().on("jg.complete",()=>{lightGallery(document.getElementById(`post_gallery_${this.post.id}`),{thumbnail:!0})})}approve(){this.approving=!0,this.approvePostGQL.mutate({id:this.post.id}).pipe((0,C.R)(this.destroy$)).subscribe(({data:e,errors:o})=>{this.approving=!1,o?this.msgService.error(this.translateService.instant("review.approve_error")):e&&(this.status=u.$4T.Approved,this.msgService.success(this.translateService.instant("review.approve_success")))},()=>{this.approving=!1})}reject(){this.rejecting=!0,this.rejectPostGQL.mutate({id:this.post.id}).pipe((0,C.R)(this.destroy$)).subscribe(({data:e,errors:o})=>{this.rejecting=!1,o?this.msgService.error(this.translateService.instant("review.hide_error")):e&&(this.status=u.$4T.Hidden,this.msgService.success(this.translateService.instant("review.hide_success")))},()=>{this.rejecting=!1})}ngOnDestroy(){var e,o,s;this.destroy$.next(),this.destroy$.unsubscribe(),(null===(e=this.post.images)||void 0===e?void 0:e.length)&&($(`#post_gallery_${this.post.id}`).justifiedGallery("destroy"),null===(s=window.lgData[(null===(o=document.getElementById(`post_gallery_${this.post.id}`))||void 0===o?void 0:o.getAttribute("lg-uid"))||""])||void 0===s||s.destroy(!0))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.att),t.Y36(u.aX2),t.Y36(x.dD),t.Y36(z.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post-card"]],inputs:{post:"post"},decls:28,vars:32,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"d-flex","align-items-center"],[1,"user__avatar","mr-2"],["loading","lazy",1,"rounded-circle","w-100","h-100",3,"src","appImgFallback"],[1,"d-flex","flex-column"],["nz-typography",""],["nz-typography","","nzType","secondary"],["nz-icon","","nzType","man","nzTheme","outline",4,"ngIf","ngIfElse"],["femaleTemplate",""],[3,"ngSwitch"],["nzColor","warning",4,"ngSwitchCase"],["nzColor","success",4,"ngSwitchCase"],["nzColor","error",4,"ngSwitchCase"],["class","post__content mb-3","nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows",4,"ngIf"],[4,"ngIf"],["nz-icon","","nzType","man","nzTheme","outline"],["nz-icon","","nzType","woman","nzTheme","outline"],["nzColor","warning"],["nz-icon","","nzType","exclamation","nzTheme","outline"],["nzColor","success"],["nz-icon","","nzType","check","nzTheme","outline"],["nzColor","error"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-typography","","nzEllipsis","","nzExpandable","",1,"post__content","mb-3",3,"nzEllipsisRows"],[1,"mb-3",3,"id"],[3,"href",4,"ngFor","ngForOf"],[3,"href"],["loading","lazy",3,"src","appImgFallback"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[3,"product"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"span",5),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"span",6),t._uU(9),t.ALo(10,"translate"),t.ALo(11,"translate"),t.YNc(12,yt,1,0,"i",7),t.YNc(13,Pt,1,0,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"dateFromNow"),t.ALo(18,"lowercase"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div"),t.ynx(21,9),t.YNc(22,xt,5,3,"nz-tag",10),t.YNc(23,bt,5,3,"nz-tag",11),t.YNc(24,St,5,3,"nz-tag",12),t.BQk(),t.qZA(),t.qZA(),t.YNc(25,Ot,2,2,"p",13),t.YNc(26,Rt,3,2,"ng-container",14),t.YNc(27,qt,2,1,"ng-container",14)),2&e){const s=t.MAs(14);t.xp6(3),t.Q6J("src",null==o.post.author.avatar||null==o.post.author.avatar.small?null:o.post.author.avatar.small.url,t.LSH)("appImgFallback",t.VKq(28,Lt,(null==o.post.author.avatar?null:o.post.author.avatar.url)||"")),t.xp6(4),t.Oqu(o.post.author.account),t.xp6(2),t.lnq("",o.now.year()-(o.post.author.birthYear||0)," ",t.lcZ(10,18,"common.age")," | ",t.lcZ(11,20,"user.skin_type."+o.post.author.skinType)," "),t.xp6(3),t.Q6J("ngIf",o.post.author.gender===o.Gender.Male)("ngIfElse",s),t.xp6(4),t.lnq(" ",t.lcZ(17,22,o.post.createdAt)," ",t.lcZ(18,24,t.lcZ(19,26,"common.at"))," ",null==((null==o.post.category?null:o.post.category.translations)||t.DdM(30,et))[0]?null:((null==o.post.category?null:o.post.category.translations)||t.DdM(31,et))[0].name," "),t.xp6(5),t.Q6J("ngSwitch",o.status),t.xp6(1),t.Q6J("ngSwitchCase",o.PostStatus.Created),t.xp6(1),t.Q6J("ngSwitchCase",o.PostStatus.Approved),t.xp6(1),t.Q6J("ngSwitchCase",o.PostStatus.Hidden),t.xp6(1),t.Q6J("ngIf",o.post.content),t.xp6(1),t.Q6J("ngIf",!!o.post.images.length),t.xp6(1),t.Q6J("ngIf",o.post.products.length)}},directives:[K.Z,Q.ZU,r.O5,r.RF,r.n9,J.w,A.Ls,N.j,r.sg,W],pipes:[z.X$,tt.I,r.i8],styles:[".user__avatar[_ngcontent-%COMP%]{position:relative;width:64px;height:64px;cursor:pointer}.user__avatar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.post__content[_ngcontent-%COMP%]{white-space:pre-line}"]}),n})();function Qt(n,i){1&n&&(t.TgZ(0,"button",16),t._UZ(1,"i",17),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"common.search")," "))}function Ut(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"nz-list-item"),t._UZ(1,"app-post-card",18,19),t.TgZ(3,"ul",20),t.TgZ(4,"nz-list-item-action"),t.TgZ(5,"button",21),t.NdJ("click",function(){return t.CHM(e),t.MAs(2).approve()}),t._UZ(6,"i",22),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.TgZ(9,"nz-list-item-action"),t.TgZ(10,"button",21),t.NdJ("click",function(){return t.CHM(e),t.MAs(2).reject()}),t._UZ(11,"i",23),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(14,"nz-list-item-extra"),t.qZA()}if(2&n){const e=i.$implicit,o=t.MAs(2),s=t.oxw();t.xp6(1),t.Q6J("post",e),t.xp6(4),t.Q6J("nzLoading",o.approving)("disabled",o.status===s.PostStatus.Approved),t.xp6(1),t.Q6J("nzTheme","twotone"),t.xp6(1),t.hij(" ",t.lcZ(8,8,"review.approve")," "),t.xp6(3),t.Q6J("nzLoading",o.rejecting)("disabled",o.status===s.PostStatus.Hidden),t.xp6(2),t.hij(" ",t.lcZ(13,10,"review.hide")," ")}}function Jt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"nz-pagination",24),t.NdJ("nzPageIndexChange",function(s){return t.CHM(e),t.oxw().paginate(s)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("nzPageIndex",e.pageIndex)("nzTotal",e.postsCount)("nzPageSize",e.pageSize)}}const It=function(){return[16,8]};var M=(()=>{return(n=M||(M={})).UPDATED_AT_ASC="UPDATED_AT_ASC",n.UPDATED_AT_DESC="UPDATED_AT_DESC",M;var n})();let Ft=(()=>{class n{constructor(e,o,s,l,m,h,R){this.route=e,this.router=o,this.fb=s,this.getPostListGQL=l,this.searchUsersGQL=m,this.msgService=h,this.translateService=R,this.PostStatus=u.$4T,this.Sort=M,this.destroy$=new L.xQ,this.posts=[],this.postsCount=0,this.pageIndex=1,this.pageSize=10,this.loading=!1,this.isDeleted=!1,this.sort=M.UPDATED_AT_DESC,this.period=[null,null],this.searchForm=this.fb.group({text:[null],status:["ALL"],isDeleted:[!1],sort:[M.UPDATED_AT_DESC],user:[void 0],period:[null,null]})}ngOnInit(){this.route.queryParamMap.pipe((0,C.R)(this.destroy$)).subscribe(e=>{this.pageIndex=parseInt(e.get("page")||"1",10),this.pageSize=parseInt(e.get("size")||"10",10),this.text=e.get("text")||"",this.userId=parseInt(e.get("user")||"0",10)||void 0,this.status=Object.values(u.$4T).includes(e.get("status"))?e.get("status"):void 0,this.sort=Object.values(M).includes(e.get("sort"))?e.get("sort"):M.UPDATED_AT_DESC,this.isDeleted="true"===e.get("deleted")||"false"!==e.get("deleted")&&void 0,this.period=[!isNaN(parseInt(e.get("started_at")||""))&&new Date(parseInt(e.get("started_at")))||null,!isNaN(parseInt(e.get("ended_at")||""))&&new Date(parseInt(e.get("ended_at")))||null],this.patchFormValue(),this.dataSubscription?this.refetch():(this.dataQueryRef=this.getPostListGQL.watch(this.getVariables(),{notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),this.dataSubscription=this.dataQueryRef.valueChanges.pipe((0,C.R)(this.destroy$)).subscribe(({data:o,loading:s,error:l,errors:m})=>{if(this.loading=s,!s){if(l||m)return void this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"));o&&(this.posts=o.posts,this.postsCount=o.postsConnection.aggregate.count)}},()=>{this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"))}))})}patchFormValue(){var e;this.searchForm.controls.isDeleted.untouched&&this.searchForm.patchValue({isDeleted:"boolean"==typeof this.isDeleted?this.isDeleted:"ALL"}),this.searchForm.controls.status.untouched&&this.searchForm.patchValue({status:this.status||"ALL"}),(null===(e=this.text)||void 0===e?void 0:e.trim())&&this.searchForm.controls.product.untouched&&this.searchForm.patchValue({text:this.text}),M[this.sort]&&this.searchForm.patchValue({sort:this.sort||void 0}),this.userId&&this.searchForm.controls.user.untouched&&this.searchForm.controls.user.pristine&&this.searchUsersGQL.fetch({where:{id:this.userId},first:1}).pipe((0,C.R)(this.destroy$)).subscribe(({data:o})=>{o&&this.searchForm.patchValue({user:o.users[0]})}),this.period[0]&&this.period[1]&&this.searchForm.controls.period.untouched&&this.searchForm.patchValue({period:this.period})}refetch(){var e;null===(e=this.dataQueryRef)||void 0===e||e.refetch(this.getVariables())}getVariables(){var e,o,s;return{where:{contentContains:(null===(e=this.text)||void 0===e?void 0:e.trim())||void 0,status:this.status||void 0,author:{id:this.userId||void 0},createdAtGte:(null===(o=this.period)||void 0===o?void 0:o[0])||void 0,createdAtLte:(null===(s=this.period)||void 0===s?void 0:s[1])||void 0},first:this.pageSize,skip:(this.pageIndex-1)*this.pageSize,orderBy:[{commentedAt:u.d$J.Desc},{id:u.d$J.Desc}]}}paginate(e){this.router.navigate([],{queryParams:{page:e},relativeTo:this.route,queryParamsHandling:"merge"})}handleSearch(){var e,o,s,l,m;const h=this.searchForm.value,R=h.text||void 0,ve=h.sort||void 0,Ze="boolean"==typeof h.isDeleted?h.isDeleted:void 0,Te=Object.values(u.$4T).includes(h.status)?h.status:void 0,Ae=null===(e=h.user)||void 0===e?void 0:e.id,ye=(null===(s=null===(o=h.period)||void 0===o?void 0:o[0])||void 0===s?void 0:s.getTime())||void 0,Pe=(null===(m=null===(l=h.period)||void 0===l?void 0:l[1])||void 0===m?void 0:m.getTime())||void 0;this.router.navigate([],{queryParams:{text:R,sort:ve,deleted:Ze,status:Te,user:Ae,page:1,started_at:ye,ended_at:Pe},relativeTo:this.route,queryParamsHandling:"merge"})}trackById(e,o){return o.id}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.gz),t.Y36(b.F0),t.Y36(g.qu),t.Y36(u.bbe),t.Y36(u.QoM),t.Y36(x.dD),t.Y36(z.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post-list"]],decls:24,vars:27,consts:[[1,"site-page-header",3,"nzTitle"],["nz-page-header-breadcrumb",""],["nz-icon","","nzType","home"],["routerLink","/posts"],[1,"mb-3"],["nz-form","",3,"formGroup","ngSubmit"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"],["formControlName","user"],["nzSearch","",3,"nzAddOnAfter"],["formControlName","period",3,"nzShowTime"],["searchButton",""],[1,"mb-4"],["nzGrid","","nzItemLayout","vertical",3,"nzLoading","nzPagination"],[4,"ngFor","ngForOf","ngForTrackBy"],["paginationTemplate",""],["nz-button","","nzType","primary","nzSearch",""],["nz-icon","","nzType","search","nzTheme","outline"],[3,"post"],["postCard",""],["nz-list-item-actions",""],["nz-button","","nzType","text","nzBlock","",1,"btn__action",3,"nzLoading","disabled","click"],["nz-icon","","nzType","like","nzTheme","outline",3,"nzTheme"],["nz-icon","","nzType","eye-invisible","nzTheme","twotone","nzTwotoneColor","#eb2f96"],[1,"pb-4",3,"nzPageIndex","nzTotal","nzPageSize","nzPageIndexChange"]],template:function(e,o){if(1&e&&(t.TgZ(0,"nz-page-header",0),t.ALo(1,"translate"),t.TgZ(2,"nz-breadcrumb",1),t.TgZ(3,"nz-breadcrumb-item"),t._UZ(4,"i",2),t.qZA(),t.TgZ(5,"nz-breadcrumb-item"),t.TgZ(6,"a",3),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-card",4),t.TgZ(10,"form",5),t.NdJ("ngSubmit",function(){return o.handleSearch()}),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t._UZ(13,"app-user-select",8),t.qZA(),t.TgZ(14,"div",7),t.TgZ(15,"nz-input-group",9),t._UZ(16,"nz-range-picker",10),t.qZA(),t.YNc(17,Qt,4,3,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"nz-card",12),t.TgZ(20,"nz-list",13),t.YNc(21,Ut,15,12,"nz-list-item",14),t.qZA(),t.YNc(22,Jt,1,3,"ng-template",null,15,t.W1O),t.qZA()),2&e){const s=t.MAs(18),l=t.MAs(23);t.s9C("nzTitle",t.lcZ(1,22,"common.post")),t.xp6(7),t.Oqu(t.lcZ(8,24,"common.post")),t.xp6(3),t.Q6J("formGroup",o.searchForm),t.xp6(1),t.Q6J("nzGutter",t.DdM(26,It)),t.xp6(1),t.Q6J("nzXs",24)("nzSm",24)("nzMd",24)("nzLg",12)("nzXl",12)("nzXXl",12),t.xp6(2),t.Q6J("nzXs",24)("nzSm",24)("nzMd",24)("nzLg",12)("nzXl",12)("nzXXl",12),t.xp6(1),t.Q6J("nzAddOnAfter",s),t.xp6(1),t.Q6J("nzShowTime",!0),t.xp6(4),t.Q6J("nzLoading",o.loading)("nzPagination",l),t.xp6(1),t.Q6J("ngForOf",o.posts)("ngForTrackBy",o.trackById)}},directives:[Z.$O,T.Dg,Z.A2,T.MO,J.w,A.Ls,b.yS,S.bd,g._Y,g.JL,g.sg,P.SK,P.t3,zt.q,g.JJ,g.u,v.gB,d.uw,d.wS,_.n_,_.fl,r.sg,O.ix,X.dQ,_.AA,Nt,_.nk,_.KC,_.yw,U.dE],pipes:[z.X$],styles:[".btn__action[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),n})();var Et=p(2340);let $t=(()=>{class n{transform(e,...o){return isNaN(e)||null===e?0:new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"shortNumber",type:n,pure:!0}),n})();function Yt(n,i){1&n&&(t.TgZ(0,"nz-tag",33),t._UZ(1,"i",34),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"review.status.created")))}function Vt(n,i){1&n&&(t.TgZ(0,"nz-tag",35),t._UZ(1,"i",36),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"review.status.approved")))}function jt(n,i){1&n&&(t.TgZ(0,"nz-tag",37),t._UZ(1,"i",38),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"review.status.hidden")))}function kt(n,i){if(1&n&&(t.TgZ(0,"p",39),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.Q6J("nzEllipsisRows",3),t.xp6(1),t.hij(" ",e.post.content," ")}}function Bt(n,i){if(1&n&&(t.TgZ(0,"div",41),t._UZ(1,"app-product-card",42),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("product",e)}}function Ht(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Bt,2,1,"div",40),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.post.products)}}let Gt=(()=>{class n{constructor(e,o,s,l){this.msgService=e,this.translateService=o,this.rejectPostGQL=s,this.approvePostGQL=l,this.PostStatus=u.$4T,this.destroy$=new L.xQ,this.approving=!1,this.rejecting=!1}ngOnInit(){this.status=this.post.status}approve(){this.approving=!0,this.approvePostGQL.mutate({id:this.post.id}).pipe((0,C.R)(this.destroy$)).subscribe(({data:e,errors:o})=>{o?this.msgService.error(this.translateService.instant("post.approve_video_error")):e&&(this.status=u.$4T.Approved,this.msgService.success(this.translateService.instant("post.approve_video_success")))},()=>{this.approving=!1})}reject(){this.rejectPostGQL.mutate({id:this.post.id}).pipe((0,C.R)(this.destroy$)).subscribe(({data:e,errors:o})=>{o?this.msgService.error(this.translateService.instant("post.reject_video_error")):e&&(this.status=u.$4T.Hidden,this.msgService.success(this.translateService.instant("post.reject_video_success")))},()=>{this.rejecting=!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.dD),t.Y36(z.sK),t.Y36(u.aX2),t.Y36(u.att))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-video-card"]],inputs:{post:"post"},decls:48,vars:25,consts:[[1,"video-feed-item"],[1,"feed-item-status"],[3,"ngSwitch"],["nzColor","warning","class","item-status-tag",4,"ngSwitchCase"],["nzColor","success","class","item-status-tag",4,"ngSwitchCase"],["nzColor","error","class","item-status-tag",4,"ngSwitchCase"],["href","",1,"feed-item-avatar","user-avatar"],["nzIcon","user",3,"nzSize","nzSrc"],[1,"feed-item-content"],[1,"author-info-content"],["href",""],[1,"author-nickname"],[1,"author-uniqueId"],[1,"item-content-body"],[1,"item-video-container"],[1,"item-video-wrapper"],[1,"image-card"],[1,"video-card"],["controls","","width","100%",3,"poster"],["type","video/x-m4v",3,"src"],[1,"item-action-bar","pc-action-bar"],[1,"bar-item-wrapper"],[1,"bar-item-img","engagement-icon"],["nz-icon","","nzType","heart","nzTheme","outline"],[1,"bar-item-text","engagement-text"],["nz-icon","","nzType","comment","nzTheme","outline"],[1,"item-post-content"],["class","post__content mb-3","nz-typography","","nzEllipsis","","nzExpandable","",3,"nzEllipsisRows",4,"ngIf"],[4,"ngIf"],[1,"list-item-actions"],["nz-button","","nzType","text","nzBlock","",1,"btn__action",3,"click"],["nz-icon","","nzType","like","nzTheme","outline",3,"nzTheme"],["nz-icon","","nzType","eye-invisible","nzTheme","twotone","nzTwotoneColor","#eb2f96"],["nzColor","warning",1,"item-status-tag"],["nz-icon","","nzType","exclamation","nzTheme","outline"],["nzColor","success",1,"item-status-tag"],["nz-icon","","nzType","check","nzTheme","outline"],["nzColor","error",1,"item-status-tag"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-typography","","nzEllipsis","","nzExpandable","",1,"post__content","mb-3",3,"nzEllipsisRows"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[3,"product"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.ynx(2,2),t.YNc(3,Yt,5,3,"nz-tag",3),t.YNc(4,Vt,5,3,"nz-tag",4),t.YNc(5,jt,5,3,"nz-tag",5),t.BQk(),t.qZA(),t.TgZ(6,"a",6),t._UZ(7,"nz-avatar",7),t.qZA(),t.TgZ(8,"div",8),t.TgZ(9,"div",9),t.TgZ(10,"a",10),t.TgZ(11,"h3",11),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"a",10),t.TgZ(14,"h4",12),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",13),t.TgZ(17,"div",14),t.TgZ(18,"div",15),t.TgZ(19,"div",16),t.TgZ(20,"div",17),t.TgZ(21,"video",18),t._UZ(22,"source",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",20),t.TgZ(24,"div",21),t.TgZ(25,"div",22),t._UZ(26,"i",23),t.qZA(),t.TgZ(27,"strong",24),t._uU(28),t.ALo(29,"shortNumber"),t.qZA(),t.qZA(),t.TgZ(30,"div",21),t.TgZ(31,"div",22),t._UZ(32,"i",25),t.qZA(),t.TgZ(33,"strong",24),t._uU(34),t.ALo(35,"shortNumber"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",26),t.YNc(37,kt,2,2,"p",27),t.YNc(38,Ht,2,1,"ng-container",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",29),t.TgZ(40,"button",30),t.NdJ("click",function(){return o.approve()}),t._UZ(41,"i",31),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"button",30),t.NdJ("click",function(){return o.reject()}),t._UZ(45,"i",32),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngSwitch",o.status),t.xp6(1),t.Q6J("ngSwitchCase",o.PostStatus.Created),t.xp6(1),t.Q6J("ngSwitchCase",o.PostStatus.Approved),t.xp6(1),t.Q6J("ngSwitchCase",o.PostStatus.Hidden),t.xp6(2),t.Q6J("nzSize",56)("nzSrc",(null==o.post.author.avatar||null==o.post.author.avatar.fixed?null:o.post.author.avatar.fixed.url)||(null==o.post.author.avatar?null:o.post.author.avatar.url)||"assets/images/avatar-empty.png"),t.xp6(5),t.Oqu(o.post.author.account),t.xp6(3),t.Oqu("@"+o.post.author.id),t.xp6(6),t.Q6J("poster",(null==o.post.video||null==o.post.video.thumbnail?null:o.post.video.thumbnail.url)||"assets/images/video-thumbnail.png",t.LSH),t.xp6(1),t.Q6J("src",null==o.post.video||null==o.post.video.details?null:o.post.video.details.url,t.LSH),t.xp6(6),t.hij(" ",t.lcZ(29,17,o.post.reactionsConnection.aggregate.sum.value)," "),t.xp6(6),t.hij(" ",t.lcZ(35,19,o.post.commentsConnection.aggregate.count)," "),t.xp6(3),t.Q6J("ngIf",o.post.content),t.xp6(1),t.Q6J("ngIf",o.post.products.length),t.xp6(3),t.Q6J("nzTheme","twotone"),t.xp6(1),t.hij(" ",t.lcZ(43,21,"review.approve")," "),t.xp6(4),t.hij(" ",t.lcZ(47,23,"review.hide")," "))},directives:[r.RF,r.n9,c.Dz,J.w,A.Ls,r.O5,O.ix,N.j,Q.ZU,r.sg,W],pipes:[$t,z.X$],styles:[".video-feed-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:flex-start}.video-feed-item[_ngcontent-%COMP%]   .feed-item-status[_ngcontent-%COMP%]{position:absolute;top:8px;right:0px}.video-feed-item[_ngcontent-%COMP%]   .feed-item-status[_ngcontent-%COMP%]   .item-status-tag[_ngcontent-%COMP%]{line-height:28px}.video-feed-item[_ngcontent-%COMP%]   .feed-item-avatar[_ngcontent-%COMP%]{position:relative;cursor:pointer}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]{flex:1;margin-left:16px}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .author-info-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .author-info-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .author-info-content[_ngcontent-%COMP%]   .author-nickname[_ngcontent-%COMP%]{margin-right:4px;font-weight:700px;font-size:18px;line-height:24px;margin-bottom:0}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .author-info-content[_ngcontent-%COMP%]   .author-uniqueId[_ngcontent-%COMP%]{line-height:28px;font-weight:400;font-size:14px;margin-bottom:0;text-decoration:none}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]{display:flex;margin-top:28px}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-video-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-video-container[_ngcontent-%COMP%]   .item-video-wrapper[_ngcontent-%COMP%]{width:calc(.56 * (450px + ((100vw - 768px) / 1152) * 100));height:calc(450px + ((100vw - 768px) / 1152) * 100);position:relative}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-video-container[_ngcontent-%COMP%]   .item-video-wrapper[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;background-repeat:no-repeat;background-position:center center;background-size:cover;background-color:#1618230f;cursor:pointer;overflow:hidden}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-video-container[_ngcontent-%COMP%]   .item-video-wrapper[_ngcontent-%COMP%]   .video-card[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;height:100%}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-video-container[_ngcontent-%COMP%]   .item-video-wrapper[_ngcontent-%COMP%]   .video-card[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-video-container[_ngcontent-%COMP%]   .item-action-bar[_ngcontent-%COMP%]{position:absolute;right:-64px;bottom:0px}.video-feed-item[_ngcontent-%COMP%]   .feed-item-content[_ngcontent-%COMP%]   .item-content-body[_ngcontent-%COMP%]   .item-post-content[_ngcontent-%COMP%]{margin-left:16px}.pc-action-bar[_ngcontent-%COMP%]{display:flex;flex-direction:column;z-index:1}.pc-action-bar[_ngcontent-%COMP%]   .bar-item-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;width:48px;font-size:13px}.pc-action-bar[_ngcontent-%COMP%]   .bar-item-wrapper[_ngcontent-%COMP%]   .bar-item-img[_ngcontent-%COMP%]{width:40px;height:40px;background-size:40px 40px;background-repeat:no-repeat;background-position:center top;margin-top:8px;display:flex;justify-content:center;align-items:center}.pc-action-bar[_ngcontent-%COMP%]   .bar-item-wrapper[_ngcontent-%COMP%]   .bar-item-img[_ngcontent-%COMP%]   [nz-icon][_ngcontent-%COMP%]{font-size:24px}.pc-action-bar[_ngcontent-%COMP%]   .bar-item-wrapper[_ngcontent-%COMP%]   .bar-item-text[_ngcontent-%COMP%]{font-weight:600;display:inline-block;line-height:17px;text-align:center;margin-top:6px;padding:0 8px}.pc-action-bar[_ngcontent-%COMP%]   .bar-item-wrapper[_ngcontent-%COMP%]   .engagement-icon[_ngcontent-%COMP%]{background-color:#1618230f;border-radius:100%;margin-left:0;cursor:pointer;transition:all .2s ease-in-out 0s}.pc-action-bar[_ngcontent-%COMP%]   .bar-item-wrapper[_ngcontent-%COMP%]   .engagement-text[_ngcontent-%COMP%]{color:#161823bf;font-size:13px}.list-item-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:24px}.list-item-actions[_ngcontent-%COMP%]   .btn__action[_ngcontent-%COMP%]{max-width:120px}.list-item-actions[_ngcontent-%COMP%]   [nz-icon][_ngcontent-%COMP%]{font-size:24px}"]}),n})();function Xt(n,i){if(1&n&&t._uU(0),2&n){const e=i.range;t.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," ")}}function Kt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"nz-pagination",28),t.NdJ("nzPageIndexChange",function(s){return t.CHM(e),t.oxw().paginate(s)}),t.qZA(),t.YNc(1,Xt,1,3,"ng-template",null,29,t.W1O)}if(2&n){const e=t.MAs(2),o=t.oxw();t.Q6J("nzPageIndex",o.pageIndex)("nzTotal",o.totalVideo)("nzPageSize",o.pageSize)("nzShowTotal",e)}}function Wt(n,i){if(1&n&&(t.TgZ(0,"div",30),t.TgZ(1,"nz-list-item"),t._UZ(2,"app-video-card",31),t._UZ(3,"nz-divider"),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.Q6J("nzSpan",24),t.xp6(2),t.Q6J("post",e)}}function te(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"span",33),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nz-radio-group",34),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().listVideoStatus=s})("ngModelChange",function(s){return t.CHM(e),t.oxw().changeFilterStatus(s)}),t.TgZ(5,"label",35),t._uU(6,"All"),t.qZA(),t.TgZ(7,"label",36),t._uU(8),t.qZA(),t.TgZ(9,"label",36),t._uU(10),t.qZA(),t.TgZ(11,"label",36),t._uU(12),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"post.video_status")),t.xp6(2),t.Q6J("ngModel",e.listVideoStatus),t.xp6(3),t.Q6J("nzValue",e.PostStatus.Created),t.xp6(1),t.hij(" ",e.PostStatus.Created," "),t.xp6(1),t.Q6J("nzValue",e.PostStatus.Approved),t.xp6(1),t.hij(" ",e.PostStatus.Approved," "),t.xp6(1),t.Q6J("nzValue",e.PostStatus.Hidden),t.xp6(1),t.hij(" ",e.PostStatus.Hidden," ")}}const nt=function(){return[16,8]},ee=function(){return{standalone:!0}};let ne=(()=>{class n{constructor(e,o,s,l,m,h){this.getVideoPostList=e,this.fb=o,this.route=s,this.router=l,this.msgService=m,this.translateService=h,this.PostStatus=u.$4T,this.pickerMode="date",this.listVideoStatus="all",this.totalVideo=0,this.reportsCount=0,this.pageIndex=1,this.pageSize=12,this.totalListVideo=0,this.destroy$=new L.xQ,this.loading=!1,this.period=[null,null],this.searchForm=this.fb.group({period:[null,null]})}ngOnInit(){this.route.queryParamMap.pipe((0,C.R)(this.destroy$)).subscribe(e=>{this.pageIndex=parseInt(e.get("page")||"1",10),this.pageSize=parseInt(e.get("size")||"12",10),this.text=e.get("text")||"";const o=e.get("videoStatus");this.listVideoStatus=Object.values(u.$4T).includes(o)?o:"all",this.period=[parseInt(e.get("started_at")||"")&&new Date(parseInt(e.get("started_at")))||null,parseInt(e.get("ended_at")||"")&&new Date(parseInt(e.get("ended_at")))||null],this.patchFormValue(),this.dataSubscription?this.refetch():(this.dataQueryRef=this.getVideoPostList.watch(this.getVariables(),{notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),this.dataSubscription=this.dataQueryRef.valueChanges.pipe((0,C.R)(this.destroy$)).subscribe(({data:s,loading:l,error:m,errors:h})=>{if(this.loading=l,!l){if(m||h)return void this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"));s&&(this.posts=s.posts,this.totalVideo=s.postsConnection.aggregate.count)}},()=>{this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"))}))})}patchFormValue(){this.period[0]&&this.period[1]&&this.searchForm.controls.period.untouched&&this.searchForm.patchValue({period:this.period})}refetch(){var e;null===(e=this.dataQueryRef)||void 0===e||e.refetch(this.getVariables())}getVariables(){var e,o;let s;return"all"!==this.listVideoStatus&&(s=this.listVideoStatus),{where:{category:{id:Et.N.videoCategoryId},status:s,createdAtGte:(null===(e=this.period)||void 0===e?void 0:e[0])||void 0,createdAtLte:(null===(o=this.period)||void 0===o?void 0:o[1])||void 0},first:this.pageSize,skip:(this.pageIndex-1)*this.pageSize}}handleSearch(){const e=this.searchForm.value,[o,s]=this.parseDateRange(e.period,this.pickerMode);this.pageIndex=1,this.router.navigate([],{queryParams:{page:this.pageIndex,started_at:null==o?void 0:o.getTime(),ended_at:null==s?void 0:s.getTime()},relativeTo:this.route,queryParamsHandling:"merge"})}parseDateRange(e,o){const s=e.length;switch(o){case"date":return e;case"month":return e.map((m,h)=>{if(!m)return m;const R=V()(m);return h!==s-1?R.startOf("week").toDate():R.endOf("week").toDate()});case"year":return e.map((m,h)=>{if(!m)return m;const R=V()(m);return h!==s-1?R.startOf("year").toDate():R.endOf("year").toDate()});default:return e}}changeFilterStatus(e){this.pageIndex=1,this.router.navigate([],{queryParams:{page:this.pageIndex,videoStatus:e},relativeTo:this.route,queryParamsHandling:"merge"})}paginate(e){this.router.navigate([],{queryParams:{page:e},relativeTo:this.route,queryParamsHandling:"merge"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.zA),t.Y36(g.qu),t.Y36(b.gz),t.Y36(b.F0),t.Y36(x.dD),t.Y36(z.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-video-list"]],decls:49,vars:33,consts:[[1,"site-page-header",3,"nzTitle"],["nz-page-header-breadcrumb",""],["nz-icon","","nzType","home"],["routerLink","/posts"],["routerLink","/posts/videos"],[1,"standard-list"],["nzJustify","center"],["nzSm","12","nzXs","24"],[1,"header-info"],[1,"mb-3",2,"margin-top","16px"],["nz-form","",3,"formGroup","ngSubmit"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","18"],["nzSearch",""],[3,"ngModel","ngModelOptions","ngModelChange"],["nzValue","date","nzLabel","Date"],["nzValue","week","nzLabel","Week"],["nzValue","month","nzLabel","Month"],["nzValue","year","nzLabel","Year"],["nzAllowClear","true","formControlName","period",3,"nzMode"],["nz-col","","nzSpan","24"],["nz-button","","nzType","primary","nzSearch",""],["nz-icon","","nzType","search","nzTheme","outline"],[2,"margin-top","16px",3,"nzTitle","nzExtra"],["nzGrid","",3,"nzPagination","nzLoading"],["listPagination",""],["nz-col","",3,"nzSpan",4,"ngFor","ngForOf"],["extraListTpl",""],[3,"nzPageIndex","nzTotal","nzPageSize","nzShowTotal","nzPageIndexChange"],["rangeTemplate",""],["nz-col","",3,"nzSpan"],[3,"post"],[1,"extra-content"],[1,"video-status"],[3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","all"],["nz-radio-button","",3,"nzValue"]],template:function(e,o){if(1&e&&(t.TgZ(0,"nz-page-header",0),t.ALo(1,"translate"),t.TgZ(2,"nz-breadcrumb",1),t.TgZ(3,"nz-breadcrumb-item"),t._UZ(4,"i",2),t.qZA(),t.TgZ(5,"nz-breadcrumb-item"),t.TgZ(6,"a",3),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.TgZ(9,"nz-breadcrumb-item"),t.TgZ(10,"a",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"nz-card"),t.TgZ(15,"nz-row",6),t.TgZ(16,"nz-col",7),t.TgZ(17,"div",8),t.TgZ(18,"span"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"p"),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"nz-card",9),t.TgZ(24,"form",10),t.NdJ("ngSubmit",function(){return o.handleSearch()}),t.TgZ(25,"div",11),t.TgZ(26,"div",12),t.TgZ(27,"nz-input-group",13),t.TgZ(28,"nz-select",14),t.NdJ("ngModelChange",function(l){return o.pickerMode=l}),t._UZ(29,"nz-option",15),t._UZ(30,"nz-option",16),t._UZ(31,"nz-option",17),t._UZ(32,"nz-option",18),t.qZA(),t._UZ(33,"nz-range-picker",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",11),t.TgZ(35,"div",20),t.TgZ(36,"button",21),t._UZ(37,"i",22),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"nz-card",23),t.ALo(41,"translate"),t.TgZ(42,"nz-list",24),t.YNc(43,Kt,3,4,"ng-template",null,25,t.W1O),t.TgZ(45,"div",11),t.YNc(46,Wt,4,2,"div",26),t.qZA(),t.qZA(),t.qZA(),t.YNc(47,te,13,10,"ng-template",null,27,t.W1O),t.qZA()),2&e){const s=t.MAs(44),l=t.MAs(48);t.s9C("nzTitle",t.lcZ(1,18,"post.manage_video")),t.xp6(7),t.Oqu(t.lcZ(8,20,"common.post")),t.xp6(4),t.Oqu(t.lcZ(12,22,"common.video")),t.xp6(8),t.Oqu(t.lcZ(20,24,"post.total_video")),t.xp6(3),t.Oqu(o.totalVideo),t.xp6(2),t.Q6J("formGroup",o.searchForm),t.xp6(1),t.Q6J("nzGutter",t.DdM(30,nt)),t.xp6(3),t.Q6J("ngModel",o.pickerMode)("ngModelOptions",t.DdM(31,ee)),t.xp6(5),t.Q6J("nzMode",o.pickerMode),t.xp6(1),t.Q6J("nzGutter",t.DdM(32,nt)),t.xp6(4),t.hij(" ",t.lcZ(39,26,"common.search")," "),t.xp6(2),t.s9C("nzTitle",t.lcZ(41,28,"post.video_list")),t.Q6J("nzExtra",l),t.xp6(2),t.Q6J("nzPagination",s)("nzLoading",o.loading),t.xp6(3),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("ngForOf",o.posts)}},directives:[Z.$O,T.Dg,Z.A2,T.MO,J.w,A.Ls,b.yS,S.bd,P.SK,P.t3,g._Y,g.JL,g.sg,v.gB,q.Vq,g.JJ,g.On,q.Ip,d.uw,d.wS,g.u,O.ix,X.dQ,_.n_,_.fl,r.sg,U.dE,_.AA,Gt,f.g,a.Dg,a.Of,a.Bq],pipes:[z.X$],styles:[".standard-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global   .ant-card-head[_ngcontent-%COMP%]{border-bottom:none}.standard-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global   .ant-card-head-title[_ngcontent-%COMP%]{padding:24px 0;line-height:32px}.standard-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global   .ant-card-extra[_ngcontent-%COMP%]{padding:24px 0}.standard-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global   .ant-list-pagination[_ngcontent-%COMP%]{margin-top:24px;text-align:right}.standard-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:global   .ant-avatar-lg[_ngcontent-%COMP%]{width:48px;height:48px;line-height:48px}.standard-list[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{position:relative;text-align:center}.standard-list[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px;line-height:22px}.standard-list[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin:0;font-size:24px;line-height:32px}.standard-list[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%] > em[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:1px;height:56px;background-color:#e8e8e8}.standard-list[_ngcontent-%COMP%]   .extra-content[_ngcontent-%COMP%]   .video-status[_ngcontent-%COMP%]{margin-right:8px}"]}),n})();function oe(n,i){1&n&&(t.TgZ(0,"nz-tag",11),t._UZ(1,"i",12),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"report.report_status.created")))}function ie(n,i){1&n&&(t.TgZ(0,"nz-tag",13),t._UZ(1,"i",14),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"report.report_status.approved")))}function se(n,i){1&n&&(t.TgZ(0,"nz-tag",15),t._UZ(1,"i",16),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"report.report_status.rejected")))}function re(n,i){1&n&&(t.TgZ(0,"nz-tag"),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"report.report_status.created")))}function ae(n,i){1&n&&(t.TgZ(0,"nz-tag"),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"report.report_status.hidden")))}function ce(n,i){1&n&&(t.TgZ(0,"nz-tag"),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"report.report_status.rejected")))}const pe=function(n,i,e){return{user:n,postAuthor:i,reportType:e}};let le=(()=>{class n{constructor(e,o,s,l){this.approvePostCommentReportGQL=e,this.rejectPostCommentReportGQL=o,this.msgService=s,this.translateService=l,this.destroy$=new L.xQ,this.PostCommentStatus=u.FoQ,this.PostCommentReportStatus=u.vRl,this.approving=!1,this.rejecting=!1}ngOnInit(){this.commentStatus=this.report.postComment.status,this.reportStatus=this.report.status}approve(){this.approving=!0,this.approvePostCommentReportGQL.mutate({where:{id:this.report.id}}).pipe((0,C.R)(this.destroy$)).subscribe(({data:e,errors:o})=>{this.approving=!1,o?this.msgService.error(this.translateService.instant("report.approve_report_error")):e&&(this.commentStatus=u.FoQ.Hidden,this.reportStatus=u.vRl.Approved,this.msgService.success(this.translateService.instant("report.approve_report_success")))},e=>{this.approving=!1,this.msgService.error(e.message?e.message:this.translateService.instant("report.approve_report_error"))})}reject(){this.rejecting=!0,this.rejectPostCommentReportGQL.mutate({where:{id:this.report.id}}).pipe((0,C.R)(this.destroy$)).subscribe(({data:e,errors:o})=>{this.rejecting=!1,o?this.msgService.error(this.translateService.instant("report.reject_report_error")):e&&(this.reportStatus=u.vRl.Rejected,this.msgService.success(this.translateService.instant("report.reject_report_success")))},e=>{this.rejecting=!1,this.msgService.error(e.message?e.message:this.translateService.instant("report.approve_report_error"))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.COt),t.Y36(u.Gwx),t.Y36(x.dD),t.Y36(z.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post-comment-report-card"]],inputs:{report:"report"},decls:33,vars:35,consts:[[3,"ngSwitch"],["nzColor","warning",4,"ngSwitchCase"],["nzColor","success",4,"ngSwitchCase"],["nzColor","error",4,"ngSwitchCase"],[1,"mb-3",3,"innerHtml"],[1,"report__details"],[1,"report__content","mb-2"],["nzBordered","false"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","","nzIcon","user",3,"nzSrc"],[4,"ngSwitchCase"],["nzColor","warning"],["nz-icon","","nzType","exclamation","nzTheme","outline"],["nzColor","success"],["nz-icon","","nzType","check","nzTheme","outline"],["nzColor","error"],["nz-icon","","nzType","close","nzTheme","outline"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div"),t.ynx(2,0),t.YNc(3,oe,5,3,"nz-tag",1),t.YNc(4,ie,5,3,"nz-tag",2),t.YNc(5,se,5,3,"nz-tag",3),t.BQk(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.qZA(),t._UZ(9,"div",4),t.ALo(10,"translate"),t.ALo(11,"translate"),t.TgZ(12,"div",5),t.TgZ(13,"div"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"p",6),t._uU(17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"nz-card",7),t.TgZ(19,"nz-comment",8),t.ALo(20,"dateFromNow"),t._UZ(21,"nz-avatar",9),t.TgZ(22,"nz-comment-content"),t.TgZ(23,"p"),t._uU(24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div"),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.ynx(29,0),t.YNc(30,re,4,3,"nz-tag",10),t.YNc(31,ae,4,3,"nz-tag",10),t.YNc(32,ce,4,3,"nz-tag",10),t.BQk(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngSwitch",o.reportStatus),t.xp6(1),t.Q6J("ngSwitchCase",o.PostCommentReportStatus.Created),t.xp6(1),t.Q6J("ngSwitchCase",o.PostCommentReportStatus.Approved),t.xp6(1),t.Q6J("ngSwitchCase",o.PostCommentReportStatus.Rejected),t.xp6(2),t.hij(" ",t.xi3(8,17,o.report.updatedAt,"M/d/yy, h:mm a")," "),t.xp6(2),t.Q6J("innerHtml",t.xi3(10,20,"report.report_notification",t.kEZ(31,pe,o.report.user.account,o.report.postComment.post.author.account,t.lcZ(11,23,"report.report_type."+o.report.type))),t.oJD),t.xp6(5),t.hij("",t.lcZ(15,25,"report.details"),":"),t.xp6(3),t.Oqu(o.report.reason),t.xp6(2),t.Q6J("nzAuthor",o.report.postComment.author.account)("nzDatetime",t.lcZ(20,27,o.report.postComment.createdAt)),t.xp6(2),t.Q6J("nzSrc",null==o.report.postComment.author.avatar?null:o.report.postComment.author.avatar.url),t.xp6(3),t.hij(" ",o.report.postComment.content," "),t.xp6(3),t.hij("",t.lcZ(28,29,"comment.comment_status"),": "),t.xp6(2),t.Q6J("ngSwitch",o.commentStatus),t.xp6(1),t.Q6J("ngSwitchCase",o.PostCommentStatus.Created),t.xp6(1),t.Q6J("ngSwitchCase",o.PostCommentStatus.Hidden),t.xp6(1),t.Q6J("ngSwitchCase",o.PostCommentStatus.Reported))},directives:[r.RF,r.n9,S.bd,ht,c.Dz,k,B,N.j,J.w,A.Ls],pipes:[r.uU,z.X$,tt.I],styles:[".report__details[_ngcontent-%COMP%]{display:flex}.report__details[_ngcontent-%COMP%]   .report__content[_ngcontent-%COMP%]{padding-left:8px;white-space:pre-line}"]}),n})();function de(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"nz-list-item"),t._UZ(1,"div",3),t._UZ(2,"app-post-comment-report-card",14,15),t.TgZ(4,"ul",16),t.TgZ(5,"nz-list-item-action"),t.TgZ(6,"button",17),t.NdJ("click",function(){return t.CHM(e),t.MAs(3).approve()}),t._UZ(7,"i",18),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"nz-list-item-action"),t.TgZ(11,"button",17),t.NdJ("click",function(){return t.CHM(e),t.MAs(3).reject()}),t._UZ(12,"i",19),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(15,"nz-list-item-extra"),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.Q6J("report",e),t.xp6(5),t.Q6J("nzTheme","twotone"),t.xp6(1),t.hij(" ",t.lcZ(9,4,"review.approve")," "),t.xp6(5),t.hij(" ",t.lcZ(14,6,"review.reject")," ")}}function ue(n,i){if(1&n&&t._uU(0),2&n){const e=i.range;t.lnq(" ",e[0],"-",e[1]," of ",i.$implicit," ")}}function ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"nz-pagination",20),t.NdJ("nzPageIndexChange",function(s){return t.CHM(e),t.oxw().paginate(s)}),t.qZA(),t.YNc(1,ue,1,3,"ng-template",null,21,t.W1O)}if(2&n){const e=t.MAs(2),o=t.oxw();t.Q6J("nzPageIndex",o.pageIndex)("nzTotal",o.reportsCount)("nzPageSize",o.pageSize)("nzShowTotal",e)}}function me(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"span",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nz-radio-group",24),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().listReportStatus=s})("ngModelChange",function(s){return t.CHM(e),t.oxw().changeFilterStatus(s)}),t.TgZ(5,"label",25),t._uU(6,"All"),t.qZA(),t.TgZ(7,"label",26),t._uU(8),t.qZA(),t.TgZ(9,"label",26),t._uU(10),t.qZA(),t.TgZ(11,"label",26),t._uU(12),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"common.status")),t.xp6(2),t.Q6J("ngModel",e.listReportStatus),t.xp6(3),t.Q6J("nzValue",e.PostCommentReportStatus.Created),t.xp6(1),t.hij(" ",e.PostCommentReportStatus.Created," "),t.xp6(1),t.Q6J("nzValue",e.PostCommentReportStatus.Approved),t.xp6(1),t.hij(" ",e.PostCommentReportStatus.Approved," "),t.xp6(1),t.Q6J("nzValue",e.PostCommentReportStatus.Rejected),t.xp6(1),t.hij(" ",e.PostCommentReportStatus.Rejected," ")}}const he=function(){return[16,8]};var D=(()=>{return(n=D||(D={})).ID_ASC="ID_ASC",n.ID_DESC="ID_DESC",D;var n})();const _e=[{path:"reports",component:(()=>{class n{constructor(e,o,s,l,m,h){this.fb=e,this.router=o,this.route=s,this.msgService=l,this.translateService=m,this.getPostCommentReportGQL=h,this.loading=!1,this.reportsCount=0,this.pageIndex=1,this.pageSize=10,this.destroy$=new L.xQ,this.sort=D.ID_DESC,this.Sort=D,this.reports=[],this.listReportStatus="all",this.reportType="comment",this.PostCommentReportStatus=u.vRl,this.searchForm=this.fb.group({sort:[D.ID_DESC]})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}ngOnInit(){this.route.queryParamMap.pipe((0,C.R)(this.destroy$)).subscribe(e=>{this.pageIndex=parseInt(e.get("page")||"1",10),this.pageSize=parseInt(e.get("size")||"10",10),this.sort=Object.values(D).includes(e.get("sort"))?e.get("sort"):D.ID_DESC;const o=e.get("reportStatus");this.listReportStatus=Object.values(u.vRl).includes(o)?o:"all",this.dataSubscription?this.refetch():(this.dataQueryRef=this.getPostCommentReportGQL.watch(this.getVariables(),{notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),this.dataSubscription=this.dataQueryRef.valueChanges.pipe((0,C.R)(this.destroy$)).subscribe(({data:s,loading:l,error:m,errors:h})=>{if(this.loading=l,!l){if(m||h)return void this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"));s&&(this.reports=s.postCommentReports,this.reportsCount=s.postCommentReportsConnection.aggregate.count)}},()=>{this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"))}))})}getVariables(){let e;return"all"!==this.listReportStatus&&(e=this.listReportStatus),{first:this.pageSize,skip:(this.pageIndex-1)*this.pageSize,orderBy:{id:this.sort===D.ID_DESC?u.d$J.Desc:u.d$J.Asc},where:{status:e}}}refetch(){var e;null===(e=this.dataQueryRef)||void 0===e||e.refetch(this.getVariables())}handleSearch(){var e;this.router.navigate([],{queryParams:{sort:(null===(e=this.searchForm.get("sort"))||void 0===e?void 0:e.value)||void 0},relativeTo:this.route,queryParamsHandling:"merge"})}paginate(e){this.router.navigate([],{queryParams:{page:e},relativeTo:this.route,queryParamsHandling:"merge"})}changeFilterStatus(e){this.pageIndex=1,this.router.navigate([],{queryParams:{page:this.pageIndex,reportStatus:e},relativeTo:this.route,queryParamsHandling:"merge"})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.qu),t.Y36(b.F0),t.Y36(b.gz),t.Y36(x.dD),t.Y36(z.sK),t.Y36(u._19))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post-report-list"]],decls:25,vars:22,consts:[[3,"nzTitle"],["nz-page-header-breadcrumb",""],["nz-icon","","nzType","home"],[1,"mb-3"],["nz-form","",3,"formGroup"],["nz-row","",3,"nzGutter","nzJustify"],["nz-col",""],["formControlName","sort",3,"ngModelChange"],[3,"nzLabel","nzValue"],[1,"mb-4",3,"nzExtra"],["nzGrid","","nzItemLayout","vertical",3,"nzLoading","nzPagination"],[4,"ngFor","ngForOf"],["paginationTemplate",""],["extraListTpl",""],[3,"report"],["reportCard",""],["nz-list-item-actions",""],["nz-button","","nzType","text","nzBlock","",1,"btn__action",3,"click"],["nz-icon","","nzType","like","nzTheme","outline",3,"nzTheme"],["nz-icon","","nzType","eye-invisible","nzTheme","twotone","nzTwotoneColor","#eb2f96"],[1,"pb-4",3,"nzPageIndex","nzTotal","nzPageSize","nzShowTotal","nzPageIndexChange"],["rangeTemplate",""],[1,"extra-content"],[1,"video-status"],[3,"ngModel","ngModelChange"],["nz-radio-button","","nzValue","all"],["nz-radio-button","",3,"nzValue"]],template:function(e,o){if(1&e&&(t.TgZ(0,"nz-page-header",0),t.ALo(1,"translate"),t.TgZ(2,"nz-breadcrumb",1),t.TgZ(3,"nz-breadcrumb-item"),t._UZ(4,"i",2),t.qZA(),t.TgZ(5,"nz-breadcrumb-item"),t.TgZ(6,"a"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"nz-card",3),t.TgZ(10,"form",4),t.TgZ(11,"div",5),t.TgZ(12,"div",6),t.TgZ(13,"nz-select",7),t.NdJ("ngModelChange",function(){return o.handleSearch()}),t._UZ(14,"nz-option",8),t.ALo(15,"translate"),t._UZ(16,"nz-option",8),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"nz-card",9),t.TgZ(19,"nz-list",10),t.YNc(20,de,16,8,"nz-list-item",11),t.qZA(),t.YNc(21,ge,3,4,"ng-template",null,12,t.W1O),t.YNc(23,me,13,10,"ng-template",null,13,t.W1O),t.qZA()),2&e){const s=t.MAs(22),l=t.MAs(24);t.s9C("nzTitle",t.lcZ(1,13,"review.report_list")),t.xp6(7),t.Oqu(t.lcZ(8,15,"review.report_list")),t.xp6(3),t.Q6J("formGroup",o.searchForm),t.xp6(1),t.Q6J("nzGutter",t.DdM(21,he))("nzJustify","end"),t.xp6(3),t.Q6J("nzLabel",t.lcZ(15,17,"review.sort.created_at_desc"))("nzValue",o.Sort.ID_DESC),t.xp6(2),t.Q6J("nzLabel",t.lcZ(17,19,"review.sort.created_at_asc"))("nzValue",o.Sort.ID_ASC),t.xp6(2),t.Q6J("nzExtra",l),t.xp6(1),t.Q6J("nzLoading",o.loading)("nzPagination",s),t.xp6(1),t.Q6J("ngForOf",o.reports)}},directives:[Z.$O,T.Dg,Z.A2,T.MO,J.w,A.Ls,S.bd,g._Y,g.JL,g.sg,P.SK,P.t3,q.Vq,g.JJ,g.u,q.Ip,_.n_,_.fl,r.sg,_.AA,le,_.nk,_.KC,O.ix,_.yw,U.dE,a.Dg,g.On,a.Of,a.Bq],pipes:[z.X$],styles:[""]}),n})()},{path:"videos",component:ne},{path:"",pathMatch:"full",component:Ft}];let ze=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[b.Bz.forChild(_e)],b.Bz]}),n})();var fe=p(7615);let Ce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.ez,ze,g.u5,g.UX,fe.m,z.aw.forChild(),Z.KJ,T.lt,S.vh,v.o7,O.sL,q.LV,_.Ph,P.Jb,E.zf,Y.mS,A.PV,x.gR,N.X,Q.ZJ,U.uK,d.Hb,f.S,a.aF,c.Rt,y.Ju,_t]]}),n})()}}]);