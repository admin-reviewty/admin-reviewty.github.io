"use strict";(self.webpackChunkadmin_angular=self.webpackChunkadmin_angular||[]).push([[812],{4812:(dn,J,r)=>{r.d(J,{yH:()=>_,cD:()=>cn,Zv:()=>sn});var M=r(4762),s=r(7716),x=r(9765),d=r(6782),P=r(7070),C=r(2729),N=r(641),l=r(6182),y=r(946),I=r(8583),O=r(8178),B=r(464);const Q=["*"];function R(p,b){if(1&p&&(s.ynx(0),s._UZ(1,"i",6),s.BQk()),2&p){const g=b.$implicit,h=s.oxw(2);s.xp6(1),s.Q6J("nzType",g||"right")("nzRotate",h.nzActive?90:0)}}function D(p,b){if(1&p&&(s.ynx(0),s.YNc(1,R,2,2,"ng-container",2),s.BQk()),2&p){const g=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",g.nzExpandedIcon)}}function U(p,b){if(1&p&&(s.ynx(0),s._uU(1),s.BQk()),2&p){const g=s.oxw();s.xp6(1),s.Oqu(g.nzHeader)}}function o(p,b){if(1&p&&(s.ynx(0),s._uU(1),s.BQk()),2&p){const g=s.oxw(2);s.xp6(1),s.Oqu(g.nzExtra)}}function i(p,b){if(1&p&&(s.TgZ(0,"div",7),s.YNc(1,o,2,1,"ng-container",2),s.qZA()),2&p){const g=s.oxw();s.xp6(1),s.Q6J("nzStringTemplateOutlet",g.nzExtra)}}const c="collapse";let _=(()=>{class p{constructor(g,h,V,T){this.nzConfigService=g,this.cdr=h,this.elementRef=V,this.directionality=T,this._nzModuleName=c,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.destroy$=new x.xQ,this.elementRef.nativeElement.classList.add("ant-collapse"),this.nzConfigService.getConfigChangeEventForComponent(c).pipe((0,d.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){var g;null===(g=this.directionality.change)||void 0===g||g.pipe((0,d.R)(this.destroy$)).subscribe(h=>{this.dir=h,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(g){this.listOfNzCollapsePanelComponent.push(g)}removePanel(g){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(g),1)}click(g){this.nzAccordion&&!g.nzActive&&this.listOfNzCollapsePanelComponent.filter(h=>h!==g).forEach(h=>{h.nzActive&&(h.nzActive=!1,h.nzActiveChange.emit(h.nzActive),h.markForCheck())}),g.nzActive=!g.nzActive,g.nzActiveChange.emit(g.nzActive)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return p.\u0275fac=function(g){return new(g||p)(s.Y36(C.jY),s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(y.Is,8))},p.\u0275cmp=s.Xpm({type:p,selectors:[["nz-collapse"]],hostVars:10,hostBindings:function(g,h){2&g&&s.ekj("ant-collapse-icon-position-left","left"===h.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===h.nzExpandIconPosition)("ant-collapse-ghost",h.nzGhost)("ant-collapse-borderless",!h.nzBordered)("ant-collapse-rtl","rtl"===h.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],ngContentSelectors:Q,decls:1,vars:0,template:function(g,h){1&g&&(s.F$t(),s.Hsn(0))},encapsulation:2,changeDetection:0}),(0,M.gn)([(0,C.oS)(),(0,l.yF)()],p.prototype,"nzAccordion",void 0),(0,M.gn)([(0,C.oS)(),(0,l.yF)()],p.prototype,"nzBordered",void 0),(0,M.gn)([(0,C.oS)(),(0,l.yF)()],p.prototype,"nzGhost",void 0),p})();const z="collapsePanel";let sn=(()=>{class p{constructor(g,h,V,T,n){this.nzConfigService=g,this.cdr=h,this.nzCollapseComponent=V,this.elementRef=T,this.noAnimation=n,this._nzModuleName=z,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new s.vpe,this.destroy$=new x.xQ,this.elementRef.nativeElement.classList.add("ant-collapse-item"),this.nzConfigService.getConfigChangeEventForComponent(z).pipe((0,d.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}clickHeader(){this.nzDisabled||this.nzCollapseComponent.click(this)}markForCheck(){this.cdr.markForCheck()}ngOnInit(){this.nzCollapseComponent.addPanel(this)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.nzCollapseComponent.removePanel(this)}}return p.\u0275fac=function(g){return new(g||p)(s.Y36(C.jY),s.Y36(s.sBO),s.Y36(_,1),s.Y36(s.SBq),s.Y36(N.P,8))},p.\u0275cmp=s.Xpm({type:p,selectors:[["nz-collapse-panel"]],hostVars:6,hostBindings:function(g,h){2&g&&s.ekj("ant-collapse-no-arrow",!h.nzShowArrow)("ant-collapse-item-active",h.nzActive)("ant-collapse-item-disabled",h.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],ngContentSelectors:Q,decls:7,vars:8,consts:[["role","tab",1,"ant-collapse-header",3,"click"],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(g,h){1&g&&(s.F$t(),s.TgZ(0,"div",0),s.NdJ("click",function(){return h.clickHeader()}),s.YNc(1,D,2,1,"ng-container",1),s.YNc(2,U,2,1,"ng-container",2),s.YNc(3,i,2,1,"div",3),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"div",5),s.Hsn(6),s.qZA(),s.qZA()),2&g&&(s.uIk("aria-expanded",h.nzActive),s.xp6(1),s.Q6J("ngIf",h.nzShowArrow),s.xp6(1),s.Q6J("nzStringTemplateOutlet",h.nzHeader),s.xp6(1),s.Q6J("ngIf",h.nzExtra),s.xp6(1),s.ekj("ant-collapse-content-active",h.nzActive),s.Q6J("@.disabled",null==h.noAnimation?null:h.noAnimation.nzNoAnimation)("@collapseMotion",h.nzActive?"expanded":"hidden"))},directives:[I.O5,O.f,B.Ls],encapsulation:2,data:{animation:[P.J_]},changeDetection:0}),(0,M.gn)([(0,l.yF)()],p.prototype,"nzActive",void 0),(0,M.gn)([(0,l.yF)()],p.prototype,"nzDisabled",void 0),(0,M.gn)([(0,C.oS)(),(0,l.yF)()],p.prototype,"nzShowArrow",void 0),p})(),cn=(()=>{class p{}return p.\u0275fac=function(g){return new(g||p)},p.\u0275mod=s.oAB({type:p}),p.\u0275inj=s.cJS({imports:[[y.vT,I.ez,B.PV,O.T,N.g]]}),p})()},343:(dn,J,r)=>{r.d(J,{_:()=>Q,Z:()=>R});var M=r(4762),s=r(946),x=r(6461),d=r(7716),P=r(3679),C=r(9765),N=r(6782),l=r(6182),y=r(8583),I=r(464),O=r(9238);const B=["inputElement"];let Q=(()=>{class D{constructor(o,i,c,_){this.elementRef=o,this.cdr=i,this.focusMonitor=c,this.directionality=_,this.destroy$=new C.xQ,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.dir="ltr",this.onChange=()=>{},this.onTouched=()=>{},this.nzBlur=new d.vpe,this.nzFocus=new d.vpe,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=z=>z.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,""),this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzInputMode="decimal",this.nzId=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=z=>z,this.elementRef.nativeElement.classList.add("ant-input-number")}onModelChange(o){this.parsedValue=this.nzParser(o),this.inputElement.nativeElement.value=`${this.parsedValue}`;const i=this.getCurrentValidValue(this.parsedValue);this.setValue(i)}getCurrentValidValue(o){let i=o;return i=""===i?"":this.isNotCompleteNumber(i)?this.value:`${this.getValidValue(i)}`,this.toNumber(i)}isNotCompleteNumber(o){return isNaN(o)||""===o||null===o||!(!o||o.toString().indexOf(".")!==o.toString().length-1)}getValidValue(o){let i=parseFloat(o);return isNaN(i)?o:(i<this.nzMin&&(i=this.nzMin),i>this.nzMax&&(i=this.nzMax),i)}toNumber(o){if(this.isNotCompleteNumber(o))return o;const i=String(o);if(i.indexOf(".")>=0&&(0,l.DX)(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(o,this.nzPrecision);if("cut"===this.nzPrecisionMode){const c=i.split(".");return c[1]=c[1].slice(0,this.nzPrecision),Number(c.join("."))}return Number(Number(o).toFixed(this.nzPrecision))}return Number(o)}getRatio(o){let i=1;return o.metaKey||o.ctrlKey?i=.1:o.shiftKey&&(i=10),i}down(o,i){this.isFocused||this.focus(),this.step("down",o,i)}up(o,i){this.isFocused||this.focus(),this.step("up",o,i)}getPrecision(o){const i=o.toString();if(i.indexOf("e-")>=0)return parseInt(i.slice(i.indexOf("e-")+2),10);let c=0;return i.indexOf(".")>=0&&(c=i.length-i.indexOf(".")-1),c}getMaxPrecision(o,i){if((0,l.DX)(this.nzPrecision))return this.nzPrecision;const c=this.getPrecision(i),_=this.getPrecision(this.nzStep),z=this.getPrecision(o);return o?Math.max(z,c+_):c+_}getPrecisionFactor(o,i){const c=this.getMaxPrecision(o,i);return Math.pow(10,c)}upStep(o,i){const c=this.getPrecisionFactor(o,i),_=Math.abs(this.getMaxPrecision(o,i));let z;return z="number"==typeof o?((c*o+c*this.nzStep*i)/c).toFixed(_):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(z)}downStep(o,i){const c=this.getPrecisionFactor(o,i),_=Math.abs(this.getMaxPrecision(o,i));let z;return z="number"==typeof o?((c*o-c*this.nzStep*i)/c).toFixed(_):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(z)}step(o,i,c=1){if(this.stop(),i.preventDefault(),this.nzDisabled)return;const _=this.getCurrentValidValue(this.parsedValue)||0;let z=0;"up"===o?z=this.upStep(_,c):"down"===o&&(z=this.downStep(_,c));const sn=z>this.nzMax||z<this.nzMin;z>this.nzMax?z=this.nzMax:z<this.nzMin&&(z=this.nzMin),this.setValue(z),this.updateDisplayValue(z),this.isFocused=!0,!sn&&(this.autoStepTimer=setTimeout(()=>{this[o](i,c)},300))}stop(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}setValue(o){if(`${this.value}`!=`${o}`&&this.onChange(o),this.value=o,this.parsedValue=o,this.disabledUp=this.disabledDown=!1,o||0===o){const i=Number(o);i>=this.nzMax&&(this.disabledUp=!0),i<=this.nzMin&&(this.disabledDown=!0)}}updateDisplayValue(o){const i=(0,l.DX)(this.nzFormatter(o))?this.nzFormatter(o):"";this.displayValue=i,this.inputElement.nativeElement.value=`${i}`}onKeyDown(o){if(o.keyCode===x.LH){const i=this.getRatio(o);this.up(o,i),this.stop()}else if(o.keyCode===x.JH){const i=this.getRatio(o);this.down(o,i),this.stop()}else o.keyCode===x.K5&&this.updateDisplayValue(this.value)}writeValue(o){this.value=o,this.setValue(o),this.updateDisplayValue(o),this.cdr.markForCheck()}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.nzDisabled=o,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnInit(){var o;this.focusMonitor.monitor(this.elementRef,!0).pipe((0,N.R)(this.destroy$)).subscribe(i=>{i?(this.isFocused=!0,this.nzFocus.emit()):(this.isFocused=!1,this.updateDisplayValue(this.value),this.nzBlur.emit(),Promise.resolve().then(()=>this.onTouched()))}),this.dir=this.directionality.value,null===(o=this.directionality.change)||void 0===o||o.pipe((0,N.R)(this.destroy$)).subscribe(i=>{this.dir=i})}ngOnChanges(o){if(o.nzFormatter&&!o.nzFormatter.isFirstChange()){const i=this.getCurrentValidValue(this.parsedValue);this.setValue(i),this.updateDisplayValue(i)}}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}}return D.\u0275fac=function(o){return new(o||D)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(O.tE),d.Y36(s.Is,8))},D.\u0275cmp=d.Xpm({type:D,selectors:[["nz-input-number"]],viewQuery:function(o,i){if(1&o&&d.Gf(B,7),2&o){let c;d.iGM(c=d.CRH())&&(i.inputElement=c.first)}},hostVars:10,hostBindings:function(o,i){2&o&&d.ekj("ant-input-number-focused",i.isFocused)("ant-input-number-lg","large"===i.nzSize)("ant-input-number-sm","small"===i.nzSize)("ant-input-number-disabled",i.nzDisabled)("ant-input-number-rtl","rtl"===i.dir)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzInputMode:"nzInputMode",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter",nzPrecision:"nzPrecision"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[d._Bn([{provide:P.JU,useExisting:(0,d.Gpc)(()=>D),multi:!0}]),d.TTD],decls:8,vars:13,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(o,i){1&o&&(d.TgZ(0,"div",0),d.TgZ(1,"span",1),d.NdJ("mousedown",function(_){return i.up(_)})("mouseup",function(){return i.stop()})("mouseleave",function(){return i.stop()}),d._UZ(2,"i",2),d.qZA(),d.TgZ(3,"span",3),d.NdJ("mousedown",function(_){return i.down(_)})("mouseup",function(){return i.stop()})("mouseleave",function(){return i.stop()}),d._UZ(4,"i",4),d.qZA(),d.qZA(),d.TgZ(5,"div",5),d.TgZ(6,"input",6,7),d.NdJ("keydown",function(_){return i.onKeyDown(_)})("keyup",function(){return i.stop()})("ngModelChange",function(_){return i.onModelChange(_)}),d.qZA(),d.qZA()),2&o&&(d.xp6(1),d.ekj("ant-input-number-handler-up-disabled",i.disabledUp),d.xp6(2),d.ekj("ant-input-number-handler-down-disabled",i.disabledDown),d.xp6(3),d.Q6J("disabled",i.nzDisabled)("placeholder",i.nzPlaceHolder)("ngModel",i.displayValue),d.uIk("id",i.nzId)("autofocus",i.nzAutoFocus?"autofocus":null)("min",i.nzMin)("max",i.nzMax)("step",i.nzStep)("inputmode",i.nzInputMode))},directives:[I.Ls,P.Fj,P.JJ,P.On],encapsulation:2,changeDetection:0}),(0,M.gn)([(0,l.yF)()],D.prototype,"nzDisabled",void 0),(0,M.gn)([(0,l.yF)()],D.prototype,"nzAutoFocus",void 0),D})(),R=(()=>{class D{}return D.\u0275fac=function(o){return new(o||D)},D.\u0275mod=d.oAB({type:D}),D.\u0275inj=d.cJS({imports:[[s.vT,y.ez,P.u5,I.PV]]}),D})()},8812:(dn,J,r)=>{r.r(J),r.d(J,{IngredientModule:()=>Wn});var M=r(8583),s=r(7018),x=r(6271),d=r(5392),P=r(9790),C=r(6795),N=r(8058),l=r(3679),y=r(7674),I=r(343),O=r(4453),B=r(4828),Q=r(4812),R=r(269),D=r(7615),U=r(464),o=r(6704),i=r(5887),c=r(6640),_=r(5987),z=r(9765),sn=r(9112),cn=r(5917),p=r(8002),b=r(6782),g=r(9773),h=r(3815),V=r.n(h),T=r(7071),n=r(7716),vn=r(4701),Cn=r(5021),Zn=r(4514),An=r(6215),Tn=r(4395),bn=r(7519),Mn=r(5435),yn=r(3342),gn=r(9206);function xn(a,m){if(1&a){const t=n.EpF();n.TgZ(0,"span",3),n._UZ(1,"img",4),n._uU(2),n.qZA(),n.TgZ(3,"span",5),n.NdJ("click",function(){const u=n.CHM(t);return u.clear(u.item)}),n._uU(4,"\xd7"),n.qZA()}if(2&a){const t=m.item;n.xp6(1),n.Q6J("src",t.function.symbolUrl,n.LSH)("alt",t.name)("title",t.name),n.xp6(1),n.hij(" ",t.name,"")}}function Pn(a,m){if(1&a&&(n._UZ(0,"img",4),n._uU(1),n.ALo(2,"emojiFlagFromLanguageCode")),2&a){const t=m.item;n.Q6J("src",t.function.symbolUrl,n.LSH)("alt",t.name)("title",t.name),n.xp6(1),n.AsE(" ",t.name," ",n.lcZ(2,5,t.language)," ")}}let En=(()=>{class a{constructor(t){this.searchFunctionTranslationsGQL=t,this.destroy$=new z.xQ,this.loading=!1,this.text$=new An.X(""),this.buffer=[],this.completed=!1,this.onChange=e=>{},this.onTouched=()=>{},this.text$.pipe((0,b.R)(this.destroy$),(0,Tn.b)(250),(0,bn.x)(),(0,Mn.h)(e=>(null==e?void 0:e.trim().length)>0),(0,yn.b)(()=>{this.buffer=[],this.fetchMore()})).subscribe()}ngOnInit(){}writeValue(t){this.translations!==t&&(this.translations=t,this.handleModelChange())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}handleModelChange(){this.onChange(this.translations)}scrollToEnd(){this.completed||this.fetchMore()}fetchMore(){this.searchFunctionTranslationsGQL.fetch({where:{name:{contains:this.text$.getValue()}},first:30,skip:this.buffer.length}).subscribe(({loading:t,data:e})=>{this.loading=t,this.completed=0===(null==e?void 0:e.functionTranslations.length),this.buffer=this.buffer.concat(e.functionTranslations)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(T.yC2))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-function-select"]],features:[n._Bn([{provide:l.JU,useExisting:(0,n.Gpc)(()=>a),multi:!0}])],decls:3,vars:7,consts:[["bindLabel","name",3,"items","virtualScroll","loading","hideSelected","typeahead","ngModel","multiple","ngModelChange","scrollToEnd"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"ng-value-label"],[1,"function__icon",3,"src","alt","title"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"ng-select",0),n.NdJ("ngModelChange",function(f){return e.translations=f})("scrollToEnd",function(){return e.scrollToEnd()})("ngModelChange",function(){return e.handleModelChange()}),n.YNc(1,xn,5,4,"ng-template",1),n.YNc(2,Pn,3,7,"ng-template",2),n.qZA()),2&t&&n.Q6J("items",e.buffer)("virtualScroll",!0)("loading",e.loading)("hideSelected",!0)("typeahead",e.text$)("ngModel",e.translations)("multiple",!0)},directives:[c.w9,l.JJ,l.On,c.bb,c.Z2],pipes:[gn.o],styles:[".function__icon[_ngcontent-%COMP%]{width:14px;height:14px}"]}),a})();function In(a,m){if(1&a){const t=n.EpF();n.TgZ(0,"span",3),n._uU(1),n.qZA(),n.TgZ(2,"span",4),n.NdJ("click",function(){const u=n.CHM(t);return u.clear(u.item)}),n._uU(3,"\xd7"),n.qZA()}if(2&a){const t=m.item;n.xp6(1),n.hij(" ",t.name,"")}}function Un(a,m){if(1&a&&(n._uU(0),n.ALo(1,"emojiFlagFromLanguageCode")),2&a){const t=m.item;n.AsE(" ",t.name," ",n.lcZ(1,2,t.language)," ")}}let Nn=(()=>{class a{constructor(t){this.searchCautionTranslationsGQL=t,this.destroy$=new z.xQ,this.loading=!1,this.text$=new An.X(""),this.buffer=[],this.completed=!1,this.onChange=e=>{},this.onTouched=()=>{},this.text$.pipe((0,b.R)(this.destroy$),(0,Tn.b)(250),(0,bn.x)(),(0,Mn.h)(e=>(null==e?void 0:e.trim().length)>0),(0,yn.b)(()=>{this.buffer=[],this.fetchMore()})).subscribe()}ngOnInit(){}writeValue(t){this.translations!==t&&(this.translations=t,this.handleModelChange())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}handleModelChange(){this.onChange(this.translations)}scrollToEnd(){this.completed||this.fetchMore()}fetchMore(){this.searchCautionTranslationsGQL.fetch({where:{nameContains:this.text$.getValue()},first:30,skip:this.buffer.length}).subscribe(({loading:t,data:e})=>{this.loading=t,this.completed=0===(null==e?void 0:e.cautionTranslations.length),this.buffer=this.buffer.concat(e.cautionTranslations)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(T.eTd))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-caution-select"]],features:[n._Bn([{provide:l.JU,useExisting:(0,n.Gpc)(()=>a),multi:!0}])],decls:3,vars:7,consts:[["bindLabel","name",3,"items","virtualScroll","loading","hideSelected","typeahead","ngModel","multiple","ngModelChange","scrollToEnd"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"ng-value-label"],["aria-hidden","true",1,"ng-value-icon","right",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"ng-select",0),n.NdJ("ngModelChange",function(f){return e.translations=f})("scrollToEnd",function(){return e.scrollToEnd()})("ngModelChange",function(){return e.handleModelChange()}),n.YNc(1,In,4,1,"ng-template",1),n.YNc(2,Un,2,4,"ng-template",2),n.qZA()),2&t&&n.Q6J("items",e.buffer)("virtualScroll",!0)("loading",e.loading)("hideSelected",!0)("typeahead",e.text$)("ngModel",e.translations)("multiple",!0)},directives:[c.w9,l.JJ,l.On,c.bb,c.Z2],pipes:[gn.o],styles:[""]}),a})();var Dn=r(9374);function Ln(a,m){if(1&a&&n._UZ(0,"nz-option",23),2&a){const t=m.$implicit;n.Q6J("nzValue",t)("nzLabel",t)}}function Sn(a,m){if(1&a&&(n.TgZ(0,"nz-select",21),n.YNc(1,Ln,1,2,"nz-option",22),n.qZA()),2&a){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.units)}}function qn(a,m){if(1&a&&(n._uU(0),n.ALo(1,"emojiFlagFromLanguageCode"),n.ALo(2,"translate"),n.ALo(3,"lowercase")),2&a){const t=n.oxw().$implicit;n.AsE("",n.lcZ(1,2,t.value.language)," ",n.lcZ(2,4,"language."+n.lcZ(3,6,t.value.language)),"")}}const rn=function(){return{minRows:5,maxRows:10}},$=function(){return{minRows:2,maxRows:5}};function wn(a,m){if(1&a&&(n.TgZ(0,"nz-tab",24),n.YNc(1,qn,4,8,"ng-template",null,25,n.W1O),n.TgZ(3,"nz-form-item"),n.TgZ(4,"nz-form-label"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"nz-form-control",26),n.ALo(8,"translate"),n.TgZ(9,"nz-select",27),n._UZ(10,"nz-option",23),n.ALo(11,"translate"),n._UZ(12,"nz-option",23),n.ALo(13,"translate"),n._UZ(14,"nz-option",23),n.ALo(15,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"nz-form-item"),n.TgZ(17,"nz-form-label"),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.TgZ(20,"nz-form-control",26),n.ALo(21,"translate"),n._UZ(22,"input",28),n.qZA(),n.qZA(),n.TgZ(23,"nz-collapse"),n.TgZ(24,"nz-collapse-panel",29),n.ALo(25,"translate"),n.TgZ(26,"nz-form-item"),n.TgZ(27,"nz-form-label"),n._uU(28),n.ALo(29,"translate"),n.qZA(),n.TgZ(30,"nz-form-control",30),n._UZ(31,"textarea",31),n.qZA(),n.qZA(),n.TgZ(32,"nz-form-item"),n.TgZ(33,"nz-form-label"),n._uU(34),n.ALo(35,"translate"),n.qZA(),n.TgZ(36,"nz-form-control",30),n._UZ(37,"textarea",32),n.qZA(),n.qZA(),n.qZA(),n.TgZ(38,"nz-collapse-panel",33),n.ALo(39,"translate"),n.TgZ(40,"nz-form-item"),n.TgZ(41,"nz-form-label"),n._uU(42),n.ALo(43,"translate"),n.qZA(),n.TgZ(44,"nz-form-control",30),n._UZ(45,"textarea",31),n.qZA(),n.qZA(),n.TgZ(46,"nz-form-item"),n.TgZ(47,"nz-form-label"),n._uU(48),n.ALo(49,"translate"),n.qZA(),n.TgZ(50,"nz-form-control",30),n._UZ(51,"textarea",32),n.qZA(),n.qZA(),n.TgZ(52,"nz-form-item"),n.TgZ(53,"nz-form-label"),n._uU(54),n.ALo(55,"translate"),n.qZA(),n.TgZ(56,"nz-form-control",30),n._UZ(57,"textarea",34),n.qZA(),n.qZA(),n.TgZ(58,"nz-form-item"),n.TgZ(59,"nz-form-label"),n._uU(60),n.ALo(61,"translate"),n.qZA(),n.TgZ(62,"nz-form-control",30),n._UZ(63,"textarea",35),n.qZA(),n.qZA(),n.TgZ(64,"nz-form-item"),n.TgZ(65,"nz-form-label"),n._uU(66),n.ALo(67,"translate"),n.qZA(),n.TgZ(68,"nz-form-control",30),n._UZ(69,"textarea",36),n.qZA(),n.qZA(),n.TgZ(70,"nz-form-item"),n.TgZ(71,"nz-form-label"),n._uU(72),n.ALo(73,"translate"),n.qZA(),n.TgZ(74,"nz-form-control",30),n._UZ(75,"textarea",37),n.qZA(),n.qZA(),n.TgZ(76,"nz-form-item"),n.TgZ(77,"nz-form-label"),n._uU(78),n.ALo(79,"translate"),n.qZA(),n.TgZ(80,"nz-form-control",30),n._UZ(81,"textarea",38),n.qZA(),n.qZA(),n.TgZ(82,"nz-form-item"),n.TgZ(83,"nz-form-label"),n._uU(84),n.ALo(85,"translate"),n.qZA(),n.TgZ(86,"nz-form-control",30),n._UZ(87,"textarea",39),n.qZA(),n.qZA(),n.TgZ(88,"nz-form-item"),n.TgZ(89,"nz-form-label"),n._uU(90),n.ALo(91,"translate"),n.qZA(),n.TgZ(92,"nz-form-control",30),n._UZ(93,"textarea",40),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&a){const t=m.index,e=n.MAs(2),u=n.oxw();n.Q6J("formGroupName",t)("nzTitle",e)("nzClosable",u.translations.controls.length>1),n.xp6(5),n.Oqu(n.lcZ(6,37,"common.language")),n.xp6(2),n.s9C("nzErrorTip",n.lcZ(8,39,"ui.form.should_not_be_empty")),n.xp6(3),n.Q6J("nzValue",u.LanguageCode.Vi)("nzLabel","\u{1f1fb}\u{1f1f3} "+n.lcZ(11,41,"language.vi")),n.xp6(2),n.Q6J("nzValue",u.LanguageCode.En)("nzLabel","\u{1f1fa}\u{1f1f8} "+n.lcZ(13,43,"language.en")),n.xp6(2),n.Q6J("nzValue",u.LanguageCode.Ko)("nzLabel","\u{1f1f0}\u{1f1f7} "+n.lcZ(15,45,"language.ko")),n.xp6(4),n.Oqu(n.lcZ(19,47,"ingredient.name")),n.xp6(2),n.s9C("nzErrorTip",n.lcZ(21,49,"ui.form.should_not_be_empty")),n.xp6(4),n.Q6J("nzHeader",n.lcZ(25,51,"common.cosmetic")),n.xp6(4),n.Oqu(n.lcZ(29,53,"ingredient.description")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(77,rn)),n.xp6(3),n.Oqu(n.lcZ(35,55,"ingredient.effect")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(78,rn)),n.xp6(1),n.Q6J("nzHeader",n.lcZ(39,57,"ingredient.functional_food")),n.xp6(4),n.Oqu(n.lcZ(43,59,"ingredient.description")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(79,rn)),n.xp6(3),n.Oqu(n.lcZ(49,61,"ingredient.effect")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(80,rn)),n.xp6(3),n.Oqu(n.lcZ(55,63,"ingredient.dose")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(81,$)),n.xp6(3),n.Oqu(n.lcZ(61,65,"ingredient.exceed_dose")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(82,$)),n.xp6(3),n.Oqu(n.lcZ(67,67,"ingredient.pregnant")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(83,$)),n.xp6(3),n.Oqu(n.lcZ(73,69,"ingredient.combination")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(84,$)),n.xp6(3),n.Oqu(n.lcZ(79,71,"ingredient.not_combination")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(85,$)),n.xp6(3),n.Oqu(n.lcZ(85,73,"ingredient.notable_case")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(86,$)),n.xp6(3),n.Oqu(n.lcZ(91,75,"ingredient.attention")),n.xp6(3),n.Q6J("nzAutosize",n.DdM(87,$))}}const On=function(){return[]};let Fn=(()=>{class a{constructor(t,e,u,f,Z,F,S,q,w){this.fb=t,this.route=e,this.location=u,this.createIngredientGQL=f,this.updateIngredientGQL=Z,this.msgService=F,this.translateService=S,this.languageService=q,this.unitConverter=w,this.LanguageCode=T.spR,this.units=[...Object.values(T.fbc),"IU"],this.destroy$=new z.xQ,this.loading=!1,this.validateForm=this.fb.group({ewg:[null],translations:this.fb.array([],l.kI.required),cosmeticFunctionTranslations:this.fb.control([]),cosmeticCautionTranslations:this.fb.control([]),functionalFoodFunctionTranslations:this.fb.control([]),functionalFoodCautionTranslations:this.fb.control([]),rdi:[null],rdiUnit:[null]})}ngOnInit(){(0,sn.aj)([this.route.data.pipe((0,p.U)(t=>t.ingredient)),this.unitConverter.fetchConfig()]).pipe((0,b.R)(this.destroy$)).subscribe(([t])=>{var e,u,f,Z,F,S,q,w,j,Y;this.ingredient=t;const an=this.unitConverter.convert({id:this.ingredient.id,amount:(null===(u=null===(e=this.ingredient)||void 0===e?void 0:e.attributes)||void 0===u?void 0:u.rdi)||void 0,amountUnit:(null===(Z=null===(f=this.ingredient)||void 0===f?void 0:f.attributes)||void 0===Z?void 0:Z.rdiUnit)||void 0},"source");this.validateForm.patchValue({ewg:null===(F=this.ingredient)||void 0===F?void 0:F.ewg,rdi:an.amount,rdiUnit:an.amountUnit}),this.validateForm.setControl("translations",this.fb.array(this.languageService.sort([...(null===(S=this.ingredient)||void 0===S?void 0:S.translations)||[]]).map(v=>{var A,k,K,H,W,G,X,nn,tn,en,on;return this.fb.group({id:[v.id],name:[v.name,l.kI.required],language:[v.language,l.kI.required],cosmeticAttributes:this.fb.group({description:[null===(A=v.cosmeticAttributes)||void 0===A?void 0:A.description],effect:[null===(k=v.cosmeticAttributes)||void 0===k?void 0:k.effect]}),functionalFoodAttributes:this.fb.group({description:[null===(K=v.functionalFoodAttributes)||void 0===K?void 0:K.description],effect:[null===(H=v.functionalFoodAttributes)||void 0===H?void 0:H.effect],dose:[null===(W=v.functionalFoodAttributes)||void 0===W?void 0:W.dose],exceedDose:[null===(G=v.functionalFoodAttributes)||void 0===G?void 0:G.exceedDose],pregnant:[null===(X=v.functionalFoodAttributes)||void 0===X?void 0:X.pregnant],combination:[null===(nn=v.functionalFoodAttributes)||void 0===nn?void 0:nn.combination],notCombination:[null===(tn=v.functionalFoodAttributes)||void 0===tn?void 0:tn.notCombination],notableCase:[null===(en=v.functionalFoodAttributes)||void 0===en?void 0:en.notableCase],attention:[null===(on=v.functionalFoodAttributes)||void 0===on?void 0:on.attention]})})})||[],l.kI.required)),this.validateForm.patchValue({cosmeticFunctionTranslations:(null===(q=t.cosmeticFunctions)||void 0===q?void 0:q.map(v=>{var A;return Object.assign(Object.assign({},null===(A=v.translations)||void 0===A?void 0:A[0]),{function:Object.assign({},v)})}))||[],cosmeticCautionTranslations:(null===(w=t.cosmeticCautions)||void 0===w?void 0:w.map(v=>{var A;return Object.assign(Object.assign({},null===(A=v.translations)||void 0===A?void 0:A[0]),{caution:v})}))||[],functionalFoodFunctionTranslations:(null===(j=t.functionalFoodFunctions)||void 0===j?void 0:j.map(v=>{var A;return Object.assign(Object.assign({},null===(A=v.translations)||void 0===A?void 0:A[0]),{function:Object.assign({},v)})}))||[],functionalFoodCautionTranslations:(null===(Y=t.functionalFoodCautions)||void 0===Y?void 0:Y.map(v=>{var A;return Object.assign(Object.assign({},null===(A=v.translations)||void 0===A?void 0:A[0]),{caution:v})}))||[]})})}get translations(){return this.validateForm.get("translations")}addTab(){const t=new Set([T.spR.Vi,T.spR.En,T.spR.Ko]);this.translations.controls.forEach(u=>t.delete(u.value.language));const e=0===t.size?T.spR.Vi:t.values().next().value;this.translations.push(this.fb.group({id:[],name:[null,l.kI.required],language:[e,l.kI.required],cosmeticAttributes:this.fb.group({description:[],effect:[]}),functionalFoodAttributes:this.fb.group({description:[],effect:[],dose:[],exceedDose:[],pregnant:[],combination:[],notCombination:[],notableCase:[],attention:[]})}))}removeTab(t){this.translations.removeAt(t)}submit(){var t;Object.values(this.validateForm.controls).forEach(e=>{e.markAsDirty(),e.updateValueAndValidity()}),!this.validateForm.invalid&&(this.loading=!0,(0,cn.of)(null===(t=this.ingredient)||void 0===t?void 0:t.id).pipe((0,g.zg)(e=>{var u,f,Z,F,S,q,w,j,Y,an,v,A,k,K,H,W,G,X,nn,tn,en,on,mn,hn,fn,_n,zn;if(e){const un=this.unitConverter.convert({id:e,amount:(null===(u=this.validateForm.get("rdi"))||void 0===u?void 0:u.value)||void 0,amountUnit:(null===(f=this.validateForm.get("rdiUnit"))||void 0===f?void 0:f.value)||void 0},"target"),L={ewg:null===(Z=this.validateForm.get("ewg"))||void 0===Z?void 0:Z.value,attribute:(null===(F=this.validateForm.get("rdi"))||void 0===F?void 0:F.value)&&{create:{rdi:un.amount,rdiUnit:un.amountUnit}},translations:{create:null===(S=this.translations.value)||void 0===S?void 0:S.filter(E=>!E.id).map(E=>V().omit(E,["id"])),set:null===(q=this.translations.value)||void 0===q?void 0:q.filter(E=>E.id)},cosmeticCautions:{set:(null===(j=null===(w=this.validateForm.get("cosmeticCautionTranslations"))||void 0===w?void 0:w.value)||void 0===j?void 0:j.map(E=>({id:E.caution.id})))||{}},cosmeticFunctions:{set:(null===(an=null===(Y=this.validateForm.get("cosmeticFunctionTranslations"))||void 0===Y?void 0:Y.value)||void 0===an?void 0:an.map(E=>({id:E.function.id})))||{}},functionalFoodCautions:{set:(null===(A=null===(v=this.validateForm.get("functionalFoodCautionTranslations"))||void 0===v?void 0:v.value)||void 0===A?void 0:A.map(E=>({id:E.caution.id})))||{}},functionalFoodFunctions:{set:(null===(K=null===(k=this.validateForm.get("functionalFoodFunctionTranslations"))||void 0===k?void 0:k.value)||void 0===K?void 0:K.map(E=>({id:E.function.id})))||{}}};return this.updateIngredientGQL.mutate({where:{id:e},data:L})}{const un={ewg:null===(H=this.validateForm.get("ewg"))||void 0===H?void 0:H.value,attribute:(null===(W=this.validateForm.get("rdi"))||void 0===W?void 0:W.value)&&{create:{rdi:null===(G=this.validateForm.get("rdi"))||void 0===G?void 0:G.value,rdiUnit:null===(X=this.validateForm.get("rdiUnit"))||void 0===X?void 0:X.value}},translations:{create:null===(nn=this.translations.value)||void 0===nn?void 0:nn.map(L=>V().omit(L,["id"]))},cosmeticCautions:{connect:(null===(en=null===(tn=this.validateForm.get("cosmeticCautionTranslations"))||void 0===tn?void 0:tn.value)||void 0===en?void 0:en.map(L=>({id:L.caution.id})))||{}},cosmeticFunctions:{connect:(null===(mn=null===(on=this.validateForm.get("cosmeticFunctionTranslations"))||void 0===on?void 0:on.value)||void 0===mn?void 0:mn.map(L=>({id:L.function.id})))||{}},functionalFoodCautions:{connect:(null===(fn=null===(hn=this.validateForm.get("functionalFoodCautionTranslations"))||void 0===hn?void 0:hn.value)||void 0===fn?void 0:fn.map(L=>({id:L.caution.id})))||{}},functionalFoodFunctions:{connect:(null===(zn=null===(_n=this.validateForm.get("functionalFoodFunctionTranslations"))||void 0===_n?void 0:_n.value)||void 0===zn?void 0:zn.map(L=>({id:L.function.id})))||{}}};return this.createIngredientGQL.mutate({data:un})}})).subscribe(({errors:e,data:u})=>{var f,Z;e&&this.msgService.error(this.translateService.instant(`ingredient.${(null===(f=this.ingredient)||void 0===f?void 0:f.id)?"update":"create"}_error`)),u&&(this.msgService.success(this.translateService.instant(`ingredient.${(null===(Z=this.ingredient)||void 0===Z?void 0:Z.id)?"update":"create"}_success`)),this.location.back()),this.loading=!1},e=>{var u;this.msgService.error(this.translateService.instant(`ingredient.${(null===(u=this.ingredient)||void 0===u?void 0:u.id)?"update":"create"}_error`)),this.loading=!1}))}cancel(){this.location.back()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(l.qu),n.Y36(_.gz),n.Y36(M.Ye),n.Y36(T.ifX),n.Y36(T.x2z),n.Y36(N.dD),n.Y36(P.sK),n.Y36(vn.T),n.Y36(Cn.B))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-ingredient-details"]],decls:69,vars:39,consts:[[1,"site-page-header"],["nz-page-header-breadcrumb",""],["nz-icon","","nzType","home"],["routerLink","/ingredients"],["nz-form","",3,"nzLayout","formGroup","ngSubmit"],[1,"mb-3"],[3,"nzHeader"],[1,"ewg"],["nz-input","","formControlName","ewg"],["formControlName","cosmeticFunctionTranslations"],["formControlName","cosmeticCautionTranslations"],["formControlName","functionalFoodFunctionTranslations"],["formControlName","functionalFoodCautionTranslations"],[3,"nzAddOnAfter"],["formControlName","rdi","type","number",1,"w-100"],["unit",""],["nzType","editable-card","formArrayName","translations",3,"nzAdd","nzClose"],["nzClosable","",3,"formGroupName","nzTitle","nzClosable",4,"ngFor","ngForOf"],[1,"mt-2","pb-4"],["nz-button","","nzType","primary",3,"nzLoading"],["nz-button","","type","button",1,"ml-2",3,"nzDanger","click"],["formControlName","rdiUnit","nzAllowClear","",1,"unit"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"],["nzClosable","",3,"formGroupName","nzTitle","nzClosable"],["title",""],["nzHasFeedback","",3,"nzErrorTip"],["formControlName","language"],["nz-input","","formControlName","name"],["formGroupName","cosmeticAttributes",3,"nzHeader"],["nzHasFeedback",""],["nz-input","","formControlName","description",3,"nzAutosize"],["nz-input","","formControlName","effect",3,"nzAutosize"],["formGroupName","functionalFoodAttributes",3,"nzHeader"],["nz-input","","formControlName","dose",3,"nzAutosize"],["nz-input","","formControlName","exceedDose",3,"nzAutosize"],["nz-input","","formControlName","pregnant",3,"nzAutosize"],["nz-input","","formControlName","combination",3,"nzAutosize"],["nz-input","","formControlName","notCombination",3,"nzAutosize"],["nz-input","","formControlName","notableCase",3,"nzAutosize"],["nz-input","","formControlName","attention",3,"nzAutosize"]],template:function(t,e){if(1&t&&(n.TgZ(0,"nz-page-header",0),n.TgZ(1,"nz-breadcrumb",1),n.TgZ(2,"nz-breadcrumb-item"),n._UZ(3,"i",2),n.qZA(),n.TgZ(4,"nz-breadcrumb-item"),n.TgZ(5,"a",3),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.qZA(),n.TgZ(8,"nz-breadcrumb-item"),n.TgZ(9,"a"),n._uU(10),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"form",4),n.NdJ("ngSubmit",function(){return e.submit()}),n.TgZ(12,"nz-card",5),n.TgZ(13,"nz-collapse"),n.TgZ(14,"nz-collapse-panel",6),n.ALo(15,"translate"),n.TgZ(16,"nz-form-item"),n.TgZ(17,"nz-form-label"),n.TgZ(18,"span",7),n._uU(19,"ewg"),n.qZA(),n.qZA(),n.TgZ(20,"nz-form-control"),n._UZ(21,"input",8),n.qZA(),n.qZA(),n.TgZ(22,"nz-form-item"),n.TgZ(23,"nz-form-label"),n._uU(24),n.ALo(25,"translate"),n.qZA(),n.TgZ(26,"nz-form-control"),n._UZ(27,"app-function-select",9),n.qZA(),n.qZA(),n.TgZ(28,"nz-form-item"),n.TgZ(29,"nz-form-label"),n._uU(30),n.ALo(31,"translate"),n.qZA(),n.TgZ(32,"nz-form-control"),n._UZ(33,"app-caution-select",10),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"nz-collapse-panel",6),n.ALo(35,"translate"),n.TgZ(36,"nz-form-item"),n.TgZ(37,"nz-form-label"),n._uU(38),n.ALo(39,"translate"),n.qZA(),n.TgZ(40,"nz-form-control"),n._UZ(41,"app-function-select",11),n.qZA(),n.qZA(),n.TgZ(42,"nz-form-item"),n.TgZ(43,"nz-form-label"),n._uU(44),n.ALo(45,"translate"),n.qZA(),n.TgZ(46,"nz-form-control"),n._UZ(47,"app-caution-select",12),n.qZA(),n.qZA(),n.TgZ(48,"nz-form-item"),n.TgZ(49,"nz-form-label"),n._uU(50),n.ALo(51,"translate"),n.qZA(),n.TgZ(52,"nz-form-control"),n.TgZ(53,"nz-input-group",13),n._UZ(54,"nz-input-number",14),n.qZA(),n.YNc(55,Sn,2,1,"ng-template",null,15,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(57,"br"),n.TgZ(58,"nz-tabset",16),n.NdJ("nzAdd",function(){return e.addTab()})("nzClose",function(f){return e.removeTab(f.index)}),n.YNc(59,wn,94,88,"nz-tab",17),n.qZA(),n.qZA(),n.TgZ(60,"nz-form-item",18),n.TgZ(61,"nz-form-control"),n.TgZ(62,"nz-input-group"),n.TgZ(63,"button",19),n._uU(64),n.ALo(65,"translate"),n.qZA(),n.TgZ(66,"button",20),n.NdJ("click",function(){return e.cancel()}),n._uU(67),n.ALo(68,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t){const u=n.MAs(56);n.xp6(6),n.Oqu(n.lcZ(7,17,"common.ingredient")),n.xp6(4),n.Oqu(null==((null==e.ingredient?null:e.ingredient.translations)||n.DdM(37,On))[0]?null:((null==e.ingredient?null:e.ingredient.translations)||n.DdM(38,On))[0].name),n.xp6(1),n.Q6J("nzLayout","vertical")("formGroup",e.validateForm),n.xp6(3),n.Q6J("nzHeader",n.lcZ(15,19,"common.cosmetic")),n.xp6(10),n.Oqu(n.lcZ(25,21,"ingredient.special_function")),n.xp6(6),n.hij(" ",n.lcZ(31,23,"ingredient.caution")," "),n.xp6(4),n.Q6J("nzHeader",n.lcZ(35,25,"ingredient.functional_food")),n.xp6(4),n.Oqu(n.lcZ(39,27,"ingredient.special_function")),n.xp6(6),n.hij(" ",n.lcZ(45,29,"ingredient.caution")," "),n.xp6(6),n.Oqu(n.lcZ(51,31,"product.rdi")),n.xp6(3),n.Q6J("nzAddOnAfter",u),n.xp6(6),n.Q6J("ngForOf",e.translations.controls),n.xp6(4),n.Q6J("nzLoading",e.loading),n.xp6(1),n.hij(" ",n.lcZ(65,33,null!=e.ingredient&&e.ingredient.id?"common.update":"common.add")," "),n.xp6(2),n.Q6J("nzDanger",!0),n.xp6(1),n.hij(" ",n.lcZ(68,35,"common.cancel")," ")}},directives:[x.$O,d.Dg,x.A2,d.MO,Zn.w,U.Ls,_.yS,l._Y,l.JL,i.Lr,l.sg,s.bd,Q.yH,Q.Zv,o.SK,i.Nx,o.t3,i.iK,i.Fd,y.Zp,l.Fj,l.JJ,l.u,En,Nn,y.gB,I._,B.xH,l.CE,M.sg,O.ix,Dn.dQ,R.Vq,R.Ip,B.xw,l.x0,y.rh],pipes:[P.X$,gn.o,M.i8],styles:[".ewg[_ngcontent-%COMP%]{color:#006400;font-weight:bold}.unit[_ngcontent-%COMP%]{min-width:100px}"]}),a})();const ln=function(){return[]};function Bn(a,m){if(1&a&&n._UZ(0,"img",7),2&a){const t=m.$implicit;n.s9C("src",t.symbolUrl,n.LSH),n.s9C("alt",null==(t.translations||n.DdM(3,ln))[0]?null:(t.translations||n.DdM(4,ln))[0].name),n.s9C("title",null==(t.translations||n.DdM(5,ln))[0]?null:(t.translations||n.DdM(6,ln))[0].name)}}function Qn(a,m){1&a&&n._UZ(0,"img",8)}const Rn=function(a,m,t,e){return{"ewg-score--low":a,"ewg-score--medium":m,"ewg-score--high":t,"ewg-score--unknown":e}};let Vn=(()=>{class a{constructor(t){this.languageService=t,this.EwgRiskType=T.Xrz,this.languages=new Map,this.languages.set(T.spR.Vi,1),this.languages.set(T.spR.En,2)}ngOnInit(){}pick(t){var e;return null===(e=this.languageService.pick(this.languages,t.translations))||void 0===e?void 0:e.name}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(vn.T))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-ingredient-compact"]],inputs:{ingredient:"ingredient"},decls:9,vars:10,consts:[[1,"ingredient-card"],[1,"text-white",3,"ngClass"],[1,"flex-grow-1"],[1,"ingredient-functions"],["class","function__icon",3,"src","alt","title",4,"ngFor","ngForOf"],["className","{styles.cautionIndicator}",1,"caution-indicator"],["src","assets/icons/caution.svg","class","w-100 h-100",4,"ngIf"],[1,"function__icon",3,"src","alt","title"],["src","assets/icons/caution.svg",1,"w-100","h-100"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._uU(2),n.qZA(),n.TgZ(3,"div",2),n._uU(4),n.TgZ(5,"div",3),n.YNc(6,Bn,1,7,"img",4),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.YNc(8,Qn,1,0,"img",6),n.qZA(),n.qZA()),2&t&&(n.xp6(1),n.Q6J("ngClass",n.l5B(5,Rn,e.ingredient.ewgRiskType===e.EwgRiskType.Low,e.ingredient.ewgRiskType===e.EwgRiskType.Medium,e.ingredient.ewgRiskType===e.EwgRiskType.High,null===e.ingredient.ewgRiskType)),n.xp6(1),n.hij(" ",e.ingredient.ewg," "),n.xp6(2),n.hij(" ",e.pick(e.ingredient)," "),n.xp6(2),n.Q6J("ngForOf",e.ingredient.cosmeticFunctions),n.xp6(2),n.Q6J("ngIf",null==e.ingredient.cosmeticCautions?null:e.ingredient.cosmeticCautions.length))},directives:[M.mk,M.sg,M.O5],styles:[".ingredient-card[_ngcontent-%COMP%]{border-radius:11px;padding:15px;display:flex;justify-content:space-between;align-items:center}.ingredient-card[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:20px}.ewg-score--low[_ngcontent-%COMP%]{background-size:contain;background-repeat:no-repeat;display:flex;justify-content:center;align-items:center;width:30px;height:30px;background-image:url(/assets/icons/ewg-low.svg)}.ewg-score--medium[_ngcontent-%COMP%]{background-size:contain;background-repeat:no-repeat;display:flex;justify-content:center;align-items:center;width:30px;height:30px;background-image:url(/assets/icons/ewg-medium.svg)}.ewg-score--high[_ngcontent-%COMP%]{background-size:contain;background-repeat:no-repeat;display:flex;justify-content:center;align-items:center;width:30px;height:30px;background-image:url(/assets/icons/ewg-high.svg)}.ewg-score--unknown[_ngcontent-%COMP%]{background-size:contain;background-repeat:no-repeat;display:flex;justify-content:center;align-items:center;width:30px;height:30px;background-image:url(/assets/icons/ewg-unknown.svg)}.ingredient-functions[_ngcontent-%COMP%]{display:flex;align-items:center;overflow-x:auto;overflow-y:hidden}.ingredient-functions[_ngcontent-%COMP%] > img[_ngcontent-%COMP%] + img[_ngcontent-%COMP%]{margin-left:6px}.function__icon[_ngcontent-%COMP%]{width:14px;height:14px}.caution-indicator[_ngcontent-%COMP%]{width:23px;height:23px}"]}),a})();function $n(a,m){1&a&&(n.TgZ(0,"button",15),n._UZ(1,"i",16),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&a&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"common.search")," "))}const jn=function(a){return["/ingredients",a]};function Yn(a,m){if(1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._UZ(4,"app-ingredient-compact",17),n.qZA(),n.TgZ(5,"td"),n.TgZ(6,"a",18),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.qZA(),n.qZA()),2&a){const t=m.$implicit;n.xp6(2),n.Oqu(t.id),n.xp6(2),n.Q6J("ingredient",t),n.xp6(2),n.Q6J("routerLink",n.VKq(6,jn,t.id)),n.xp6(1),n.Oqu(n.lcZ(8,4,"common.edit"))}}let kn=(()=>{class a{constructor(t,e,u,f,Z,F){this.route=t,this.router=e,this.getIngredientListGQL=u,this.msgService=f,this.translateService=Z,this.fb=F,this.destroy$=new z.xQ,this.ingredients=[],this.ingredientsCount=0,this.pageIndex=1,this.pageSize=10,this.loading=!1,this.searchForm=this.fb.group({name:[null]})}ngOnInit(){this.route.queryParamMap.pipe((0,b.R)(this.destroy$)).subscribe(t=>{var e;this.pageIndex=parseInt(t.get("page")||"1",10),this.pageSize=parseInt(t.get("size")||"10",10),this.text=t.get("text")||"",this.patchFormValue(),this.dataSubscription?null===(e=this.dataQueryRef)||void 0===e||e.refetch(this.getVariables()):(this.dataQueryRef=this.getIngredientListGQL.watch(this.getVariables(),{notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),this.dataSubscription=this.dataQueryRef.valueChanges.pipe((0,b.R)(this.destroy$)).subscribe(({data:u,loading:f,error:Z,errors:F})=>{if(this.loading=f,!f){if(Z||F)return void this.msgService.error(this.translateService.instant("ui.message.can_not_load_data"));u&&(this.ingredients=u.ingredients,this.ingredientsCount=u.ingredientsConnection.aggregate.count)}}))})}getVariables(){var t;return{first:this.pageSize,skip:(this.pageIndex-1)*this.pageSize,where:{translationsSome:{nameContains:(null===(t=this.text)||void 0===t?void 0:t.trim())||void 0}},orderBy:{id:T.d$J.Desc}}}patchFormValue(){this.text&&this.searchForm.controls.name.untouched&&this.searchForm.patchValue({name:this.text})}handleQueryParamsChange(t){this.router.navigate([],{queryParams:{page:t.pageIndex,size:t.pageSize},relativeTo:this.route,queryParamsHandling:"merge"})}handleSearch(){this.router.navigate([],{queryParams:{text:this.searchForm.value.name||void 0,page:1},relativeTo:this.route,queryParamsHandling:"merge"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(_.gz),n.Y36(_.F0),n.Y36(T.ZKs),n.Y36(N.dD),n.Y36(P.sK),n.Y36(l.qu))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-ingredient-list"]],decls:35,vars:24,consts:[[1,"site-page-header",3,"nzTitle"],["nz-page-header-breadcrumb",""],["nz-icon","","nzType","home"],["nz-button","","nzType","primary","routerLink","/ingredients/new"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"mb-3"],["nz-form","",3,"formGroup","ngSubmit"],[1,"row","justify-content-lg-center"],[1,"col-12","col-lg-6"],["nzSearch","",3,"nzAddOnAfter"],["formControlName","name","type","text","nz-input","",3,"placeholder"],["suffixIconButton",""],[1,"mb-4"],["nzBordered","",3,"nzData","nzFrontPagination","nzTotal","nzPageIndex","nzPageSize","nzLoading","nzQueryParams"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary","type","submit","nzSearch",""],["nz-icon","","nzType","search","nzTheme","outline"],[3,"ingredient"],[3,"routerLink"]],template:function(t,e){if(1&t&&(n.TgZ(0,"nz-page-header",0),n.ALo(1,"translate"),n.TgZ(2,"nz-breadcrumb",1),n.TgZ(3,"nz-breadcrumb-item"),n._UZ(4,"i",2),n.qZA(),n.TgZ(5,"nz-breadcrumb-item"),n.TgZ(6,"a"),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"nz-page-header-extra"),n.TgZ(10,"button",3),n._UZ(11,"i",4),n._uU(12),n.ALo(13,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"nz-card",5),n.TgZ(15,"form",6),n.NdJ("ngSubmit",function(){return e.handleSearch()}),n.TgZ(16,"div",7),n.TgZ(17,"div",8),n.TgZ(18,"nz-input-group",9),n._UZ(19,"input",10),n.ALo(20,"translate"),n.qZA(),n.YNc(21,$n,4,3,"ng-template",null,11,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"nz-card",12),n.TgZ(24,"nz-table",13),n.NdJ("nzQueryParams",function(f){return e.handleQueryParamsChange(f)}),n.TgZ(25,"thead"),n.TgZ(26,"tr"),n.TgZ(27,"th"),n._uU(28,"ID"),n.qZA(),n.TgZ(29,"th"),n._uU(30),n.ALo(31,"translate"),n.qZA(),n._UZ(32,"th"),n.qZA(),n.qZA(),n.TgZ(33,"tbody"),n.YNc(34,Yn,9,8,"tr",14),n.qZA(),n.qZA(),n.qZA()),2&t){const u=n.MAs(22);n.s9C("nzTitle",n.lcZ(1,14,"common.ingredient")),n.xp6(7),n.Oqu(n.lcZ(8,16,"common.ingredient")),n.xp6(5),n.hij(" ",n.lcZ(13,18,"ingredient.create")," "),n.xp6(3),n.Q6J("formGroup",e.searchForm),n.xp6(3),n.Q6J("nzAddOnAfter",u),n.xp6(1),n.s9C("placeholder",n.lcZ(20,20,"ingredient.name")),n.xp6(5),n.Q6J("nzData",e.ingredients)("nzFrontPagination",!1)("nzTotal",e.ingredientsCount)("nzPageIndex",e.pageIndex)("nzPageSize",e.pageSize)("nzLoading",e.loading),n.xp6(6),n.Oqu(n.lcZ(31,22,"ingredient.name")),n.xp6(4),n.Q6J("ngForOf",e.ingredients)}},directives:[x.$O,d.Dg,x.A2,d.MO,Zn.w,U.Ls,x.Jp,O.ix,Dn.dQ,_.rH,s.bd,l._Y,l.JL,i.Lr,l.sg,y.gB,l.Fj,y.Zp,l.JJ,l.u,C.N8,C.Om,C.$Z,C.Uo,C._C,C.p0,M.sg,Vn,_.yS],pipes:[P.X$],styles:[""]}),a})(),pn=(()=>{class a{constructor(t,e){this.router=t,this.getIngredientDetailsGQL=e}resolve(t,e){const u=parseInt(t.paramMap.get("id")||"",10);return u?this.getIngredientDetailsGQL.fetch({id:u},{fetchPolicy:"network-only"}).pipe((0,p.U)(f=>{var Z,F;if(!f.error&&!f.errors)return(null===(Z=f.data)||void 0===Z?void 0:Z.ingredient)?Object.assign(Object.assign({},f.data.ingredient),{translations:0===(null===(F=f.data.ingredient.translations)||void 0===F?void 0:F.length)?[{language:T.spR.Vi}]:f.data.ingredient.translations}):void this.router.navigateByUrl("/exception/404");this.router.navigateByUrl("/exception/500")})):{translations:[{language:T.spR.Vi}]}}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(_.F0),n.LFG(T.za3))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac}),a})();const Kn=[{path:"new",resolve:{ingredient:pn},component:Fn},{path:":id",resolve:{ingredient:pn},component:Fn},{path:"",pathMatch:"full",component:kn}];let Hn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[_.Bz.forChild(Kn)],_.Bz]}),a})(),Wn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({providers:[pn,Cn.B],imports:[[M.ez,Hn,l.u5,l.UX,D.m,P.aw.forChild(),s.vh,x.KJ,d.lt,C.HQ,N.gR,y.o7,I.Z,O.sL,U.PV,o.Jb,i.U5,C.HQ,B.we,Q.cD,R.LV,c.A0]]}),a})()},5021:(dn,J,r)=>{r.d(J,{B:()=>P});var M=r(8002),s=r(7716),x=r(1449);let P=(()=>{class C{constructor(l){this.remoteConfig=l,this.remoteConfig.strings.IU_INGREDIENTS.subscribe(y=>{this.IUConfig=y&&JSON.parse(y)})}fetchConfig(){return this.remoteConfig.strings.IU_INGREDIENTS.pipe((0,M.U)(l=>(this.IUConfig=l&&JSON.parse(l),this.IUConfig)))}convert(l,y){var I;if(!l.amount&&"IU"===l.amountUnit)return Object.assign(Object.assign({},l),{amountUnit:null});const O=null===(I=this.IUConfig)||void 0===I?void 0:I[`${l.id}`];return!l.amountUnit||!l.amount||!O||"source"===y&&l.amountUnit!==O.targetUnit||"target"===y&&l.amountUnit!==O.sourceUnit||(l.amountUnit="source"===y?O.sourceUnit:O.targetUnit,l.amount="source"===y?l.amount/O.targetValue*O.sourceValue:l.amount/O.sourceValue*O.targetValue),l}}return C.\u0275fac=function(l){return new(l||C)(s.LFG(x.uR))},C.\u0275prov=s.Yz7({token:C,factory:C.\u0275fac}),C})()}}]);